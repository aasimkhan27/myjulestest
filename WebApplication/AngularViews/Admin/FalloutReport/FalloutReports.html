<form id="FalloutReportForm" name="FalloutReportForm" novalidate>
    <div class="card-body">
        <div class="col-md-12">
            <div id="accordion" class="accordion">
                <div class="card mb-0">
                <!-- XERO-->
                    <div class="card-header fallout justify-content-between d-flex collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                        <a class="card-title">XERO INBOUND INTEGRATION</a>
                        <div class="ml-auto">
                            <span class="badge badge-wenodo text-100 mr-2">(Record Count:{{FALLOUT_REPORTS_XERO[0].ERROR_COUNT}})</span>
                        </div>
                    </div>
                    <div id="collapseTwo" class="card-body p-0 collapse" data-parent="#accordion">
                        <div class="table-responsive custom-scrollbar height-auto" ng-show="FALLOUT_REPORTS_XERO.length>0">
                            <table class="table table-striped">
                                <thead class="bg-wenodo-dark-blue">
                                    <tr>
                                        <th ng-repeat="column in JSON_COLUMN_NAME_XERO" class="text-nowrap">
                                            <input ng-if="column=='ENTITY NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_Xero.ENTITY_NAME" />
                                            <input ng-if="column=='BRANCH NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_Xero.BRANCH_NAME" />
                                            <input ng-if="column=='INTEGRATION STATUS'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="XERO STATUS"
                                                   ng-model="FalloutReportSearch_Xero.XERO_DATA_INTEGRATION_STATUS" />
                                            <span ng-if="column=='NAME'">{{column}}</span>
                                            <span ng-if="column=='JOURNAL STATUS'">{{column}}</span>
                                            <span ng-if="column=='LAST PICKUP DATE'">{{column}}</span>
                                            <span ng-if="column=='JOURNAL LAST PICKUP DATE'">{{column}}</span>
                                            <span ng-if="column=='SERVICE ERROR'">{{column}}</span>

                                        </th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="XERO in FALLOUT_REPORTS_XERO | filter:{'ENTITY_NAME':FalloutReportSearch_Xero.ENTITY_NAME}
                                           | filter:{'BRANCH_NAME':FalloutReportSearch_Xero.BRANCH_NAME}| filter:{'XERO_DATA_INTEGRATION_STATUS':FalloutReportSearch_Xero.XERO_DATA_INTEGRATION_STATUS}">
                                    <tr>
                                        <td>{{XERO.NAME}}</td>
                                        <td>{{XERO.ENTITY_NAME}}</td>
                                        <td>{{XERO.BRANCH_NAME}}</td>
                                        <td>{{XERO.XERO_DATA_INTEGRATION_STATUS}}</td>
                                        <td>{{XERO.XERO_JOURNAL_INTEGRATION_STATUS}}</td>
                                        <td>{{XERO.XERO_DATA_LAST_PICKUP_DATE | date:"dd/MM/yyyy HH:mm:ss"}}</td>
                                        <td>{{XERO.XERO_JOURNAL_LAST_PICKUP_DATE| date:"dd/MM/yyyy HH:mm:ss"}}</td>
                                        <td>
                                            {{XERO.ERROR_DESCRIPTION.length>100 ? (XERO.ERROR_DESCRIPTION| limitTo :50) +'...' : XERO.ERROR_DESCRIPTION}}
                                            <a ng-show="XERO.ERROR_DESCRIPTION.length>0" ng-click="POPUP_VIEW_EPOS_ERROR(XERO)" data-toggle="tooltip" data-html="true" data-original-title="View"><i class="fa fa-info-circle"></i></a>
                                        </td>
                                        <td class="headcol-right" style="min-width:100px">
                                            <a ng-click="XERO_REFRESH(XERO);" data-toggle="tooltip" data-html="true" data-original-title="Edit">
                                                <i class="far fa-sync-alt fa-lg" data-toggle="tooltip" data-html="true" data-original-title="Sync Xero Data"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- CURRENCY-->
                    <div class="card-header fallout justify-content-between d-flex collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                        <a class="card-title">CURRENCY SYMBOL MISSING</a>
                        <div class="ml-auto">
                            <span class="badge badge-wenodo text-100 mr-2">(Record Count:{{FALLOUT_REPORTS_CURRENCY.length}})</span>
                        </div>
                    </div>
                    <div id="collapseThree" class="card-body p-0 collapse" data-parent="#accordion">
                        <div class="table-responsive custom-scrollbar height-auto" ng-show="FALLOUT_REPORTS_CURRENCY.length>0">
                            <table class="table table-striped">
                                <thead class="bg-wenodo-dark-blue">
                                    <tr>
                                        <th ng-repeat="column in JSON_COLUMN_NAME_CURRENCY" class="text-nowrap">
                                            <span>{{column}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="CURRENCY in FALLOUT_REPORTS_CURRENCY">
                                    <tr>
                                        <td>{{CURRENCY.CODE}}</td>
                                        <td>{{CURRENCY.CURRENCY_NAME}}</td>
                                        <td>{{CURRENCY.SYMBOL}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- "Xero Duplicate Account Codes"-->
                    <div class="card-header fallout justify-content-between d-flex collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                        <a class="card-title">XERO DUPLICATE ACCOUNT CODES</a>
                        <div class="ml-auto">
                            <span class="badge badge-wenodo text-100 mr-2">(Record Count:{{XERO_DUPLICATE_ACCOUNT_CODE.length}})</span>
                        </div>
                    </div>
                    <div id="collapseFour" class="card-body p-0 collapse" data-parent="#accordion">
                        <div class="table-responsive custom-scrollbar height-auto" ng-show="XERO_DUPLICATE_ACCOUNT_CODE.length>0">
                            <table class="table table-striped">
                                <thead class="bg-wenodo-dark-blue">
                                    <tr>
                                        <th ng-repeat="column in JSON_COLUMN_NAME_XERO_DUPLICATE_ACCOUNT_CODE" class="text-nowrap">
                                            <span ng-if="column=='NAME'">{{column}}</span>
                                            <input ng-if="column=='ENTITY NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_XeroDuplicateAccountCode.ENTITY_NAME" />
                                            <input ng-if="column=='BRANCH NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_XeroDuplicateAccountCode.BRANCH_NAME" />
                                            <span ng-if="column=='CODE'">{{column}}</span>
                                            <span ng-if="column=='COUNT'">{{column}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="XERO in XERO_DUPLICATE_ACCOUNT_CODE | filter:{'ENTITY_NAME':FalloutReportSearch_XeroDuplicateAccountCode.ENTITY_NAME}
                                           | filter:{'BRANCH_NAME':FalloutReportSearch_XeroDuplicateAccountCode.BRANCH_NAME}">
                                    <tr>
                                        <td>{{XERO.NAME}}</td>
                                        <td>{{XERO.ENTITY_NAME}}</td>
                                        <td>{{XERO.BRANCH_NAME}}</td>
                                        <td>{{XERO.CODE}}</td>
                                        <td>{{XERO.COUNT}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--"Sales Outbount Integration to Marketman"-->
                    <div class="card-header fallout justify-content-between d-flex collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
                        <a class="card-title">SALES OUTBOUNT INTEGRATION TO MARKETMAN</a>
                        <div class="ml-auto">
                            <span class="badge badge-wenodo text-100 mr-2">(Record Count:{{SALES_OUTBOUNT_INTEGRATION_TO_MARKETMAN.length}})</span>
                        </div>
                    </div>
                    <div id="collapseFive" class="card-body p-0 collapse" data-parent="#accordion">
                        <div class="table-responsive custom-scrollbar height-auto" ng-show="SALES_OUTBOUNT_INTEGRATION_TO_MARKETMAN.length>0">
                            <table class="table table-striped">
                                <thead class="bg-wenodo-dark-blue">
                                    <tr>
                                        <th ng-repeat="column in JSON_COLUMN_NAME_SALES_OUTBOUNT_INTEGRATION_TO_MARKETMAN" class="text-nowrap">
                                            <span ng-if="column=='NAME'">{{column}}</span>
                                            <input ng-if="column=='ENTITY NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_Sales_Outbount_Integration_To_Marketman.ENTITY_NAME" />
                                            <input ng-if="column=='BRANCH NAME'"
                                                   type="text"
                                                   class="form-control"
                                                   placeholder="{{column}}"
                                                   ng-model="FalloutReportSearch_Sales_Outbount_Integration_To_Marketman.BRANCH_NAME" />
                                            <span ng-if="column=='CASHUP DATE'">{{column}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="MM in SALES_OUTBOUNT_INTEGRATION_TO_MARKETMAN | filter:{'ENTITY_NAME':FalloutReportSearch_Sales_Outbount_Integration_To_Marketman.ENTITY_NAME}
                                           | filter:{'BRANCH_NAME':FalloutReportSearch_Sales_Outbount_Integration_To_Marketman.BRANCH_NAME}">
                                    <tr>
                                        <td>{{MM.NAME}}</td>
                                        <td>{{MM.ENTITY_NAME}}</td>
                                        <td>{{MM.BRANCH_NAME}}</td>
                                        <td>{{MM.CASHUP_DATE | date:"dd/MM/yyyy"}}</td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="XERO_RESYNC">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" ng-init="XERO_DATE_INPUT()">
                    <h4 class="modal-title">
                        Resync Xero
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body custom-scrollbar min-height-350">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="d-block">Xero Refresh Date:*</label>
                            <input type="text"
                                   class="form-control dateinputOpenDate"
                                   autocomplete="off"
                                   name="FalloutReportSearch_Xero.LAST_PICKUP_DATE"
                                   readonly
                                   required
                                   placeholder="Select ..."
                                   ng-model="FalloutReportSearch_Xero.LAST_PICKUP_DATE"
                                   ng-value="FalloutReportSearch_Xero.LAST_PICKUP_DATE | date"
                                   ng-class="{'error':FalloutReportForm.submitted && FalloutReportForm.LAST_PICKUP_DATE.$error.required}" />
                        </div>
                        <div class="col-md-6">
                            <label class="d-block">Journal Refresh Date:</label>
                            <input type="text"
                                   class="form-control dateinputOpenDate"
                                   autocomplete="off"
                                   name="FalloutReportSearch_Xero.JOURNAL_PICKUP_DATE"
                                   readonly
                                   placeholder="Select ..."
                                   ng-model="FalloutReportSearch_Xero.JOURNAL_PICKUP_DATE"
                                   ng-value="FalloutReportSearch_Xero.JOURNAL_PICKUP_DATE | date"
                                   ng-class="{'error':FalloutReportForm.submitted && FalloutReportForm.JOURNAL_PICKUP_DATE.$error.required}" />
                        </div>
                        <div class="col-md-6"></div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>&nbsp;</label>
                                <div class="custom-control custom-checkbox">
                                    <input class="custom-control-input" type="checkbox" id="FalloutReportSearch_Xero.JOURNAL_PICKUP_FLAG"
                                           ng-model="FalloutReportSearch_Xero.JOURNAL_PICKUP_FLAG"
                                           ng-checked="FalloutReportSearch_Xero.JOURNAL_PICKUP_FLAG">
                                    <label for="FalloutReportSearch_Xero.JOURNAL_PICKUP_FLAG" class="custom-control-label">Journal Pickup Flag</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <span ng-show="LOADER_ICON && DISPLAY_HTML_FLAG == null;"><i class='fa fa-spinner fa-spin '></i></span>
                    <button class="btn btn-wenodo" ng-click="INS_UPD_CSTMR_INTGRTNS_LST_PICUP_DT();"> Save </button>
                    <button class="btn btn-w-default" ng-click="XERO_RESET();">Reset</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="FIELD_VALUE">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">View Error</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea class="form-control" rows="8" readonly
                              ng-model="FalloutReportSearch.EPOS_ERROR">
               </textarea>
                </div>
            </div>
        </div>
    </div>
 
</form>
 