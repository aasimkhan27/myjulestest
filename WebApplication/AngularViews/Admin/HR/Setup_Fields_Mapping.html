<form id="CustomFieldMapingForm" name="CustomFieldMapingForm" novalidate>
    <div class="card-header">
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label>Customer:*</label>
                    <select class="custom-select"
                            name="CUSTOMER_ID"
                            ng-model="SetupFieldsSearch.CUSTOMER_ID"
                            ng-options="CL.CUSTOMER_ID as CL.CUSTOMER_NAME for CL in CUSTOMER_LIST "
                            required
                            ng-change="GET_ENTITY_LIST(CL)"
                            ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.CUSTOMER_ID.$error.required}">
                        <option value="">- Please Select Customer-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Entity:*</label>
                    <select class="custom-select"
                            name="ENTITY_ID"
                            ng-model="SetupFieldsSearch.ENTITY_ID"
                            ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in ENTITY_LIST"
                            ng-change="ADMIN_GET_CUSTOM_APP_FIELD_MAPPING();"
                            required
                            ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.ENTITY_ID.$error.required}">
                        <option value="">- Please Select Entity-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label class="d-block">&nbsp;</label>
                    <button ng-click="COPY_FROM_ENTITY();" class="btn btn-wenodo">Copy From</button>
                </div>
            </div>

        </div>
    </div>

    <div class="card-body">
        <div class="text-center" ng-show="CUSTOM_FIELDS_LIST.length==0" empty-grid>
        </div>
        <div class="table-responsive  custom-scrollbar height-auto" ng-show="CUSTOM_FIELDS_LIST.length>0">
            <table class="table table-striped table-hover">
                <thead class="bg-wenodo-dark-blue">
                    <tr>
                        <th>Select</th>
                        <th>Field</th>
                        <th class="text-nowrap">Field Label</th>
                        <th class="text-nowrap">Field Type</th>
                        <th class="text-nowrap">Field Header</th>
                        <th class="text-nowrap">Editable By Employee</th>
                        <th>Employee Mandatory</th>
                        <th>Manager Mandatory</th>

                    </tr>
                </thead>
                <tbody ng-repeat="CUSTFLD in CUSTOM_FIELDS_LIST" ng-init="initializeAdmincustfields(CUSTFLD)">
                    <tr>
                        <!--0 full enable
                        1 half (to file header) disable
                        2 Complete disable-->
                        <td>
                            <div class="custom-control custom-checkbox" ng-if="APP_PAGE_ID!=17">
                                <input class="custom-control-input"
                                       type="checkbox"
                                       id="Custom_Field_Mapping{{$index}}"
                                       ng-disabled="CUSTFLD.IS_EDITABLE==1 || CUSTFLD.IS_EDITABLE==2"
                                       ng-model="CUSTFLD.ACTIVE"
                                       ng-change="NG_CHANGE_CHECKBOX(CUSTFLD)">
                                <label for="Custom_Field_Mapping{{$index}}" class="custom-control-label"></label>

                            </div>
                            <div class="custom-control custom-checkbox" ng-if="APP_PAGE_ID==17">
                                <!--<input class="custom-control-input"
        ng-disabled="CUSTFLD.ONLY_17_PERSONAL_DISABLE" type="checkbox" id="Isactive{{$index}}"
        ng-model="CUSTFLD.ACTIVE" ng-change="NG_CHANGE_CHECKBOX(CUSTFLD)">-->
                                <input class="custom-control-input"
                                       type="checkbox"
                                       id="Custom_Field_Mapping{{$index}}"
                                       ng-disabled="CUSTFLD.ONLY_17_PERSONAL_DISABLE"
                                       ng-model="CUSTFLD.APPLICANT_ACTIVE"
                                       ng-change="NG_CHANGE_CHECKBOX(CUSTFLD)">
                                <label for="Custom_Field_Mapping{{$index}}" class="custom-control-label"></label>
                            </div>

                        </td>
                        <td><label>{{CUSTFLD.FIELD_MASTER_COLUMN_NAME}} </label></td>
                        <td>
                            <input type="text"
                                   id="FIELD_LABEL{{$index}}"
                                   name="FIELD_LABEL{{$index}}"
                                   ng-required="CUSTFLD.ACTIVE"
                                   ng-disabled="!CUSTFLD.ACTIVE || CUSTFLD.IS_EDITABLE==1 || CUSTFLD.IS_EDITABLE==2"
                                   class="form-control"
                                   ng-model="CUSTFLD.ENTITY_COLUMN_NAME"
                                   ng-value="CUSTFLD.CUSTFLD.ACTIVE==false ? CUSTFLD.ENTITY_COLUMN_NAME=CUSTFLD.FIELD_MASTER_COLUMN_NAME : CUSTFLD.ENTITY_COLUMN_NAME"
                                   ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.{{'FIELD_LABEL'+$index}}.$error.required}" />
                        </td>
                        <td>
                            <div class="d-flex">
                                <select ng-model="CUSTFLD.FIELD_TYPE_ID"
                                        id="FIELD_TYPE{{CUSTFLD.FIELD_MASTER_ID}}"
                                        name="FIELD_TYPE{{$index}}"
                                        ng-disabled="!CUSTFLD.ACTIVE || CUSTFLD.IS_EDITABLE==1 || CUSTFLD.IS_EDITABLE==2 || CUSTFLD.DEFAULT_FIELD_TYPE_ID!=null"
                                        ng-required="CUSTFLD.ENTITY_COLUMN_NAME.length>0 && CUSTFLD.ACTIVE==true"
                                        class="custom-select w-90"
                                        ng-options="CUSTCTRL.FIELD_TYPE_ID as CUSTCTRL.TYPE_NAME for CUSTCTRL in CUSTOM_CUNTROL_LIST"
                                        ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.{{'FIELD_TYPE'+$index}}.$error.required}">
                                    <option value="">- Please Select Setup Control -</option>
                                </select>
                                <i class="fa fa-plus cursor-pointer mt-2" ng-if="APP_PAGE_ID!=17"
                                   ng-click="NG_CHANGE_FIELD_TYPE(CUSTFLD);"
                                   ng-show="!CUSTFLD.IS_DB_DROPDOWN && (CUSTFLD.FIELD_TYPE_ID == 3 || CUSTFLD.FIELD_TYPE_ID == 7 || CUSTFLD.FIELD_TYPE_ID == 8)"></i>
                            </div>
                        </td>
                        <td>
                            <select ng-model="CUSTFLD.APP_PAGE_HEADER_ID"
                                    id="HEADER_ID{{$index}}"
                                    name="HEADER_ID{{$index}}"
                                    ng-disabled="!CUSTFLD.ACTIVE"
                                    
                                    ng-init="CUSTFLD.APP_PAGE_HEADER_ID"
                                    class="custom-select w-90"
                                    ng-options="CUSTCTRL.APP_PAGE_HEADER_ID as CUSTCTRL.HEADER_NAME for CUSTCTRL in APP_PAGE_HEADER_LIST"
                                    ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.{{'HEADER_ID'+$index}}.$error.required}">
                                <option value="">- Please Select Header -</option>
                            </select>
                        </td>

                        <td>
                            <div class="custom-control custom-checkbox">
                                <input class="custom-control-input" type="checkbox" id="Employee_Editable{{$index}}"
                                       ng-disabled="APP_PAGE_ID==17 && CUSTFLD.FIELD_MASTER_ID!=115?false:!CUSTFLD.ACTIVE" 
                                       ng-model="CUSTFLD.IS_EMP_EDIT" 
                                       ng-value="CUSTFLD.IS_EMP_EDIT" >
                                <!--|| CUSTFLD.IS_EDITABLE==1 || CUSTFLD.IS_EDITABLE==2 || CUSTFLD.IS_MANDATORY"-->
                                
                                <label for="Employee_Editable{{$index}}" class="custom-control-label"></label>
                            </div>
                           
                        </td>
                        <td>
                            <div class="custom-control custom-checkbox">
                                <input class="custom-control-input" type="checkbox" id="Mandatory{{$index}}"
                                       ng-disabled="APP_PAGE_ID==17 && CUSTFLD.FIELD_MASTER_ID!=115?false:!CUSTFLD.ACTIVE || CUSTFLD.IS_EDITABLE==2"
                                       ng-model="CUSTFLD.IS_MANDATORY" ng-change="IS_EMP_MENDATORY_CHECK_BOX_CHECK(CUSTFLD);">
                                <label for="Mandatory{{$index}}" class="custom-control-label"></label>
                            </div>

                        </td>
                        <td>
                            <div class="custom-control custom-checkbox">
                                <input class="custom-control-input" type="checkbox" id="Manager{{$index}}"
                                       ng-disabled="APP_PAGE_ID==17 && CUSTFLD.FIELD_MASTER_ID!=115?false:!CUSTFLD.ACTIVE || CUSTFLD.IS_EDITABLE==2"
                                       ng-model="CUSTFLD.IS_MANDATORY_MANAGER">
                                <label for="Manager{{$index}}" class="custom-control-label"></label>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-md-12">
        <div class="form-group">
            <label>&nbsp;</label>
            <button ng-click="INS_UPD_APP_PAGE_FIELD_ENTITY(CUSTOM_FIELDS_LIST,CUSTOM_CUNTROL_LIST);" class="btn btn-wenodo">Save</button>
            <button ng-click="ADMIN_CUSTOM_FIELD_RESET();" class="btn btn-w-default">Reset</button>
            <a href="#!/Setup_Fields" class="btn btn-w-default">Back</a>
        </div>
    </div>
</form>

<div class="modal fade" id="FIELD_VALUE">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Options</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <label>Answer Options</label>
                <br />
                Use a Single line break to create Multi Options.
                <textarea class="form-control" rows="8" placeholder="Enter response Options." ng-model="OPTION_SELECTION.OPTION_TEXT"></textarea>
                <div class="modal-footer float-right">
                    <button type="button" ng-click="ADD_OPTION_COMMON(OPTION_SELECTION)" class="btn btn-wenodo"><i class="far fa-plus"></i> Add </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="POP_MODAL">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Copy Field Mapping</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <label>Entity</label>
                <br />

                <select class="custom-select"
                        name="COPY_TO_ENTITY_ID"
                        ng-model="SetupFieldsSearch.COPY_FROM_ENTITY_ID"
                        ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in COPY_FROM_ENTITY_LIST"
                        ng-disabled="ng-if==COPY_TO_ENTITY_EDITABLE"
                        ng-class="{'error':CustomFieldMapingForm.submitted && CustomFieldMapingForm.COPY_FROM_ENTITY_ID.$error.required}">
                    <option value="">- Please Select Entity-</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" ng-click="ADMIN_INS_COPY_FROM_ENTITY();" class="btn btn-wenodo"> Save </button>
            </div>
        </div>
    </div>
</div>