<style>
    h5 {
        font-size: 12px;
    }
</style>
<!--<script>
    var input = document.getElementById('number');
    input.onkeyup = input.onchange = enforceFloat;

    //enforce that only a float can be inputed
    function enforceFloat() {
        var valid = /^\-?\d+\.\d*$|^\-?[\d]*$/;
        var number = /\-\d+\.\d*|\-[\d]*|[\d]+\.[\d]*|[\d]+/;
        if (!valid.test(this.value)) {
            var n = this.value.match(number);
            this.value = n ? n[0] : '';
        }
    }
</script>-->
<!--<div class="animated fadeInLeft" id="AccountCustomer" role="tabpanel" ng-show="CASHUP.STEP_NO==6" aria-labelledby="custom-content-below-settings-tab">-->
<div class="overlay_loadingNew" style="display:{{overlay_loadingNew}}!important"></div>
<div id="LOADER_ID">
    <div class="card-header">
        <ul class="nav nav-pills float-left">
            <li class="nav-item border radius-50">
                <span class="font-12 text-bold">Branch: <span class="cash-up-header">{{CASHUP.BRANCH_NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">Area: <span class="cash-up-header">{{CASHUP.AreaList[0].NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">Session: <span class="cash-up-header">{{CASHUP.SESSION.SESSION_NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">CashUp Date: <span class="cash-up-header">{{CASHUP.CASHUP_DATE|date}}</span></span>
            </li>
        </ul>
        <div class="card-tools">
            <ul class="nav nav-pills ml-auto">
                <li class="nav-item border radius-50">
                    <span class="font-12 text-bold">ePOS: <span class="cash-up-header">{{(CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Credit"})[0].SALES_AMT | number:2}}</span></span>
                </li>
                <li class="nav-item border radius-50 ml-2">
                    <span class="font-12 text-bold">Actual: <span class="cash-up-header">{{CASHUP.ACCOUNT_TOTAL=(AccCustomerList | filter:{"IS_DELETED":"0"} | total:'AMOUNT') | number:2 }}</span></span>
                </li>
                <li class="nav-item border radius-50 ml-2">
                    <!--<span class="font-12 text-bold" ng-class="{'text-danger':CASHUP.VARIANCE_ACCOUNT!=0}">Variance: <span class="cash-up-header">{{ CASHUP.VARIANCE_ACCOUNT=((CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Credit"}).length>0?(CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Credit"})[0].SALES_AMT*1-CASHUP.ACCOUNT_TOTAL*1:0) |number:2}}</span></span>-->
                    <span class="font-12 text-bold" ng-class="{'text-danger':CASHUP.VARIANCE_ACCOUNT!=0}">Variance: <span class="cash-up-header">{{ CASHUP.VARIANCE_ACCOUNT=(  CASHUP.ACCOUNT_TOTAL - (CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Credit"})[0].SALES_AMT) |number:2}}</span></span>

                </li>
            </ul>
        </div>
    </div>
    <div class="card-header">
        <h5 class="card-title">Account Credit</h5>
    </div>
    <div class="card-body">
        <!--<div class="text-center" ng-show="CASHUP.ACCOUNT_TOTAL==0" empty-grid></div>-->
        <div class="table-responsive overflow-visible" >
            <table class="table table-striped">
                <thead class="bg-wenodo-dark-blue">
                    <tr>
                        <th>Customer Name </th>
                        <th>Company</th>
                        <!--<th>Payment Method </th>-->
                        <th> Amount </th>
                        <th>Invoice # </th>
                        <th>Note</th>
                        <th>Upload</th>
                    </tr>
                </thead>
                <tbody ng-show="CASHUP.ACCOUNT_TOTAL==0">
                    <tr><td colspan="6"><div class="text-center" empty-grid></div></td></tr>
                </tbody>
                <tbody ng-show="CASHUP.ACCOUNT_TOTAL!=0">
                    <tr ng-repeat="Cust in AccCustomerList | filter:{IS_DELETED:0}" ng-show="Cust.AMOUNT!=''" on-finish-render="ngRepeatFinished" ng-init="initaccountList(Cust);">
                        <td>
                            {{Cust.CUSTOMER_NAME}}
                        </td>
                        <td>
                            {{Cust.COMPANY}}
                        </td>
                        <!--<td>
                            <select class="custom-select"
                                    name="PAYMENT_METHOD_ID{{$index}}"
                                    ng-disabled="true"
                                    ng-model="Cust.PAYMENT_METHOD_ID"
                                    ng-options="CL.PAYMENT_METHOD_ID as CL.METHOD_NAME for CL in PAYMENT_METHODS">
                                <option value="">- Select -</option>
                            </select>
                        </td>-->
                        <td>
                            {{Cust.AMOUNT|number:2}}
                        </td>
                        <td>
                            {{Cust.CHECK_NO}}
                        </td>
                        <td>
                            {{Cust.NOTE}}

                        </td>
                        <td>
                            <span class="d-block" ng-repeat="upls in Cust.UploadedFiles">
                                <br ng-if="$index!=0" />
                                <span ng-if="$index!=0" />
                                <a class="font-11" download="{{upls.SERVER_FILE_NAME}}" href="/Uploads/{{upls.FILE_PATH}}{{upls.SERVER_FILE_NAME}}">
                                    <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME| limitTo: 10}}
                                    <span ng-if="upls.ORIGINAL_FILE_NAME.length > 10">...</span>
                                </a>
                            </span>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>
        <div class="card-footer text-right" >
            <h6 class="app-text text-bold">Total: {{ CASHUP.ACCOUNT_TOTAL=(AccCustomerList | filter:{"IS_DELETED":"0"} | total:'AMOUNT') | number:2 }}</h6>
        </div>
        <!--<hr ng-show="CASHUP.ACCOUNT_CREDIT_VALID==false" />
    <div class="form-group text-red p-3" ng-show="CASHUP.ACCOUNT_CREDIT_VALID==false">
        Please fill the mandatory fields marked in red (*) symbol.
    </div>-->
    </div>
    <div class="card-header">
        <h5 class="card-title">Account Received  <!--<button type="button" click-once class="btn btn-wenodo btn-sm ml-2" ng-click="POP_RECEIVED_CREDITS()">Select Received Credits</button>--></h5>
        <div class="card-tools">
            <ul class="nav nav-pills ml-auto">
                <li class="nav-item border radius-50">
                    <span class="font-12 text-bold">
                        ePOS: <span class="cash-up-header">
                            {{(CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Received"})[0].SALES_AMT | number:2}}

                        </span>
                    </span>

                </li>
                <li class="nav-item border radius-50 ml-2">
                    <span class="font-12 text-bold">Actual: <span class="cash-up-header">{{(SELECTED_CREDIT_RECEIPTS | filter:{"IS_DELETED":"0"} | total:'AMOUNT') | number:2 }}</span></span>

                </li>
                <li class="nav-item border radius-50 ml-2">
                    <span class="font-12 text-bold">
                        <sapn class="font-12 text-bold">Variance: <span class="cash-up-header">{{ CASHUP. VARIANCE_ACCOUNT_RECIVED=(CASHUP.ACCOUNT_RECEIVED_TOTAL-(CASHUP.EPOS_DATA | filter:{"MEDIA":"Account Received"})[0].SALES_AMT) |number:2}}</span></sapn>

                    </span>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <!--<div class="text-center" ng-show="SELECTED_CREDIT_RECEIPTS==0" empty-grid></div>-->
        <div class="table-responsive overflow-visible" >
            <table class="table table-striped">
                <thead class="bg-wenodo-dark-blue">
                    <tr>
                        <th>Customer Name </th>
                        <th>Company</th>
                        <th>Payment Method </th>
                        <th width="10%"> Amount </th>
                        <th>Received Amount</th>
                        <th>Invoice # </th>
                        <th>Note</th>
                        <th>Upload</th>
                    </tr>
                </thead>
                <tbody ng-show="CASHUP.ACCOUNT_RECEIVED_TOTAL==0">
                    <!-- ng-show="CASHUP.ACCOUNT_RECEIVED_TOTAL==0" -->
                    <tr><td colspan="6"><div class="text-center" empty-grid></div></td></tr>
                </tbody>
                <tbody ng-show="SELECTED_CREDIT_RECEIPTS.length>0">
                    <tr ng-repeat="CR in SELECTED_CREDIT_RECEIPTS | filter:{IS_DELETED:0}" ng-show="CR.AMOUNT!=''" ng-init="initaccountListrec(CR);">
                        <td>
                            {{CR.CUSTOMER_NAME}}
                        </td>
                        <td>
                            {{CR.COMPANY}}
                        </td>
                        <td>
                            <select class="custom-select"
                                    name="PAYMENT_METHOD_ID{{$index}}"
                                    ng-model="CR.PAYMENT_METHOD_ID"
                                    ng-class="{'error':!CR.PAYMENT_METHOD_ID_VALID && CLICK_SUBMITTED}"
                                    ng-options="CL.PAYMENT_METHOD_ID as CL.METHOD_NAME for CL in PAYMENT_METHODS_RECEIVED"
                                    ng-disabled="true">
                                <option value="">- Select -</option>
                            </select>
                        </td>
                        <td>
                            {{CR.TOTAL_AMT|number:2}}
                        </td>
                        <td>
                            {{CR.AMOUNT|number:2}}
                        </td>
                        <td>
                            {{CR.CHECK_NO}}
                        </td>
                        <td>
                            {{CR.NOTE}}

                        </td>
                        <td>
                           
                            <span class="d-block" ng-repeat="upls in CR.UploadedFiles">
                                <br ng-if="$index!=0" />
                                <span ng-if="$index!=0" />
                                <a class="font-11" download="{{upls.SERVER_FILE_NAME}}" href="/Uploads/{{upls.FILE_PATH}}{{upls.SERVER_FILE_NAME}}">
                                    <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME| limitTo: 10}}
                                    <span ng-if="upls.ORIGINAL_FILE_NAME.length > 10">...</span>
                                </a>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="card-footer text-right" >
            <h6 class="app-text text-bold">Total: {{(SELECTED_CREDIT_RECEIPTS | filter:{"IS_DELETED":"0"} | total:'AMOUNT')| number:2 }}</h6>
        </div>
    </div>
</div>
<div class="event-footer animated fadeInUp">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-12 d-inline m-2 text-right">
                <!--<button class="btn btn-w-default btn-sm" ng-click="ShowDiv(GetPreviousStep())" ng-show="CASHUP.STEP_NO!=0"><i class="fa fa-angle-double-left"></i> Previous</button>-->
                <button class="btn btn-w-default btn-sm" click-once ng-click="PreviousLink_View()"><i class="fa fa-angle-double-left"></i> Previous</button>
                <button class="btn btn-wenodo btn-sm" click-once ng-click="NextLink_View('Vouchers')"><i class="fa fa-angle-double-right"></i> Continue</button>
               </div>
        </div>
    </div>
</div>
<!--</div>-->



<script type="text/javascript">
    $(function () {
        //Initialize Select2 Elements
        $('.select2').select2()

        //Initialize Select2 Elements
        $('.select2bs4').select2({
            theme: 'bootstrap4'
        })
</script>