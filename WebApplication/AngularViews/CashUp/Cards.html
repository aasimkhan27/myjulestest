<style>
    h5 {
        font-size: 12px;
    }
</style>
<!--<div class="animated fadeInLeft" id="CardsManual" role="tabpanel" ng-show="CASHUP.STEP_NO==3" aria-labelledby="custom-content-below-settings-tab">-->
<div class="overlay_loadingNew" style="display:{{overlay_loadingNew}}!important"></div>
<div id="LOADER_ID">
    <div class="card-header">
        <ul class="nav nav-pills float-left">
            <li class="nav-item border radius-50">
                <span class="font-12 text-bold">Branch: <span class="cash-up-header">{{CASHUP.BRANCH_NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">Area: <span class="cash-up-header">{{CASHUP.AreaList[0].NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">Session: <span class="cash-up-header">{{CASHUP.SESSION.SESSION_NAME}}</span></span>
            </li>
            <li class="nav-item border radius-50 ml-2">
                <span class="font-12 text-bold">CashUp Date: <span class="cash-up-header">{{CASHUP.CASHUP_DATE|date}}</span></span>
            </li>
        </ul>
        <div class="card-tools">
            <ul class="nav nav-pills ml-auto">
                <li class="nav-item border radius-50">
                    <span class="font-12 text-bold">ePOS: <span class="cash-up-header">{{(CASHUP.EPOS_DATA | filter:{"MEDIA":"Cards"})[0].SALES_AMT | number:2}}</span></span>
                </li>
                <li class="nav-item border radius-50 ml-2">
                    <span class="font-12 text-bold">Actual: <span class="cash-up-header">{{CASHUP.TOTAL_CARD | number:2}}</span></span>
                </li>
                <li class="nav-item border radius-50 ml-2">
                    <span class="font-12 text-bold" ng-class="{'text-danger':CASHUP.VARIANCE_CARD!=0}">Variance: <span class="cash-up-header">{{ CASHUP.VARIANCE_CARD=(CASHUP.TOTAL_CARD -(CASHUP.EPOS_DATA | filter:{"MEDIA":"Cards"})[0].SALES_AMT)|number:2}}</span></span>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <form action="" class="input_cards_value mt-3">
            <div class="row">

                <div class="col-md-1">
                    <label for="amount">PDQ Terminal #</label>
                </div>

                <div class="col-md-1">
                    <label for="amount">Location</label>
                </div>

                <div class="col-md-1">
                    <label for="amount">Amount</label>
                </div>

                <div class="col-md-1">
                    <label for="Acode">Auth. Code</label>
                </div>
                <div class="col-md-1">
                    <label for="amex">Amex</label>
                </div>

                <div class="col-md-1">
                    <label for="visa">Visa</label>
                </div>

                <div class="col-md-1">
                    <label for="mastercard" class="text-nowrap">Mastercard</label>
                </div>
                <div class="col-md-1">
                    <label for="spade">Spades</label>
                </div>
                <div class="col-md-1">
                    <label for="club">Qlub</label>
                </div>

                <div class="col-md-1">
                    <label for="dinner">Others</label>
                </div>
                <div class="col-md-1">
                    <label for="dinner">Uploads</label>
                </div>
                <!--
           <div class="col-lg-1  ">
               <label for="Switch">Switch</label>
           </div>-->

                <div class="col-md-1">
                    <!--<label for="note">Actions</label>-->
                </div>

            </div>
            <div class="row" ng-repeat="Card in CardList | filter:{IS_DELETED:0}" ng-init="initcasdList(Card)" on-finish-render="ngRepeatFinished">
                <div class="col-md-1">
                    <div class="form-group">
                        <select class="custom-select text-xs"
                                ng-options="PDQ.ID as PDQ.PDQ_CODE for PDQ in Card.PDQList"
                                ng-model="Card.PDQ_ID">
                            <option value="">Manual</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <select class="custom-select text-xs"
                                ng-options="AREA.ID as AREA.NAME for AREA in (CASHUP.AreaList)"
                                ng-model="Card.AREA_ID"></select>
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <input id="amount" type="text" class="form-control" ng-disabled="true" formatted-decimal ng-model="Card.AMOUNT" ng-value="Card.AMOUNT=Card.VISA*1+Card.MASTERCARD*1+Card.AMEX*1+Card.DINNER*1+Card.SPADE*1+Card.CLUB_PAYMENTS*1 | number:2" value="{{Card.AMOUNT | number:2}}">
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <input id="Acode" type="text" class="form-control" ng-model="Card.AUTH_CODE">
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <!--<input type="text" value="" id="AMEX_AMEX" ng-model="Card.AMEX_BIFURCATION"
                           class="form-control"
                           name="AMEX"
                           ng-change="SUM_OF_CARDS(Card.AMEX_BIFURCATION,Card,1);" />
                    <small class="text-danger" ng-show="CardsListForm.AMEX.$dirty && CardsListForm.AMEX.$error.pattern">Error</small>
                    <input id="amex" type="hidden" ng-model="Card.AMEX">-->
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.AMEX">
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <!--<input type="text" value="" id="visa_visa" ng-model="Card.VISA_BIFURCATION"
                           class="form-control"
                           name="VISA"
                           ng-change="SUM_OF_CARDS(Card.VISA_BIFURCATION,Card,2);" />
                    <small class="text-danger" ng-show="CardsListForm.VISA.$dirty && CardsListForm.VISA.$error.pattern">Error</small>
                    <input id="visa" type="hidden" ng-model="Card.VISA">-->
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.VISA">
                    </div>
                </div>

                <div class="col-md-1">
                    <div class="form-group">
                        <!--<input type="text" value="" id="master_card" ng-model="Card.MASTERCARD_BIFURCATION"
                           class="form-control"
                           name="MASTERCARD"
                           ng-change="SUM_OF_CARDS(Card.MASTERCARD_BIFURCATION,Card,3);" />
                    <small class="text-danger" ng-show="CardsList.MASTERCARD.$dirty && CardsList.MASTERCARD.$error.pattern">Error</small>
                    <input id="mastercard" type="hidden" class="form-control" ng-model="Card.MASTERCARD">-->
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.MASTERCARD">
                    </div>
                </div>
                 <div class="col-md-1">
                    <div class="form-group">
                        
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.SPADE">
                    </div>
                </div>
                 <div class="col-md-1">
                    <div class="form-group">
                      
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.CLUB_PAYMENTS">
                    </div>
                </div>
                <div class="col-md-1">
                    <div class="form-group">
                        <!--<input type="text" value="" id="DINNER_DINNER" ng-model="Card.DINNER_BIFURCATION"
                           class="form-control"
                           name="DINNER"
                           ng-change="SUM_OF_CARDS(Card.DINNER_BIFURCATION,Card,4);" />
                    <small class="text-danger" ng-show="CardsListForm.DINNER.$dirty && CardsListForm.DINNER.$error.pattern">Error</small>
                    <input id="dinner" type="hidden" class="form-control" ng-model="Card.DINNER">-->
                        <input id="amex" type="text" class="form-control" only-digits ng-model="Card.DINNER">
                    </div>
                </div>
                <div class="col-md-1">
                    <div class="form-group">
                        <label for="CardFile{{$index}}" class="btn btn-upload text-nowrap" ng-show="Card.UploadedFiles==null || Card.UploadedFiles.length==0">
                            <i class="fal fa-upload text-white"></i>
                        </label>
                        <span class="hidden-input">
                            <input id="CardFile{{$index}}" ng-files="getTheFilesToUploadCards($files, 'CardFile', 5,Card,11,$index)" name="file" type="file" />
                        </span>
                        <span class="d-block" ng-repeat="upls in Card.UploadedFiles">
                            <br ng-if="$index!=0" />
                            <span ng-if="$index!=0" />
                            <!--<a download="{{upls.SERVER_FILE_NAME}}" href="/uploads/{{upls.FILE_PATH}}{{upls.ORIGINAL_FILE_NAME}}">  <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME}}</a>-->

                            <a class="font-11" download="{{upls.SERVER_FILE_NAME}}" href="/Uploads/{{upls.FILE_PATH}}{{upls.SERVER_FILE_NAME}}">
                                <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME| limitTo: 10}}
                                <span ng-if="upls.ORIGINAL_FILE_NAME.length > 10">...</span>
                            </a>
                            <span> <i ng-click="DELETE_UPLOAD_CARD_ALL(Card,upls,$index)" class="fa fa-times text-danger fa-sm mt-2 float-right cursor-pointer"></i> </span>
                        </span>
                    </div>
                </div>

                <!--<div class="col-lg-1  ">
                <div class="form-group">
                    <input id="Switch" type="text" class="form-control" only-digits ng-model="Card.SWITCH">
                </div>
            </div>-->

                <div class="col-md-1">
                    <div class="d-flex">
                        <a class="add_dreceived_button cursor-pointer mt-2" ng-click="AddCardLine()" click-once ng-show="$last" data-toggle="tooltip" data-html="true" data-original-title="Add More">
                            <i class="fas fa-plus-circle ml-2"></i>
                        </a>
                        <!-- <a class="add_dreceived_button" ng-click="DeleteLine(CardList, $index)" ng-show="$last && !$first"><i class="fas fa-minus-circle ml-2"></i></a>-->
                        <a class="add_dreceived_button cursor-pointer mt-2" ng-click="DeleteLine(CardList, $index,Card);" data-toggle="tooltip" data-html="true" data-original-title="Remove">
                            <i class="fas fa-minus-circle ml-2"></i>
                        </a>
                    </div>
                </div>

            </div>
            <div class="card-footer p-0 text-right">
                <div class="row py-2 align-items-center">
                    <div class="col-md-1 offset-md-4">
                        <div class="form-group mb-0">
                            <!--<input type="text" value="" id="1"
                               class="form-control"
                               name="AMEX" ng-value="CASHUP.TOTAL_AMEX=(CardList | total:'AMEX')| number:2 " />-->
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_AMEX=(CardList| filter:{"IS_DELETED":"0"} | total:'AMEX')| number:2}}</h6>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="form-group mb-0">
                            <!--<input type="text" value="" id="2"
                               class="form-control"
                               name="VISA" ng-value="CASHUP.TOTAL_AMEX=(CardList | total:'VISA')| number:2 " />-->
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_VISA=(CardList| filter:{"IS_DELETED":"0"} | total:'VISA')| number:2 }}</h6>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="form-group mb-0">
                            <!--<input type="text" value="" id="3"
                               class="form-control"
                               name="MASTERCARD" ng-value="CASHUP.TOTAL_AMEX=(CardList | total:'MASTERCARD')| number:2 " />-->
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_MASTERCARD=(CardList | filter:{"IS_DELETED":"0"}| total:'MASTERCARD')| number:2}}</h6>
                        </div>
                    </div>
                      <div class="col-md-1">
                        <div class="form-group mb-0">                            
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_SPADE=(CardList | filter:{"IS_DELETED":"0"}| total:'SPADE')| number:2}}</h6>
                        </div>
                    </div>
                     <div class="col-md-1">
                        <div class="form-group mb-0">                            
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_CLUB_PAYMENTS=(CardList | filter:{"IS_DELETED":"0"}| total:'CLUB_PAYMENTS')| number:2}}</h6>
                        </div>
                    </div>
                  
                    <div class="col-md-1">
                        <div class="form-group mb-0">
                            <!--<input type="text" value="" id="4"
                               class="form-control"
                               name="DINNER" ng-value="CASHUP.TOTAL_AMEX=(CardList | total:'DINNER')| number:2 " />-->
                            <h6 class="text-nowrap">{{CASHUP.TOTAL_DINNER=(CardList| filter:{"IS_DELETED":"0"}| total:'DINNER')| number:2}}</h6>

                        </div>
                    </div>
                    <div class="col-md-1 text-right"><h6 class="text-nowrap"> Total: {{CASHUP.TOTAL_CARD=(CardList| filter:{"IS_DELETED":"0"} | total:'AMOUNT')| number:2 }}</h6></div>
                </div>
            </div>
        </form>
        <hr />
        <div class="col-md-12">
            <div class="form-group">
                <label for="noteLayout" class="m-0 pl-1">Comments:</label>
                <textarea class="form-control" 
                          rows="4" 
                          placeholder="{{WRITE_A_COMMENT}}"
                          id="noteLayout" 
                          name="text" 
                          ng-model="CASHUP.CARD_NOTES"
                          ng-blur="INS_UPD_CASHUP_HEADER_NOTES()">
</textarea>
            </div>
        </div>
        <div class="col-md-12">
            <label for="noteLayout" class="border-bottom m-0 pl-1">Comments</label>
            <div class="text-center ng-isolate-scope" ng-show="CARD_NOTE_LIST.length==0"><div class="alert bg-custom-blue">{{NO_COMMENTS}}</div></div>
            <blockquote class="blockquote text-success text-sm" ng-repeat="FNL in CARD_NOTE_LIST" ng-init="NOTE_INIT(FNL)">
                <span class="float-right mb-2">
                    <a class="btn btn-w-default" ng-show="!FNL.IS_EDIT && FNL.IS_TIME_EDIT_FLAG" ng-click="EDIT_COMMENTS(FNL)"><i class="far fa-edit text-success"></i></a>
                    <a class="btn btn-w-default" ng-show="FNL.IS_EDIT" ng-click="SAVE_COMMENTS(FNL)"><i class="far fa-save text-success"></i></a>
                    <a class="btn btn-w-default" ng-show="FNL.IS_EDIT" ng-click="EDIT_CANCEL(FNL)"><i class="far fa-times text-danger"></i></a>
                    <!--<a class="btn btn-w-default"><i class="far fa-trash text-danger"></i></a>-->
                </span>
                <p class="text-success" ng-show="!FNL.IS_EDIT">{{FNL.NOTE}}</p>
                <textarea class="form-control d-block"
                          ng-show="FNL.IS_EDIT"
                          rows="2"
                          id="noteLayout"
                          placeholder="{{WRITE_A_COMMENT}}"
                          name="text"
                          ng-keyup="CHECK_EVENTS($event,FNL)"
                          ng-model="FNL.NOTE"></textarea>
                <div ng-show="FNL.IS_EDIT">
                    <span>Press Esc to Cancel</span>
                    <a ng-click="EDIT_CANCEL(FNL)" class="text-blue cursor-pointer">
                        Cancel
                    </a>
                </div>
                <footer class="blockquote-footer" ng-show="!FNL.IS_EDIT">
                    {{FNL.USER_NAME}},
                    <cite title="">{{FNL.USER_EMAIL}}</cite>
                    <br />
                    <cite class="ml-3">{{FNL.CREATED_DATE | date:'dd-MMM-yyyy HH:mm' }}</cite>
                    <div class="border-bottom"></div>

                </footer>
                <span class="semibold ml-3"
                      ng-show="FNL.IS_TIME_EDIT_FLAG">
                    Remaining time to edit this comment -
                    {{FNL.START_COUNTDOWN }}
                </span>
            </blockquote>
        </div>
    </div>

</div>
    <div class="event-footer animated fadeInUp">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12 d-inline m-2 text-right">
                    <!--<button class="btn btn-w-default btn-sm" ng-click="ShowDiv(GetPreviousStep())" ng-show="CASHUP.STEP_NO!=0"><i class="fa fa-angle-double-left"></i> Previous</button>-->
                    <button class="btn btn-w-default btn-sm" ng-click="PreviousLink()"><i class="fa fa-angle-double-left"></i> Previous</button>
                    <button class="btn btn-wenodo btn-sm" ng-click="NextLink('PtyCash')"><i class="fa fa-angle-double-right"></i> Continue</button>
                    <!--<button class="btn btn-wenodo btn-sm" ng-click="UPD_CASHUP_HEADER_SUBMIT()" ng-show="CASHUP.STEP_NO==10 && (CashUp_Main_STATUS_ID==0 || CashUp_Main_STATUS_ID==1 || CashUp_Main_STATUS_ID==5)"><i class="fa fa-angle-double-right"></i> Submit</button>
                    <button class="btn btn-wenodo btn-sm" ng-click="APP_CASHUP()" ng-show="CASHUP.STEP_NO==10 && (CashUp_Main_STATUS_ID==3)"><i class="fa fa-angle-double-right"></i> Approve</button>
                    <button class="btn btn-danger btn-sm" ng-click="REJ_CASHUP()" ng-show="CASHUP.STEP_NO==10 && (CashUp_Main_STATUS_ID==3)"><i class="fa fa-angle-double-right"></i> Return</button>-->
                </div>
            </div>
        </div>
    </div>

    <!--</div>-->
