<div class="card-header">
    <h5 class="card-title mt-2">Banking Record</h5>
</div>
<div class="card-body">
    <form id="CashBankingForm" name="CashBankingForm" novalidate>
        <div class="col-md-12 pl-0">
            <div class="row mb-3">
                <div class="col border py-2 px-3 border-radius-5 mx-2">
                    <span class="font-12 semibold">Cashup Date: <span class="cash-up-header">{{CashEditBankingSearch.CASH_BANKING_HEADER.CASHUP_DATE  | date}}</span></span>
                </div>
                <div class="col border py-2 px-3 border-radius-5 mx-2">
                    <span class="font-12 semibold">
                        EPOS Cash:
                        <span class="cash-up-header" ng-show="CashEditBankingSearch.CASH_BANKING_HEADER.EPOS_CASH>0">
                            <span class="semibold" ng-bind-html="CURRENCY_SYMBOL"></span>
                            {{CashEditBankingSearch.CASH_BANKING_HEADER.EPOS_CASH | number : TO_NUMBER_DECIMAL_TWO }}
                        </span>
                        <span class="cash-up-header" ng-show="CashEditBankingSearch.CASH_BANKING_HEADER.EPOS_CASH==null">
                            No Cashup
                        </span>
                    </span>
                </div>
                <div class="col border py-2 px-3 border-radius-5 mx-2">
                    <div class="form-inline font-12 semibold">
                        <label class="font-12 text-bold">Bankable Cash:</label>
                        <span ng-show="!CashEditBankingSearch.HIDE_SHOW_BANKABLE">
                            &nbsp;
                            <span class="semibold" ng-bind-html="CURRENCY_SYMBOL"></span>
                            {{CashEditBankingSearch.CASH_BANKING_HEADER.BANKABLE_CASH}}
                        </span>
                        <span ng-show="CashEditBankingSearch.HIDE_SHOW_BANKABLE">
                            <input type="text"
                                   ng-model="CashEditBankingSearch.CASH_BANKING_HEADER.BANKABLE_CASH"
                                   only-digits
                                   class="form-control form-control-sm ml-2" />
                        </span>

                        <span class="float-right ml-auto mt-1" ng-click="HIDE_SHOW_BANKABLE_FY()">
                            <i class="far fa-edit text-success cursor-pointer" ng-show="!CashEditBankingSearch.HIDE_SHOW_BANKABLE"></i>
                            <i class="far fa-undo text-success cursor-pointer" ng-show="CashEditBankingSearch.HIDE_SHOW_BANKABLE"></i>
                        </span>

                    </div>
                </div>
                <div class="col border py-2 px-3 border-radius-5 mx-2">
                    <span class="font-12 semibold">
                        Variance:
                        <span class="cash-up-header">
                            <span class="semibold" ng-bind-html="CURRENCY_SYMBOL"></span>
                            {{CashEditBankingSearch.CASH_BANKING_HEADER.CUSTOM_VARIANCE=(CashEditBankingSearch.CASH_BANKING_HEADER.BANKABLE_CASH - CashEditBankingSearch.CASH_BANKING_HEADER.BANKED_AMOUNT)| number : TO_NUMBER_DECIMAL_TWO}}
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <div class="table-responsive custom-scrollbar height-69vh">
            <table class="table table-head-fixed table-hover table-striped">
                <thead>
                    <tr>
                        <th ng-show="false">Approver</th>
                        <th class="w-200px text-right">Banked Amount</th>
                        <th class="text-nowrap">Deposit Date</th>
                        <th class="text-nowrap">Deposited by </th>
                        <th class="text-nowrap">Bank Slip #</th>
                        <th width="5%">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="CBD in CASH_BANKING_DETAILS track by $index">
                        <td>
                            <input type="text"
                                   name="BANKED_AMOUNT{{$index}}"
                                   only-digits
                                   class="form-control text-right"
                                   ng-model="CBD.BANKED_AMOUNT"
                                   ng-change="CHECK_BANKING_ALERT(CBD)"
                                   required
                                   ng-class="{'error':CashBankingForm.submitted && CashBankingForm.BANKED_AMOUNT{{$index}}.$error.required}"
                                   placeholder="Enter Bank Amount" />
                        </td>

                        <td ng-init="$parent.dateinputOpenDate()">

                            <input type="text"
                                   class="form-control dateinputOpenDate bg-white"
                                   autocomplete="off"
                                   name="DEPOSIT_DATE{{$index}}"
                                   readonly
                                   ng-model="CBD.DEPOSIT_DATE"
                                   ng-value="CBD.DEPOSIT_DATE | date"
                                   ng-class="{'error':CashBankingForm.submitted && CashBankingForm.DEPOSIT_DATE{{$index}}.$error.required}"
                                   placeholder="Enter Deposit Date"
                                   required />
                        </td>
                        <td>
                            <select class="custom-select"
                                    name="DEPOSITED_BY{{$index}}"
                                    ng-options="CL.ID as CL.NAME for CL in STAFF_LIST"
                                    ng-model="CBD.DEPOSITED_BY"
                                    required
                                    ng-class="{'error':CashBankingForm.submitted && CashBankingForm.DEPOSITED_BY{{$index}}.$error.required}">
                                <option value="">- Please Select-</option>
                            </select>

                        </td>
                        <td>
                            <input type="text"
                                   name="BANK_SLIP{{$index}}"
                                   class="form-control"
                                   placeholder="Enter Bank Slip #"
                                   required
                                   ng-class="{'error':CashBankingForm.submitted && CashBankingForm.BANK_SLIP{{$index}}.$error.required}"
                                   ng-model="CBD.BANK_SLIP" />
                        </td>
                        <td>
                            <a class="mr-2" data-toggle="tooltip"
                               data-html="true"
                               ng-show="$last"
                               data-original-title="Add More..."
                               ng-click="ADD_MORE_RECORD_CASH_BANK()"><i class="fad fa-plus-circle"></i></a>

                            <a data-toggle="tooltip"
                               data-html="true"
                               data-original-title="Delete"
                               ng-click="REMOVE_RECORD_CASH_BANK(CBD,$index)">
                                <i class="fad fas fa-minus-circle"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="text-bold text-right">Total Banked    <span class="semibold" ng-bind-html="CURRENCY_SYMBOL"></span> {{CashEditBankingSearch.CASH_BANKING_HEADER.BANKED_AMOUNT=((CASH_BANKING_DETAILS) | total:'BANKED_AMOUNT')}}</td>
                        <td colspan="4"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="col-md-12" ng-show="CashEditBankingSearch.CASH_BANKING_HEADER.CASH_BANKING_STATUS==8">
            <label>Comment  <span class="text-danger"> (*) </span></label>
            <textarea maxlength="2000"
                      class="form-control form-control-sm mb-2"
                      name="COMMENTS"
                      ng-model="CashEditBankingSearch.COMMENTS"
                      ng-class="{'error':CashBankingForm.submitted && CashBankingForm.COMMENTS.$error.required}"
                      ng-required="CashEditBankingSearch.IS_COMMENT_VALID"
                      rows="5"></textarea>
            {{2000 - CashEditBankingSearch.COMMENTS.length}} Character Limit
        </div>
        <div class="col-md-12">
            <div data-ng-show="CashBankingForm.submitted && CashBankingForm.$invalid" class="form-group has-error errormessage badge badge-light-red w-100 p-3">
                <span class="help-block errormessageline"><i class="fa fa-exclamation-triangle"></i> - Please provide the mandatory details to submit(marked in red).</span>
            </div>
            <div id="divInvlidUser" class="hideshowdiv" data-ng-show="CashBankingForm.$valid">
                <span class="help-block">{{InvalidUser}}</span>
            </div>
        </div>
        <div class="col-md-12 px-0">
            <button type="button" ng-click="INS_UPD_CASH_BANKING_ENTRY(0)" class="btn btn-wenodo">Save</button>
            <button type="button" ng-click="INS_UPD_CASH_BANKING_ENTRY(1)" class="btn btn-w-default">Submit</button>
            <a href="#!Cash_Banking" class="btn btn-w-default">Back</a>
            <button type="button" ng-show="CashEditBankingSearch.CASH_BANKING_HEADER.CASH_BANKING_STATUS==8 && CashEditBankingSearch.APPROVER_FLAG==1" ng-click="CashEditBankingSearch.IS_COMMENT_VALID=false;APP_REJ_CASH_BANKING(9)" class="btn btn-w-default">Approve</button>
            <button type="button" ng-show="CashEditBankingSearch.CASH_BANKING_HEADER.CASH_BANKING_STATUS==8  && CashEditBankingSearch.APPROVER_FLAG==1" ng-click="CashEditBankingSearch.IS_COMMENT_VALID=true;APP_REJ_CASH_BANKING(10)" class="btn btn-w-default">Reject</button>
        </div>
    </form>
</div>

