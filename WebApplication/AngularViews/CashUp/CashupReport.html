<style>

    .overlay_loadingtest {
        background-image: url(/E_Content/images/coming_soon.png);
        background-color: #fff;
        background-size: 300px;
        opacity: 1;
        background-repeat: no-repeat;
        background-position: center;
        display: block;
        width: 100%;
        height: 100%;
        z-index: 9999;
    }

    .typeahead-demo .custom-popup-wrapper {
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 1000;
        display: none;
        background-color: #f9f9f9;
    }

        .typeahead-demo .custom-popup-wrapper > .message {
            padding: 10px 20px;
            border-bottom: 1px solid #ddd;
            color: #868686;
        }

        .typeahead-demo .custom-popup-wrapper > .dropdown-menu {
            position: static;
            float: none;
            display: block;
            min-width: 160px;
            background-color: transparent;
            border: none;
            border-radius: 0;
            box-shadow: none;
        }
</style>

<div class="overlay_loading_coffee" id="overlay_loading_coffee" style="display:{{overlay_loadingNew}}!important"></div>
<form id="CashupReportForm" name="CashupReportForm" novalidate>

    <div class="card shadow-none">
        <div class="card-header">
            <h5 class="card-title">Cashup Report </h5>
        </div>
        <div class="card-body">
            <div class="table-responsive" style="z-index:-1" ng-show="REPORT_LIST.length>0">
                <table class="table table-striped">
                    <thead class="bg-wenodo-dark-blue">
                        <tr>
                            <th>Report</th>
                            <th>Description</th>
                            <!--<th>Date</th>-->
                            <th width="8%" class="text-center">Download</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="RPT in REPORT_LIST">
                        <tr>
                            <td>{{RPT.REPORT_NAME}}</td>
                            <td>{{RPT.REPORT_DESCRIPTION}}</td>
                            <!--<td>01/01/2020</td>-->
                            <td align="center">
                                <i class="fad fa-download fa-lg" data-toggle="tooltip" data-html="true" data-original-title="Download"
                                   ng-click="DOWNLOAD_SHOW_POP(RPT.REPORT_ID)"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>


        <div class="modal fade" id="CASHUP_REPORT">
            <div class="modal-dialog modal-lg">
                <div class="modal-content" ng-show="RPTID==8 || RPTID==10 || RPTID==11 || RPTID==12 || RPTID==13 || RPTID==14 || RPTID==15 || RPTID==19 || RPTID==20 || RPTID==21 || RPTID==22 || RPTID==23 || RPTID==27 || RPTID==28 || RPTID==29 || RPTID==36 || RPTID==37 || RPTID==38 || RPTID==52">
                    <div class="modal-header" ng-init="$parent.dateinputOpenDate()">
                        <h4 class="modal-title">
                            Download Report
                        </h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body custom-scrollbar min-height-350">
                        <div class="row">
                            <div class="col-md-4" ng-show="RPTID==8  || RPTID==27 || RPTID==28">
                                <div class="form-group">
                                    <label>Select Week:</label>
                                    <div class="input-group" style="display:flex" id="week-picker-wrapper" ng-init="DATE_WEEK_PICKER()">
                                        <div class="input-group-prepend">
                                            <button type="button" class="btn input-group-text week-prev">
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="form-control week-picker font-11" value="" format="yy-mm-dd" placeholder="Select a Week" />
                                        <div class="input-group-append">
                                            <button type="button" class="btn input-group-text week-next">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" ng-show="RPTID==10 || RPTID==11 || RPTID==12 || RPTID==13 || RPTID==14|| RPTID==15 || RPTID==20 || RPTID==21 || RPTID==22 || RPTID==23 || RPTID==29|| RPTID==36|| RPTID==37 || RPTID==52">
                                <div class="form-group">
                                    <label>Select Date:*</label>
                                    <div id="reportrange" class="custom-select custom-date text-xs">
                                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                        <span></span><b class="caret"></b>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" ng-show="RPTID==19">
                                <label class="d-block">Date:*</label>
                                <input type="text"
                                       class="form-control dateinputOpenDate"
                                       autocomplete="off"
                                       name="CashupReportSearch.START_DATE"
                                       readonly
                                       placeholder="Select ..."
                                       ng-model="CashupReportSearch.START_DATE"
                                       ng-value="CashupReportSearch.START_DATE | date"
                                       ng-class="{'error':CashupReportForm.submitted && CashupReportForm.START_DATE.$error.required}" />
                            </div>
                            <div class="col-md-4" ng-show="RPTID==8 || RPTID==10 || RPTID==11 || RPTID==12 || RPTID==13 || RPTID==14 || RPTID==15 || RPTID==19 || RPTID==20 || RPTID==21 || RPTID==22 || RPTID==23 || RPTID==27 || RPTID==28 || RPTID==29|| RPTID==36 || RPTID==37 || RPTID==52">
                                <div class="form-group">
                                    <label>Branch<span ng-if="RPTID==17 || RPTID==18 || RPTID==29">*</span>:</label>
                                    <select class="custom-select"
                                            name="BRANCH_ID"
                                            ng-required="RPTID==29"
                                            ng-model="CashupReportSearch.BRANCH_ID"
                                            ng-options="BRL.BRANCH_ID as BRL.BRANCH_NAME for BRL in BRANCH_LIST"
                                            ng-class="{'error':CashupReportForm.submitted && CashupReportForm.BRANCH_ID.$error.required}">
                                        <option value="">- Please Select Branch-</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-4" ng-init="$parent.dateinputOpenDate()" ng-show="RPTID ==38">
                                <div class="form-group">
                                    <label>Start Date:*</label>
                                    <input type="text"
                                           class="form-control dateinputOpenDate"
                                           autocomplete="off"
                                           name="ReportSearch.START_DATE"
                                           readonly
                                           placeholder="Select ..."
                                           ng-model="ReportSearch.START_DATE"
                                           ng-value="ReportSearch.START_DATE | date"
                                           required
                                           ng-class="{'error':ReportForm.submitted && ReportForm.START_DATE.$error.required}" />
                                </div>
                            </div>
                            <div class="col-md-4" ng-init="$parent.dateinputOpenDate()"  ng-show="RPTID ==38">
                                <label class="d-block">End Date:*</label>
                                <input type="text"
                                       class="form-control dateinputOpenDate"
                                       autocomplete="off"
                                       name="ReportSearch.END_DATE"
                                       readonly
                                       placeholder="Select ..."
                                       ng-model="ReportSearch.END_DATE"
                                       ng-value="ReportSearch.END_DATE | date"
                                       required
                                       ng-class="{'error':ReportForm.submitted && ReportForm.END_DATE.$error.required}" />

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <span ng-show="LOADER_ICON && DISPLAY_HTML_FLAG == null;"><i class='fa fa-spinner fa-spin '></i></span>
                        <button class="btn btn-wenodo"  ng-click="COMMON_REPORT_GENERATE_FILE(RPTID);"> Download </button>
                        <!--<button class="btn btn-w-default" ng-click="DOWNLOAD_WEEKLY_CASHUP_REPORT();">Download</button>-->
                        <button class="btn btn-w-default" ng-if="RPTID==8 || RPTID==27 || RPTID==28" ng-click="DISPLAY_WEEKLY_CASHUP_REPORT_INPAGE();">Display</button>
                        <button class="btn btn-w-default" ng-if="RPTID==36 " ng-click="DISPLAY_REVENUE_SUMMARY_CASHUP_REPORT_INPAGE();">Display</button>
                        <!--<button class="btn btn-wenodo" ng-if="false" ng-click="CASHUP_CONSOLIDATED_SALES_REPORT_INPAGE();">Display</button>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="col-md-12 text-right">
                <button type="button" ng-if="SHOW_WEEKLY_CASHUP_HTML_TABLE_FLAG" class="btn btn-wenodo mb-2"
                        ng-click="PRINT_PDF('SHOW_WEEKLY_CASHUP','p','mm','a4','Weekly_Cashup_Report','overlay_loading_coffee');"
                        data-toggle="tooltip" data-html="true" data-original-title="Download PDF" title="Download PDF">
                    <i class="far fa-file-pdf"></i>
                </button>
                <button type="button" ng-if="SHOW_REVENUE_CASHUP_HTML_TABLE_FLAG" class="btn btn-wenodo mb-2"
                        ng-click="PRINT_PDF('SHOW_WEEKLY_CASHUP','p','mm','a4','Revenue_Summary_Report','overlay_loading_coffee');"
                        data-toggle="tooltip" data-html="true" data-original-title="Download PDF" title="Download PDF">
                    <i class="far fa-file-pdf"></i>
                </button>
            </div>
            <div class="table-responsive custom-scrollbar mx-height-auto" ng-if="SHOW_WEEKLY_CASHUP_HTML_TABLE_FLAG || SHOW_REVENUE_CASHUP_HTML_TABLE_FLAG" id="SHOW_WEEKLY_CASHUP">
                    <table class="table table-striped" ng-show="RPTID==8 || RPTID==27 || RPTID==28">
                        <thead class="bg-wenodo-dark-blue">
                            <tr>
                                <th colspan="3" class="text-left border-bottom"><img src="{{ENTITY_LOGO}}" class="img-fluid footer-logo" /></th>
                                <!--<th colspan="2" width="25%" class="text-left border-bottom"><h5 class="mb-0">Branch:{{CashupReportSearch.PDF_BRANCH}}</h5></th>-->
                                <th colspan="4" class="text-center text-nowrap border-bottom"><h5 class="mb-0"><i class="far fa-calendar-alt"></i> {{REPORT_BETWEEN_DATE}}</h5></th>
                                <th colspan="4" class="text-right border-bottom"><img src="../E_Content/images/logo.png" class="img-fluid footer-logo" /></th>
                            </tr>
                            <tr>
                                <th ng-repeat="item in JSON_COLUMN_NAME_FOR_HTML">{{item}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in CASHUP_REPORT_DATA_FOR_HTML" ng-class="item.Session=='TOTAL COLLECTION' || item.Session=='TOTAL REVENUE'?'card-footer':''" on-finish-render="ngRepeatFinished">
                                <td ng-repeat="(key,value) in item">
                                    <!--{{key}}--{{value}}--{{key.Session}}-->
                                    <span ng-class="{'text-bold':key=='Session'}">
                                        {{value==0 || value==null? '--' : value}}
                                        {{key=='TotalWeek'  && (value!=null) ? '':''}}
                                        {{key=='Var_Last_Week'  && (value!=null) ? '%':''}}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table" ng-show="RPTID==36">
                        <thead class="bg-wenodo-dark-blue">
                            <tr>
                                <th colspan="3" class="text-left border-bottom"><img src="{{ENTITY_LOGO}}" class="img-fluid footer-logo" /></th>
                                <!--<th colspan="2" width="25%" class="text-left border-bottom"><h5 class="mb-0">Branch:{{CashupReportSearch.PDF_BRANCH}}</h5></th>-->
                                <th colspan="4" class="text-center text-nowrap border-bottom"><h5 class="mb-0"><i class="far fa-calendar-alt"></i> {{CashupReportSearch.START_DATE}} - {{CashupReportSearch.END_DATE}}</h5></th>
                                <th colspan="4" class="text-right border-bottom"><img src="../E_Content/images/logo.png" class="img-fluid footer-logo" /></th>
                            </tr>
                          
                            <tr style="background-color:gainsboro;color:#000000;">
                                <th colspan="2">Cash Up Entries</th>
                                <th colspan="2" class="text-right">EPOS</th>
                                <th colspan="2" class="text-right">Actual</th>
                                <th colspan="2" class="text-right">Variance</th>
                                <th colspan="3" ></th>
                            </tr>
                          
                        </thead>
                        <tbody>
                            <tr ng-repeat="EPOS in EPOS_ACTUAL_LIST| filter:{'ADD_IN_DAILY_TAKINGS':true}| filter:{'FLAG':1}">
                                <td colspan="2">{{EPOS.MEDIA}}</td>
                                <td colspan="2" class="text-right">{{EPOS.SALES_AMT |number:2}}</td>
                                <td colspan="2" class="text-right">{{EPOS.ACTUAL_AMT | number:2}}</td>
                                <td colspan="2" class="text-right">{{EPOS.VARIANCE_AMT | number:2 }}</td>
                                <td colspan="3"></td>
                            </tr>
                            <tr style="background-color:antiquewhite;color:dimgrey;">
                                <td colspan="2"><h6 class="text-bold">Total ({{CURRENCYLIST[0].CODE}})</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{(EPOS_DATA | filter:{"ADD_IN_DAILY_TAKINGS":"true"}| total:'SALES_AMT') | number:2}}</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{ACTUAL_TOTAL| number:2}}</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{VARIANCE_TOTAL| number:2}}</h6></td>
                                <td colspan="3"></td>
                            </tr>
                            <tr ng-repeat="EPOS in EPOS_ACTUAL_LIST| filter:{'ADD_IN_DAILY_TAKINGS':false}| filter:{'FLAG':1}">
                                <td colspan="2">{{EPOS.MEDIA}}</td>
                                <td colspan="2" class="text-right">
                                    <span ng-show="EPOS.SALES_AMT>0 || EPOS.SALES_AMT<0">{{EPOS.SALES_AMT |number:2}}</span>
                                    <span ng-show="EPOS.SALES_AMT==0" >0</span>
                                </td>
                                <td colspan="2" class="text-right">{{EPOS.ACTUAL_AMT | number:2}}</td>
                                <td colspan="2" class="text-right">
                                    <span ng-show="EPOS.VARIANCE_AMT>0 || EPOS.VARIANCE_AMT<0">{{EPOS.VARIANCE_AMT | number:2 }}</span>
                                    <span ng-show="EPOS.VARIANCE_AMT==0">0</span>
                                </td>
                                <td colspan="3"></td>
                            </tr>
                            <!--<tr style="background-color:#c398d5;color:dimgrey;">
                                <td colspan="2"><h6 class="text-bold">Other Total</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{(EPOS_DATA | filter:{"ADD_IN_DAILY_TAKINGS":"false"}| total:'SALES_AMT') | number:2}}</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{ACTUAL_TOTAL_INVALID| number:2}}</h6></td>
                                <td colspan="2" class="text-right"><h6 class="text-bold">{{VARIANCE_TOTAL_INVALID| number:2}}</h6></td>
                                <td colspan="3"></td>
                            </tr>-->
                            <tr><td colspan="11"></td></tr>
                            <tr style="background-color:gainsboro;color:#000000;">
                                <th colspan="2">Revenue Type</th>
                                <th colspan="2" class="text-right">Gross Exc. Disc.</th>
                                <th colspan="2" class="text-right">Disc.</th>
                                <th colspan="2" class="text-right">Vat</th>
                                <th colspan="3" class="text-right">Net Exc. Disc.</th>
                            </tr>
                            <tr ng-repeat="Catdata in EPOS_CAT_DATA">
                                <td colspan="2">{{Catdata.CATEGORY_NAME}}</td>
                                <td colspan="2" class="text-right">{{Catdata.TOTAL_GROSS | number:2}}</td>
                                <td colspan="2" class="text-right">{{Catdata.TOTAL_DISC_CPN | number:2}}</td>
                                <td colspan="2" class="text-right">{{Catdata.TOTAL_VAT_TAX | number:2}}</td>
                                <td colspan="3" class="text-right">{{Catdata.NET_TOTAL | number:2}}</td>
                            </tr>
                            <tr style="background-color:antiquewhite;color:dimgrey;">
                                <th colspan="2">Total ({{CURRENCYLIST[0].CODE}})</th>
                                <th colspan="2" class="text-right">{{ (EPOS_CAT_DATA | total:'TOTAL_GROSS')| number:2 }}</th>
                                <th colspan="2" class="text-right">{{ (EPOS_CAT_DATA | total:'TOTAL_DISC_CPN')| number:2 }}</th>
                                <th colspan="2" class="text-right">{{ (EPOS_CAT_DATA | total:'TOTAL_VAT_TAX')| number:2 }}</th>
                                <th colspan="3" class="text-right">{{(EPOS_CAT_DATA | total:'NET_TOTAL') | number:2}}</th>
                            </tr>
                            <tr>
                                <td colspan="2">Service Charge</td>
                                <td colspan="9" class="text-right">{{EPOS_HEADER_DATA[0].SERVICE_CHARGE| number:2}}</td>
                                <!--<td colspan="7"></td>-->

                            </tr>
                            <tr>
                                <td colspan="2">House Tips</td>
                                <td colspan="9" class="text-right">{{EPOS_HEADER_DATA[0].TIPS| number:2}}</td>
                                <!--<td colspan="7"></td>-->

                            </tr>
                            <tr><td colspan="11"></td></tr>
                            <tr style="background-color:gainsboro;color:#000000;">
                                <th colspan="2">Cash Up Items</th>
                                <th colspan="2" class="text-right">EPOS</th>
                                <th colspan="2" class="text-right">Actual</th>
                                <th colspan="2" class="text-right">Variance</th>
                                <th colspan="3"></th>
                            </tr>
                            <tr>
                                <td colspan="2">Void</td>
                                <td colspan="2" class="text-right">{{EPOS_HEADER_DATA[0].VOID | number:2}}</td>
                                <td colspan="2" class="text-right">{{ACTUAL_DATA[0].ACTUAL_VOID | number:2}}</td>
                                <td colspan="2" class="text-right">{{ACTUAL_DATA[0].ACTUAL_VOID-(EPOS_HEADER_DATA[0].VOID) | number:2}}</td>
                                <td colspan="3"></td>

                            </tr>
                            <tr>
                                <td colspan="2">Complimentary</td>
                                <td colspan="2" class="text-right">{{EPOS_HEADER_DATA[0].COMPLIMENTARY| number:2}}</td>
                                <td colspan="2" class="text-right">{{ACTUAL_DATA[0].ACTUAL_COMP | number:2}}</td>
                                <td colspan="2" class="text-right">{{ACTUAL_DATA[0].ACTUAL_COMP-(EPOS_HEADER_DATA[0].COMPLIMENTARY) | number:2}}</td>
                                <td colspan="3"></td>

                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>

    </div>

    <div class="text-center bg-light-grey p-3" ng-show="SHOW_NO_REPORT_ASSIGN">
        No Report Assign To You
    </div>
</form>
