<style>

    .ui-timepicker-container {
        z-index: 3500 !important;
    }
</style>
<div class="row">
    <div class="col-xxl-10 col-md-10 col-xl-10 ms-auto">
        <div class="right-panel">
            <div class="card">
                <div class="card-header">
                    <h6>General</h6>
                </div>
                <div class="card-header px-0 pb-0 border-0">
                    <ul class="nav nav-tabs border-tab mb-0" id="bottom-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link nav-border tab-info" ng-class="{'active':GENERAL_TAB_ID==1}" ng-click="GENERAL_TAB_CLICK_Fn(1)" id="bottom-home-tab" data-bs-toggle="tab" role="tab" aria-controls="bottom-home" aria-selected="true">
                                Basic Setup
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-border tab-info" ng-class="{'active':GENERAL_TAB_ID==2}" ng-click="GENERAL_TAB_CLICK_Fn(2)" id="bottom-home-tab" data-bs-toggle="tab" role="tab" aria-controls="bottom-home" aria-selected="true">
                                Area
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-border tab-info" ng-class="{'active':GENERAL_TAB_ID==3}" ng-click="GENERAL_TAB_CLICK_Fn(3)" id="bottom-inbox-tab" data-bs-toggle="tab" role="tab" aria-controls="bottom-inbox" aria-selected="false">
                                Session
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-border tab-info" ng-class="{'active':GENERAL_TAB_ID==4}" ng-click="GENERAL_TAB_CLICK_Fn(4)" id="bottom-contact-tab" data-bs-toggle="tab" role="tab" aria-controls="bottom-contact" aria-selected="false">
                                Notifications
                            </a>
                        </li>
                    </ul>
                </div>

                <!--BASIC SETUP-->
                <div ng-show="GENERAL_TAB_ID==1">
                    <div class="card-body">
                        <!--Sites of Cashup-->
                        <div class="row">
                            <div class="col-xxl-12 col-xl-12 col-md-12">
                                <h5 class="headings">How would you like to perform cashup?</h5>
                            </div>
                            <div class="row">
                                <div class="col-xxl-3 col-xl-3 col-md-3" ng-repeat="site in SITES_LIST">
                                    <label>{{ site.BRANCH_NAME }}</label>
                                    <ul class="nav nav-pills">
                                        <li class="dropdown w-100">
                                            <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                                <span class="select-label" id="select_label">
                                                    {{ site.CASHUP_TYPE ? site.CASHUP_TYPE : DD_DEFAULT_TEXT }}
                                                </span>
                                            </a>
                                            <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper w-auto" style="min-width:100%">
                                                <li ng-show="site.CASHUP_TYPE != DD_DEFAULT_TEXT"
                                                    ng-click="selectOption(site, '', DD_DEFAULT_TEXT)">
                                                    {{ DD_DEFAULT_TEXT }}
                                                </li>

                                                <li ng-repeat="option in selectionOptions"
                                                    ng-click="selectOption(site, option.CASHUP_TYPE_MSTR_ID, option.CASHUP_TYPE)">
                                                    <span class="truncate">{{ option.CASHUP_TYPE }}</span>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                        <div class="col-xxl-12 col-md-12 col-xl-12 text-end">
                            <button type="button" click-once class="btn btn-light" ng-disabled="SHOW_SAVE_BUTTON" ng-click="INS_UPD_CASHUP_BASIC_SETUP()">Save</button>
                        </div>

                        <hr />

                        <!--Manage Cashup Entries-->
                        <div class="row">
                            <div class="col-xxl-12 col-xl-12 col-md-12">
                                <h5 class="headings">Manage Cashup Entry</h5>
                            </div>

                            <div class="col-xxl-12 col-xl-12 col-md-12">
                                <div class="table-responsive scrollbar-wrapper mx-height-100">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th width="20%" class="border-right text-nowrap fw-bold">Tabs</th>
                                                <th class="text-center fw-bold" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                                                    {{ site.BRANCH_NAME }}
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="item in CASHUP_TABS">
                                                <td class="bg-grey">{{ item.TAB_NAME }}</td>

                                                <td class="text-center" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                                                    <div class="media-body switch-sm">
                                                        <label class="switch">
                                                            <input type="checkbox"
                                                                   ng-disabled="ENABLE_MANAGE_ENTRY_TABS || CHECK_TAB_TOGGLE_PRIVILEGE(item,site)"
                                                                   ng-model="site['ACTIVE_' + item.CASHUP_TAB_ID]"
                                                                   ng-change="MANAGE_ENTRY_TABS(item, site, site['ACTIVE_' + item.CASHUP_TAB_ID] ? 1 : 0)" />
                                                            <span class="switch-state"></span>
                                                        </label>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                            <div class="col-xxl-12 col-md-12 col-xl-12 text-end">
                                <button type="button" click-once class="btn btn-light" ng-disabled="SHOW_SAVE_BUTTON" ng-click="INS_UPD_CASHUP_MANAGE_ENTRY_TABS_Fn()">Save</button>
                            </div>
                        </div>
                        <hr />
                        <!--Card -->
                        <div class="row">
                            <div class="col-xxl-auto col-xl-auto col-md-auto">
                                <h5 class="headings mt-2">Cards Types</h5>
                            </div>
                            <div class="col-xxl-auto col-xl-auto col-md-auto">
                                <div class="alert alert-light-primary fade show">
                                    <div class="row align-items-center">
                                        <div class="col-auto txt-primary"> <i class="fa-light fa-xl fa-circle-info"></i></div>
                                        <div class="col">
                                            <p class="txt-primary">Each site can only have 6 card types activated at a time.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--Two input fields-->
                        <div class="row g-2 my-2">
                            <div class="col-xxl-2 col-md-2 col-xl-2">
                                <label>Card Type <span class="text-danger">*</span></label>
                                <input type="text" class="form-control mb-0"
                                       placeholder="Type here..."
                                       ng-model="NEW_CARD_NAME"
                                       maxlength="20"> <!--ng-change="VALIDATE_CARD_NAME()"-->
                            </div>
                            <div class="col-xxl-2 col-md-2 col-xl-2">
                                <label>Select Sites <span class="text-danger">*</span></label>
                                <ul class="nav nav-pills">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{ (SITES_LIST | filter:{IS_SELECTED:true,WILl_USE_IN_CASHUP:true}).length == (SITES_LIST | filter:{WILl_USE_IN_CASHUP:true}).length ? 'All' : (SITES_LIST | filter:{IS_SELECTED:true, WILl_USE_IN_CASHUP:true}).length }} Site(s)
                                                </span>
                                            </span>
                                        </a>
                                        <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">

                                            <li class="DontHideOnClick" ng-click="SITES_APPLY_ALL_Fn((SITES_LIST | filter:{IS_SELECTED:true}).length)">
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input"
                                                           prevent-double-click="2000"
                                                           ng-disabled="IS_EDIT_MODE"
                                                           ng-model="SiteSearch.SelectAllSites" />
                                                    <label class="form-check-label text_truncate text-nowrap">
                                                        <span class="f-w-700">All</span>
                                                    </label>
                                                </div>
                                            </li>

                                            <li class="DontHideOnClick" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true" ng-init="site.IS_SELECTED = true">
                                                <div class="form-check">
                                                    <input class="form-check-input"
                                                           id="Site-{{$index}}"
                                                           type="checkbox"
                                                           prevent-double-click="2000"
                                                           ng-model="site.IS_SELECTED"
                                                           ng-change="FILTER_Fn(site)"
                                                           checked=""
                                                           ng-disabled="IS_EDIT_MODE">
                                                    <label class="form-check-label text_truncate text-nowrap" for="Site-{{$index}}">
                                                        {{ site.BRANCH_NAME }}
                                                    </label>
                                                </div>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-xxl-auto col-md-auto col-xl-auto">
                                <div class="area-save-button">
                                    <button class="btn btn-transparent" type="button" click-once>
                                        <span><i class="fa-light fa-save txt-success" ng-click="INS_UPD_CASHUP_CARDS((SITES_LIST | filter:{IS_SELECTED : true}),NEW_CARD_NAME,3)"></i></span>
                                    </button>
                                </div>
                            </div>
                        </div>


                        <!--Site A row-->
                        <div ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                            <div class="headings mb-0 mt-4">{{ site.BRANCH_NAME }}</div>
                            <form name="CARDS_FORM" novalidate>
                                <div class="row gy-2">
                                    <div class="col-xxl-3 col-md-4 col-xl-3" ng-repeat="card in site.CARDS_LIST track by $index">
                                        <div ng-class="{'tags-editable': card.CASHUP_CARD_ID > 0 && !card.HIDE_SHOW, '': card.CASHUP_CARD_ID == 0 || !card.HIDE_SHOW}">
                                            <i class="fa-light fa-pen"
                                               ng-show="card.CASHUP_CARD_ID > 0 && !card.HIDE_SHOW"
                                               ng-click="EDIT_CARD_Fn(card, $index)" data-bs-toggle="tooltip" data-bs-title="Edit">
                                            </i>
                                            <span ng-show="card.CASHUP_CARD_ID > 0 && !card.HIDE_SHOW">
                                                {{card.CARD_NAME}}
                                            </span>

                                            <div class="media-body switch-sm" ng-show="!card.HIDE_SHOW">
                                                <label class="switch cashup-admin">
                                                    <input type="checkbox" ng-model="card.ACTIVE"
                                                           ng-change="HANDLE_ACTIVE_SWITCH_CARDS(site,card)">
                                                    <span class="switch-state cashup"></span>
                                                </label>
                                            </div>

                                            <div class="input-group" ng-show="card.HIDE_SHOW">
                                                <input type="text" class="form-control" placeholder="Enter Card Name"
                                                       maxlength="50"
                                                       ng-model="card.CARD_NAME"
                                                       ng-class="{'error': CARDS_FORM.Error}"> <!--ng-blur="EDIT_CARD_Fn(card, $index)"-->
                                                <button click-once class="btn btn-transparent" ng-click="INS_UPD_CASHUP_CARDS(site,card, 1)">
                                                    <span><i class="fa-light fa-save"></i></span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xxl-3 col-md-4 col-xl-3">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Enter New Card Name"
                                                   ng-model="site.NEW_CARD_NAME"
                                                   ng-disabled="site.isCardInputDisabled"
                                                   ng-class="{'error': CARDS_FORM.Error}"> <!--ng-change="VALIDATE_CARD_NAME()"-->
                                            <button click-once class="btn btn-transparent" ng-click="INS_UPD_CASHUP_CARDS(site,site.NEW_CARD_NAME,2)" ng-disabled="site.isCardInputDisabled">
                                                <span><i class="fa-light fa-save"></i></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <hr />



                        <!--Payment Methods -->
                        <div class="row">
                            <div class="col-xxl-auto col-xl-auto col-md-auto">
                                <h5 class="headings mt-2">Payment Methods</h5>
                            </div>
                            <div class="col-xxl-auto col-xl-auto col-md-auto">
                                <div class="alert alert-light-primary fade show">
                                    <div class="row align-items-center">
                                        <div class="col-auto txt-primary"> <i class="fa-light fa-xl fa-circle-info"></i></div>
                                        <div class="col">
                                            <p class="txt-primary">Each site can only have 15 payment methods activated at a time.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Two input fields-->
                        <div class="row g-2 my-2">
                            <div class="col-xxl-2 col-md-2 col-xl-2">
                                <label>Payment Methods <span class="text-danger">*</span></label>
                                <input type="text" class="form-control mb-0"
                                       placeholder="Type here..."
                                       ng-model="NEW_METHOD_NAME"
                                       maxlength="20"
                                       ng-keypress="handleKeyPress($event, site, 'name')">
                            </div>
                            <div class="col-xxl-2 col-md-2 col-xl-2">
                                <label>Select Sites <span class="text-danger">*</span></label>
                                <ul class="nav nav-pills">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{ (SITES_LIST | filter:{IS_SELECTED:true,WILl_USE_IN_CASHUP:true}).length == (SITES_LIST | filter:{WILl_USE_IN_CASHUP:true}).length ? 'All' : (SITES_LIST | filter:{IS_SELECTED:true, WILl_USE_IN_CASHUP:true}).length }} Site(s)
                                                </span>
                                            </span>
                                        </a>
                                        <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">

                                            <li class="DontHideOnClick" ng-click="SITES_APPLY_ALL_Fn((SITES_LIST | filter:{IS_SELECTED:true}).length)">
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input"
                                                           prevent-double-click="2000"
                                                           ng-disabled="IS_EDIT_MODE"
                                                           ng-model="SiteSearch.SelectAllSites" />
                                                    <label class="form-check-label text_truncate text-nowrap">
                                                        <span class="f-w-700">All</span>
                                                    </label>
                                                </div>
                                            </li>

                                            <li class="DontHideOnClick" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true" ng-init="site.IS_SELECTED = true">
                                                <div class="form-check">
                                                    <input class="form-check-input"
                                                           id="Site-{{$index}}"
                                                           type="checkbox"
                                                           prevent-double-click="2000"
                                                           ng-model="site.IS_SELECTED"
                                                           ng-change="FILTER_Fn(site)"
                                                           checked=""
                                                           ng-disabled="IS_EDIT_MODE">
                                                    <label class="form-check-label text_truncate text-nowrap" for="Site-{{$index}}">
                                                        {{ site.BRANCH_NAME }}
                                                    </label>
                                                </div>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-xxl-auto col-md-auto col-xl-auto">
                                <div class="area-save-button">
                                    <button click-once class="btn btn-transparent" type="button">
                                        <span><i class="fa-light fa-save txt-success" ng-click="INS_UPD_MODE_OF_PAYMENTS((SITES_LIST | filter:{IS_SELECTED : true}),NEW_METHOD_NAME,1)"></i></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!--Site A row-->
                        <div ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                            <div class="headings mb-0 mt-4">{{ site.BRANCH_NAME }}</div>
                            <form name="METHOD_FORM" novalidate>
                                <div class="row gy-2">
                                    <div class="col-xxl-3 col-md-4 col-xl-3" ng-repeat="_method in site.PAYMENT_METHODS track by $index">
                                        <div ng-class="{'tags-editable': _method.MODE_OF_PAYMENT_ID > 0 && !_method.HIDE_SHOW, '': _method.MODE_OF_PAYMENT_ID == 0 || !_method.HIDE_SHOW}">
                                            <i class="fa-light fa-pen"
                                               ng-show="_method.MODE_OF_PAYMENT_ID > 0 && !_method.HIDE_SHOW"
                                               ng-click="EDIT_METHOD_Fn(_method, $index)" data-bs-toggle="tooltip" data-bs-title="Edit">
                                            </i>
                                            <span ng-show="_method.MODE_OF_PAYMENT_ID > 0 && !_method.HIDE_SHOW">
                                                {{_method.METHOD_NAME}}
                                            </span>

                                            <div class="media-body switch-sm" ng-show="!_method.HIDE_SHOW">
                                                <label class="switch cashup-admin">
                                                    <input type="checkbox"
                                                           ng-model="_method.ACTIVE"
                                                           ng-change="HANDLE_ACTIVE_SWITCH_METHODS(site,_method)">
                                                    <span class="switch-state cashup"></span>
                                                </label>
                                            </div>

                                            <div class="input-group" ng-show="_method.HIDE_SHOW">
                                                <input type="text" class="form-control" placeholder="Enter Payment Method"
                                                       maxlength="50"
                                                       ng-model="_method.METHOD_NAME"
                                                       ng-class="{'error': METHOD_FORM.Error}">
                                                <!--ng-pattern="^[^0-9]*$" use this in case of any error above ng-pattern="/^[^0-9]*$/"-->
                                                <button click-once class="btn btn-transparent" ng-click="INS_UPD_MODE_OF_PAYMENTS(site,_method,2)">
                                                    <span><i class="fa-light fa-save"></i></span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xxl-3 col-md-4 col-xl-3">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Enter Payment Method"
                                                   ng-model="site.NEW_METHOD_NAME"
                                                   ng-disabled="site.ismethodInputDisabled"
                                                   ng-class="{'error': METHOD_FORM.Error}">
                                            <button click-once class="btn btn-transparent" ng-click="INS_UPD_MODE_OF_PAYMENTS(site,site.NEW_METHOD_NAME,3)" ng-disabled="site.ismethodInputDisabled">
                                                <span><i class="fa-light fa-save"></i></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!--AREA-->
                <div ng-show="GENERAL_TAB_ID==2">
                    <div class="card-body">
                        <div class="col-xxl-12 col-xl-12 col-md-12" ng-repeat="site in SITES_LIST" ng-show="site.CASHUP_TYPE_MSTR_ID == 1 || site.CASHUP_TYPE_MSTR_ID == 3">
                            <h5 class="headings">{{ site.BRANCH_NAME }}</h5>

                            <div class="row g-2">
                                <div class="col-xxl-3 col-md-3 col-xl-3">
                                    <label>Area Name <span class="text-danger">*</span></label>
                                    <div class="input-group mb-3 AddCustomScroll_Contact">
                                        <input type="text" class="form-control mb-0"
                                               placeholder="Type here..."
                                               ng-model="site.newArea.name"
                                               ng-change="filterSuggestions(site)"
                                               maxlength="100"
                                               uib-typeahead="suggestion as suggestion for suggestion in site.filteredSuggestions | filter:$viewValue"
                                               typeahead-loading="loading"
                                               typeahead-no-results="noResults"
                                               ng-keypress="handleKeyPress($event, site, 'name')"
                                               ng-mouseover="SET_DROPSCROLL();"
                                               autocomplete="off"
                                               typeahead-focus-first="false"
                                               typeahead-focus-trigger>
                                    </div>
                                </div>

                                <div class="col-xxl-3 col-md-3 col-xl-3">
                                    <label>Seating Capacity <span class="text-danger">*</span></label>
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control mb-0" placeholder="Type here..."
                                               ng-model="site.newArea.capacity" max="999" min="1"
                                               id="seating-{{ site.BRANCH_ID }}" required
                                               ng-keypress="handleKeyPress($event, site, 'capacity')">
                                    </div>
                                </div>
                                <div class="col-xxl-auto col-md-auto col-xl-auto">
                                    <div class="area-save-button">
                                        <button click-once class="btn btn-transparent" type="button" id="save-{{ site.BRANCH_ID }}" ng-click="ADD_AREA_Fn(site)">
                                            <span><i class="fa-light fa-save txt-success"></i></span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Existing Areas List -->
                            <div class="row mb-3 g-2">
                                <div class="col-xxl-3 col-xl-3 col-md-3" ng-repeat="area in site.areaList">
                                    <div class="tags-editable cashup-area">
                                        <i class="fa-light fa-pen" data-bs-toggle="tooltip" data-bs-title="Edit"
                                           ng-click="EDIT_AREA_Fn(site, area)"></i>
                                        <span class="admin-area">{{ area.AREA_NAME }}</span>
                                        <span class="admin-capacity">{{ area.SEATING_CAPACITY }}</span>
                                        <i class="fa-light fa-trash-can" ng-click="DELETE_AREA_Fn(site, area)"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--SESSION-->
                <div ng-show="GENERAL_TAB_ID==3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-xxl-3 col-md-3 col-xl-3">
                                <h5 class="headings">Sessions</h5>
                                <ul class="nav nav-pills">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{SELECTED_BRANCH.BRANCH_NAME||'Site'}}
                                                </span>
                                            </span>
                                        </a>
                                        <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper w-auto" style="min-width:100%">
                                            <li ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true" ng-click="EDIT_SESSION(site)">
                                                {{ site.BRANCH_NAME }}
                                            </li>
                                        </ul>
                                    </li>
                                </ul>

                                <!--<ul class="nav nav-pills">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{ (SITES_LIST | filter:{IS_SELECTED:true,WILl_USE_IN_CASHUP:true}).length == (SITES_LIST | filter:{WILl_USE_IN_CASHUP:true}).length ? 'All' : (SITES_LIST | filter:{IS_SELECTED:true, WILl_USE_IN_CASHUP:true}).length }} Site(s)
                                                </span>
                                            </span>
                                        </a>
                                        <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">

                                            <li class="DontHideOnClick" ng-click="SITES_APPLY_ALL_Fn((SITES_LIST | filter:{IS_SELECTED:true}).length)">
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input"
                                                           prevent-double-click="2000"
                                                           ng-disabled="IS_EDIT_MODE"
                                                           ng-model="SiteSearch.SelectAllSites" />
                                                    <label class="form-check-label text_truncate text-nowrap">
                                                        <span class="f-w-700">All</span>
                                                    </label>
                                                </div>
                                            </li>

                                            <li class="DontHideOnClick" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true" ng-init="site.IS_SELECTED = false">
                                                <div class="form-check">
                                                    <input class="form-check-input"
                                                           id="Site-{{$index}}"
                                                           type="checkbox"
                                                           prevent-double-click="2000"
                                                           ng-model="site.IS_SELECTED"
                                                           ng-change="FILTER_Fn(site,1)"
                                                           checked=""
                                                           ng-disabled="IS_EDIT_MODE">
                                                    <label class="form-check-label text_truncate text-nowrap" for="Site-{{$index}}">
                                                        {{ site.BRANCH_NAME }}
                                                    </label>
                                                </div>
                                            </li>

                                        </ul>
                                    </li>
                                </ul>-->
                            </div>

                            <div class="table-responsive scrollbar-wrapper mx-height-100">
                                <table>
                                    <thead>
                                        <tr>
                                            <th class="text-center border-right">Active</th>
                                            <th class="text-center text-nowrap border-right">Session Name</th>
                                            <th class="text-center text-nowrap border-right">Start Time</th>
                                            <th class="text-center text-nowrap border-right">End Time</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="session in SESSION_DETAILS | orderBy:['SESSION_MASTER_ID']">
                                            <td class="text-center">
                                                <div class="media-body switch-sm">
                                                    <label class="switch">
                                                        <input type="checkbox" data-bs-toggle="modal" ng-disabled="session.SESSION_DISABLED" ng-model="session.ACTIVE" ng-change="HANDLE_ACTIVE_CHANGE_Fn(session)">

                                                        <span class="switch-state"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                {{ session.SESSION_NAME }}
                                            </td>
                                            <td class="text-center">
                                                <div class="input_time date_time">
                                                    <input type="text"
                                                           name="Start_Time"
                                                           autocomplete="off"
                                                           moment-picker="session.SESSION_START"
                                                           onkeypress="return event.charCode >= 48 && event.charCode <= 58"
                                                           format="HH:mm"
                                                           locale="{{LANGUAGE_SYMBOL}}"
                                                           ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/"
                                                           ng-model="session.SESSION_START"
                                                           ng-model-options="{ updateOn: 'blur' }"
                                                           class="form-control py-2"
                                                           placeholder="HH : MM"
                                                           ng-blur="UPDATE_END_TIMES(session)"
                                                           show-header="0"
                                                           required />
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                <div class="input_time date_time">
                                                    <input type="text" ng-disabled="true" format="HH:mm" name="End_Time" ng-model="session.SESSION_END" class="timepicker mb-0" placeholder="HH : MM" readonly>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="col-xxl-12 col-md-12 col-xl-12">
                                <button click-once class="btn btn-outline w-100" ng-click="REQUEST_SESSION()"><i class="fa-light fa-plus"></i> Request Session</button>
                            </div>
                            <div class="col-xxl-12 col-md-12 col-xl-12 text-end">
                                <button click-once type="button" class="btn btn-light mt-3" ng-click="SAVE_SESSIONS(SESSION_DETAILS)">Save</button>
                            </div>

                        </div>

                        <hr />

                        <div class="row">
                            <div class="col-xxl-12 col-xl-12 col-md-12">
                                <h5 class="headings">Existing Sessions</h5>
                                <div class="table-responsive scrollbar-wrapper mx-height-100">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Site</th>
                                                <th ng-repeat="session in SESSION_LIST">{{session.SESSION_NAME}}</th>
                                                <th class="text-center">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                                                <td>{{site.BRANCH_NAME}}</td>
                                                <td ng-repeat="session in SESSION_LIST">
                                                    {{ (site.SESSION_LIST | filter :{SESSION_MASTER_ID:session.SESSION_MASTER_ID}:true).length>0?((site.SESSION_LIST | filter :{SESSION_MASTER_ID:session.SESSION_MASTER_ID}:true)[0].SESSION_START +'-'+(site.SESSION_LIST | filter :{SESSION_MASTER_ID:session.SESSION_MASTER_ID}:true)[0].SESSION_END):'-' }}
                                                </td>
                                                <td class="text-center">
                                                    <i class="fa-light fa-pen c-pointer" data-bs-toggle="tooltip" data-bs-title="Edit" ng-click="EDIT_SESSION(site)"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!--Request session-->
                    <div class="modal fade" id="request_session" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content custom-modal">
                                <div class="modal-header">
                                    <h5 class="modal-title">Request New Session</h5>
                                    <button class="btn-close py-0" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body resCashupHeader">
                                    <div class="row">
                                        <div class="col-xxl-3 col-md-3 col-xl-3">
                                            <h5 class="headings">Sessions</h5>
                                            <ul class="nav nav-pills">
                                                <li class="dropdown w-100">
                                                    <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                                        <span class="select-label" id="select_label">
                                                            <span class="truncate">{{ selectedSite }}</span>
                                                        </span>
                                                    </a>
                                                    <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">
                                                        <li class="DontHideOnClick" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true" ng-click="SELECT_SITE_FOR_NEW_SESSION(site.BRANCH_ID)">
                                                            <span class="truncate">{{ site.BRANCH_NAME }}</span>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>

                                        </div>

                                        <div class="table-responsive scrollbar-wrapper mx-height-100">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th class="text-center text-nowrap   border-right">Sessions Name</th>
                                                        <th class="text-center text-nowrap   border-right">Start Time</th>
                                                        <th class="text-center text-nowrap   border-right">End Time</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td class="text-center"><input type="text" ng-model="NewSession.SESSION_NAME" class="mb-0" placeholder="Add here"></td>
                                                        <td class="text-center">
                                                            <div class="input_time date_time">
                                                                <input type="text" ng-model="NewSession.START_TIME" name="Start_Time" class="timepicker mb-0" placeholder="HH : MM">
                                                            </div>
                                                        </td>
                                                        <td class="text-center">
                                                            <div class="input_time date_time">
                                                                <input type="text" name="End_Time" ng-model="NewSession.END_TIME" class="timepicker mb-0" placeholder="HH : MM">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <div class="modal-footer">

                                    <button click-once class="btn btn-primary" ng-click="SUBMIT_SESSION(NewSession)">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Request session-->


                </div>

                <div ng-show="GENERAL_TAB_ID==4">
                    <div class="card-body">
                        <!--Notifications-->
                        <div class="row">
                            <h5 class="headings">Notifications</h5>

                            <div class="col-xxl-4 col-xl-4 col-md-4" ng-repeat="_notification in NOTIFICATIONS_MASTER_LIST" ng-init="nginit_notification(_notification)">
                                <div class="media form-control">
                                    <label class="col-form-label">{{_notification.NOTIFICATION_NAME}}</label>
                                    <div class="media-body switch-sm ms-auto">
                                        <label class="switch">
                                            <input type="checkbox"
                                                   name="ACTIVE{{$index}}"
                                                   ng-checked="_notification.ACTIVE"
                                                   ng-model="_notification.ACTIVE"
                                                   ng-change="SET_NOTIFICATION(_notification)">
                                            <span class="switch-state"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xxl-12 col-md-12 col-xl-12 text-end">
                                <button click-once type="button" class="btn btn-light" ng-click="INS_UPD_CUSTOMERS_NOTIFICATIONS()">Save</button>
                            </div>

                        </div>
                        <hr />
                        <!--MAIL LOG-->
                        <div class="row g-2">
                            <div class="col-xxl-12 col-md-12 col-xl-12">
                                <h5 class="headings">Mail Log</h5>
                            </div>
                            <div class="col-xxl-3 col-md-3 col-xl-3">
                                <input type="text" name="search" placeholder="Search by Email.." ng-model="NOTIFICATION_SEARCH.SEARCH_TEXT" ng-change="GET_CASHUP_SETTING_MAIL_LOG()">
                            </div>
                            <div class="col-xxl-2 col-xl-2 col-md-2 ms-auto">
                                <div id="reportrange" class="form-control-box">
                                    <span></span>
                                    <i class="fa-regular fa-calendar float-end mt-1"></i>
                                </div>
                            </div>
                            <div class="col-xxl-auto col-md-auto col-xl-auto">
                                <ul class="nav nav-pills min-w-100">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer"
                                           data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                Status
                                            </span>
                                        </a>
                                        <ul ID="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">
                                            <li class="DontHideOnClick">
                                                <span class="truncate">Send</span>
                                            </li>
                                            <li class="DontHideOnClick">
                                                <span class="truncate">Unsend</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-xxl-2 col-xl-2 col-md-2">
                                <ul class="nav nav-pills mb-1">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer"
                                           data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{NOTIFICATION_SEARCH.SELECTED_SITE.BRANCH_NAME || 'Branch'}}
                                                </span>
                                            </span>
                                        </a>
                                        <ul ID="divNewNotifications" class="dropdown-menu scrollbar-wrapper w-auto" style="min-width:100%">
                                            <li ng-click="SELECT_SITE_FOR_NOTIFICATION()">
                                                Choose
                                            </li>
                                            <li ng-repeat="_site in SITES_LIST"
                                                ng-click="SELECT_SITE_FOR_NOTIFICATION(_site)">
                                                <span class="truncate">{{ _site.BRANCH_NAME}}</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-xxl-2 col-xl-2 col-md-2">
                                <ul class="nav nav-pills mb-1">
                                    <li class="dropdown w-100">
                                        <a class="text-limitations cursor-pointer"
                                           data-toggle="dropdown">
                                            <span class="select-label" id="select_label">
                                                <span class="truncate">
                                                    {{NOTIFICATION_SEARCH.NOTIFICATION_TYPE.NOTIFICATION_NAME || 'Notification Type'}}
                                                </span>
                                            </span>
                                        </a>
                                        <ul ID="divNewNotifications" class="dropdown-menu scrollbar-wrapper w-auto" style="min-width:100%">
                                            <li ng-click="SELECT_TYPE_FOR_NOTIFICATION()">
                                                Choose
                                            </li>
                                            <li ng-repeat="_notification_type in NOTIFICATIONS_MASTER_LIST"
                                                ng-click="SELECT_TYPE_FOR_NOTIFICATION(_notification_type)">
                                                <span class="truncate">{{ _notification_type.NOTIFICATION_NAME}}</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-xxl-12 col-xl-12 col-md-12" ng-show="NOTIFICATION_MAIL_LOG_LIST.length == 0">
                                <div class="no-record text-center">
                                    <span class="d-block text-center">{{LOAD_FETCH_TEXT}}</span>
                                </div>
                            </div>

                            <div class="table-responsive scrollbar-wrapper" ng-show="NOTIFICATION_MAIL_LOG_LIST.length>0">
                                <table>
                                    <thead class="table-sticky-top">
                                        <tr>

                                            <th class="text-nowrap">Email Subject</th>
                                            <th class="text-nowrap">Notification Type</th>
                                            <th class="text-nowrap">Sent to</th>
                                            <th class="text-nowrap">Delivery Time</th>
                                            <th class="text-center">Status</th>
                                            <th class="text-center">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="ROW in NOTIFICATION_MAIL_LOG_LIST">
                                            <td class="text-nowrap">{{ROW.EMAIL_SUBJECT}}</td>
                                            <td class="text-nowrap">{{ROW.TYPE}}</td>
                                            <td class="text-nowrap">{{ROW.SENT_TO}}</td>
                                            <td class="text-nowrap">{{ROW.DELIVERY_TIME}}</td>
                                            <td class="text-center">
                                                <span>{{ROW.STATUS}}</span>
                                                <!--<span class="badge-lg badge-light-success">Sent</span>-->
                                            </td>
                                            <td class="text-center">
                                                <div class="dropstart">
                                                    <button class="btn" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa-light fa-ellipsis"></i></button>
                                                    <ul class="dropdown-menu">
                                                        <li class="dropdown-item"><a class="text-dark d-block" ng-click="RESEND_NOTIFICATION(ROW.SYSTEM_NOTIFICATION_ID)"><i class="fa-light fa-paper-plane me-2"></i> Resend</a></li>
                                                        <li class="dropdown-item"><a class="text-dark d-block" ng-click="SHOW_ERROR(ROW)"><i class="fa-light fa-circle-exclamation me-2"></i> View Error</a></li>
                                                        <!--<li class="dropdown-item"><a class="text-dark d-block"><i class="fa-light fa-eye me-2"></i> Preview</a></li>-->
                                                    </ul>
                                                </div>
                                            </td>

                                        </tr>
                                    </tbody>
                                    <tfoot class="t_foot_fixed" ng-show="GetData">
                                        <tr>

                                            <td colspan="6" class="text-center">
                                                <button type="button" class="btn btn-sm btn-light btn_fixed" ng-click="GET_CASHUP_SETTING_MAIL_LOG(1)">Load More...</button>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="perform-cashup" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content custom-modal">
            <div class="modal-header">
                <h5 class="modal-title">How would you like to perform cashup?</h5>
                <button class="btn-close py-0" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xxl-3 col-xl-3 col-md-3" ng-repeat="site in SITES_LIST" ng-show="site.WILl_USE_IN_CASHUP == true">
                        <label>{{ site.BRANCH_NAME }}</label>
                        <ul class="nav nav-pills">
                            <li class="dropdown w-100">
                                <a class="text-limitations cursor-pointer" data-toggle="dropdown">
                                    <span class="select-label" id="select_label">
                                        <!-- If site.CASHUP_TYPE exists, display it, otherwise show "Please Select" -->
                                        {{ site.CASHUP_TYPE ? site.CASHUP_TYPE : 'Please Select' }}
                                    </span>
                                </a>
                                <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-auto" style="min-width:100%">
                                    <li class="DontHideOnClick" ng-show="OptionSelected" ng-repeat="option in selectionOptions">
                                        <!-- Display all options from selectionOptions -->
                                        <span class="truncate" ng-click="selectOption(site, option.CASHUP_TYPE_MSTR_ID, option.CASHUP_TYPE)">
                                            {{ option.CASHUP_TYPE }}
                                        </span>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
                <button class="btn btn-primary" data-bs-dismiss="modal">Proceed to Setup</button>
            </div>
        </div>
    </div>
</div>

<!--Session setup Starts Modal-->
<div class="modal fade" id="session_setup" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" data-bs-original-title="" title=""></button>
            </div>
            <div class="modal-body">
                <div class="modal-toggle-wrapper">
                    <div class="d-flex justify-content-center">
                        <div class="tickIcon_danger">
                            <div class="badge text-bg-danger-modal">
                                <i class="fa-solid fa-exclamation fa-xl"></i>
                            </div>
                        </div>
                    </div>
                    <h6 class="text-center pb-2 f-w-600">The session setup is incomplete!</h6>
                    <p class="text-center txt-dark-gray mb-0">{{VALIDATION_MSG}}</p>
                </div>
            </div>
            <div class="modal-footer border-0">
                <div class="row w-100">
                    <div class="col-xxl-6 col-md-6 col-md-6">
                        <button class="btn btn-light w-100" type="button" data-bs-dismiss="modal">Cancel</button>
                    </div>
                    <div class="col-xxl-6 col-md-6 col-md-6">
                        <button class="btn btn-primary w-100" type="button" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#redeem">Complete Session</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Session setup Ends Modal-->


<div class="modal fade ng-scope show" tabindex="-1" id="Preview" role="dialog" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myExtraLargeModal">New Team Member</h4>
                <button class="btn-close py-0" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xxl-12 col-md-12 col-xl-12">
                        <label>Subject</label>
                        <div class="form-control py-2">
                            A new member has joined your team!
                        </div>
                    </div>
                </div>
                <div class="col-xxl-12 col-md-12 col-xl-12">
                    <label>Message</label>
                    <div class="form-control py-2">
                        Hi,
                        <br><br>
                        Malik Wihowo has joined your team on 28 June 2024. Please join us in welcoming him to {EntityName}.
                        <br><br>
                        Regards,
                        <br>
                        HR Manager
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="notification_error" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="table_heading">Error</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ng-click="NOTIFICATION_ERROR=null"></button>
            </div>
            <div class="modal-body resTextAreaCashup">
                <textarea rows="5" class="mb-0"
                          ng-model="NOTIFICATION_ERROR"
                          disabled></textarea>
            </div>
        </div>
    </div>
</div>


<div class="overlay_loadingNew" style="display:none" id="loader"><div class="loader-index"> <span></span></div></div>
<script type="text/javascript">
    $(document).ready(function (e) {
        $('.timepicker').timepicker({
            interval: 30,
        });
    });
</script>


