<div class="row py-3" ng-show="MyLeaveFormSearch.EMPLY_PRSNL_ID>0">
    <div class="col-xxl-auto col-xl-auto col-md-auto" ng-click="LEAVE_TAB_Fn(1)">
        <a class="btn-tabs" ng-class="{'active':LEAVE_TAB==1}">My Leave</a>
    </div>
    <div class="col-xxl-auto col-xl-auto col-md-auto" ng-hide="CheckStandardRoleAccess(5) || CheckStandardRoleAccess(10) || CheckStandardRoleAccess(15) " ng-click="LEAVE_TAB_Fn(2)">
        <a class="btn-tabs " ng-class="{'active':LEAVE_TAB==2}">Team Leave</a>
    </div>
</div>
<!--FIRST CARD-->
<div class="row " ng-show="LEAVE_TAB==1">
    <!--Left Card-->
    <div class="col-xxl-3 col-xl-3 col-md-3 d-flex">
        <div class="card flex-fill">
            <!--Card Header-->
            <div class="card-header">
                <h5>Holidays Details</h5>
                <div class="card-header-right-icon" ng-click="scrollToSection('LEAVE_HISTORY_TAB_1')">
                    <i class="fa-regular fa-arrow-up-right" data-bs-toggle="tooltip" data-bs-title="Show leave history"></i>
                </div>
            </div>
            <!--Card Body-->
            <div class="card-body scrollbar-wrapper mx-height-leaves-accordion">
                <div class="accordion" id="outlineaccordionfour">
                    <div class="accordion-item" ng-repeat="_absenceCount in EMPLOYEE_ABSENCES_COUNT_LIST"
                         on-finish-render="ngRepeatFinishedBranchRender" ng-init="nginit_absencecount(_absenceCount)">
                        <h2 class="accordion-header c-pointer" ng-click="_absenceCount.SHOW_HIDE=!_absenceCount.SHOW_HIDE">
                            <span class="accordion-button" ng-class="{'collapsed':_absenceCount.SHOW_HIDE}">
                                {{_absenceCount.HOLIDAY_ENTITLEMENT_PLAN}}
                                <span class="ms-auto"><span class="badge badge-white"> {{_absenceCount.UNIT_NAME}}</span></span>
                            </span>

                        </h2>
                        <div class="accordion-collapse collapse " ng-class="{'show':_absenceCount.SHOW_HIDE}">
                            <div class="accordion-body">
                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 ">
                                    <div>Total Allowance</div>
                                    <div class="">{{_absenceCount.ANNUAL_ALLOWANCE + _absenceCount.ADJUSTMENT  | number:2}} </div>
                                </div>
                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div>Accrued</div>
                                    <div class="">{{_absenceCount.CALCULATED_ACCRUED | number:2}} </div>
                                </div>
                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div>Taken till date</div>
                                    <div class="">{{_absenceCount.TAKEN | number:2}} </div>
                                </div>
                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div class="">Available till date</div>
                                    <div class="">{{_absenceCount.AVAILABLE_TILL_DATE | number:2}} </div>
                                </div>

                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div>Future Approved</div>
                                    <div class="">{{_absenceCount.BOOKED_APPROVED | number:2}} </div>
                                </div>
                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div>Future Pending</div>
                                    <div class="">{{_absenceCount.BOOKED_PENDING | number:2}} </div>
                                </div>

                                <div class="d-flex justify-content-between border border-light-secondary p-2 rounded-3 my-3">
                                    <div>Balance</div>
                                    <div class="">{{_absenceCount.REMAINING_BALANCE | number:2}} </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Right Card-->
    <div class="col-xxl-9 col-xl-9 col-md-9">
        <div class="card">
            <!--Card Header-->
            <div class="card-header ">
                <h5>Leave Request</h5>
                <div class="card-header-right-icon d-none">
                    <i class="fa-regular fa-arrow-up-right"></i>
                </div>
            </div>
            <!--Card Body-->
            <div class="card-body">
                <form name="MyLeaveForm" novalidate>
                    <div class="row">
                        <div class="col-xxl col-xl col-md">
                            <label>Absence Type <span class="txt-danger">*</span></label>
                            <input type="hidden"
                                   name="ABSENCE_TYPE_ID"
                                   placeholder="Add Here"
                                   required
                                   ng-model="MyLeaveFormSearch.ABSENCE_TYPE_ID" />
                            <ul class="nav nav-pills" ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.ABSENCE_TYPE_ID.$error.required}">
                                <li class="dropdown w-100 show">
                                    <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                        <span class="select-label" id="select_label">
                                            {{MyLeaveFormSearch.CUSTOM_ABSENCE_TYPE_NAME}}
                                        </span>
                                    </a>
                                    <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                        <li class=""
                                            ng-show="MyLeaveFormSearch.DD_DEFAULT_TEXT!=MyLeaveFormSearch.CUSTOM_ABSENCE_TYPE_NAME"
                                            ng-click="SELECTED_ABSENCE_TYPE_Fn('')">{{MyLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                                        <li class=""
                                            ng-click="SELECTED_ABSENCE_TYPE_Fn(_absence)"
                                            ng-repeat="_absence in SELF_ABSENCE_TYPES_FOR_EMPLOYEE_LEAVE_LIST">
                                            <span class="">{{_absence.ABSENCE_TYPE}}</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="col-xxl-auto col-xl-auto col-md-auto">
                            <label class="d-block">&nbsp</label>
                            <div class=" text-info">
                                <button class="btn btn-outline txt-primary w-100 text-nowrap"
                                        ng-click="VIEW_WORK_PATTERN(1)"
                                        data-bs-toggle="modal">
                                    <i class="fa-light fa-code-branch me-1"></i>
                                    View Work Pattern
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <label>Start Date <span class="txt-danger">*</span></label>
                            <div class="date-column">
                                <input type="text"
                                       class="MyStartLeave"
                                       name="MY_START_DATE"
                                       placeholder="Select Date"
                                       autocomplete="off"
                                       readonly
                                       ng-disabled="MyLeaveFormSearch.ABSENCE_TYPE_ID==0 || MyLeaveFormSearch.ABSENCE_TYPE_ID==null"
                                       ng-model="MyLeaveFormSearch.START_DATE"
                                       ng-value="MyLeaveFormSearch.START_DATE | date:DISPLAY_DATE_FORMAT"
                                       required
                                       ng-change="SetStartCompleteDateMy(MyLeaveFormSearch.START_TIME, MyLeaveFormSearch.START_DATE, 1)"
                                       ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.START_DATE.$error.required}" />
                                <i class="date-icon fa-light fa-calendar"></i>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <label>End Date <span class="txt-danger">*</span></label>
                            <div class="date-column">
                                <input type="text"
                                       class="MyEndLeave"
                                       name="MY_END_DATE"
                                       autocomplete="off"
                                       placeholder="Select Date"
                                       readonly
                                       ng-disabled="MyLeaveFormSearch.ABSENCE_TYPE_ID==0 || MyLeaveFormSearch.ABSENCE_TYPE_ID==null"
                                       ng-model="MyLeaveFormSearch.END_DATE"
                                       ng-value="MyLeaveFormSearch.END_DATE | date:DISPLAY_DATE_FORMAT"
                                       ng-change="SetEndCompleteDateMy(MyLeaveFormSearch.START_TIME, MyLeaveFormSearch.START_DATE, 2)"
                                       required
                                       ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.END_DATE.$error.required}" />
                                <i class="date-icon fa-light fa-calendar"></i>
                            </div>
                        </div>
                        <!--Two input fields of next page-->
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <label>Start Time</label>
                            <div class="date-column">
                                <input class="form-control py-2"
                                       moment-picker="MyLeaveFormSearch.START_TIME"
                                       onkeypress="return event.charCode >= 48 && event.charCode <= 58"
                                       placeholder="Select time"
                                       maxlength="5"
                                       format="HH:mm"
                                       name="START_TIME"
                                       ng-disabled="MyLeaveFormSearch.ABSENCE_TYPE_ID==0 || MyLeaveFormSearch.ABSENCE_TYPE_ID==null"
                                       locale="{{LANGUAGE_SYMBOL}}"
                                       autocomplete="off"
                                       ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/"
                                       ng-model="MyLeaveFormSearch.START_TIME"
                                       ng-model-options="{ updateOn: 'blur' }"
                                       show-header="0"
                                       ng-blur="ngstarttimechange()"
                                       change="SET_MOMENT_START_TIME_COMPLETE_DATE(3)"
                                       ng-required="MyLeaveFormSearch.START_TIME_VALID"
                                       ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.START_TIME.$error.required || !START_DATE_REQUIRED_VALID}">
                                <i class="date-icon fa-light fa-clock"></i>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <label>End Time</label>
                            <div class="date-column">
                                <input class="form-control py-2"
                                       moment-picker="MyLeaveFormSearch.END_TIME"
                                       onkeypress="return event.charCode >= 48 && event.charCode <= 58"
                                       maxlength="5"
                                       show-header="0"
                                       placeholder="Select time"
                                       format="HH:mm"
                                       name="END_TIME"
                                       ng-model="MyLeaveFormSearch.END_TIME"
                                       autocomplete="off"
                                       ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/"
                                       ng-blur="ngendtimechange()"
                                       ng-model-options="{ updateOn: 'blur' }"
                                       change="SET_MOMENT_END_TIME_COMPLETE_DATE(4)"
                                       ng-disabled="MyLeaveFormSearch.ABSENCE_TYPE_ID==0 || MyLeaveFormSearch.ABSENCE_TYPE_ID==null"
                                       ng-required="MyLeaveFormSearch.END_TIME_VALID"
                                       ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.END_TIME.$error.required || !END_DATE_VALID || !END_DATE_REQUIRED_VALID}">
                                <i class="date-icon fa-light fa-clock"></i>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xl-6 col-md-6">
                            <label>Add Attachment</label>
                            <div class="col-xxl-12 col-md-12 col-xl-12">
                                <div class="form-group file-area">
                                    <input id="MY_LEAVE"
                                           ng-files="getTheFilesToUpload($files,'MY_LEAVE',0.5,MyLeaveFormSearch,50,1,'',3)"
                                           name="file"
                                           type="file" />

                                    <div class="file-dummy">
                                        <i class="fa-light fa-file-plus fa-xl txt-primary"></i>
                                        <p class="mt-2 mb-0">Only JPEG, PNG and PDF files with max size 500KB</p>
                                    </div>
                                </div>
                                <span class="border b-r-5 w-100 p-2 mb-2 d-flex align-items-center" ng-repeat="File in MyLeaveFormSearch.UploadedFiles">
                                    <a class="f-11 truncate" href="{{File.FILE_PATH}}{{File.SERVER_FILE_NAME}}"
                                       download="download">
                                        <i class="fa fa-download"></i> {{File.ORIGINAL_FILE_NAME}}
                                    </a>
                                    <i ng-click="DELETE_TEAM_FILE_UPLOAD_Fn(MyLeaveFormSearch,File,$index)" class="fa-light fa-lg fa-xmark txt-danger ms-auto c-pointer"></i>
                                </span>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xl-6 col-md-6">
                            <label>Reason</label>
                            <textarea rows="3"
                                      placeholder="Enter Reason"
                                      ng-model="MyLeaveFormSearch.REASON"
                                      maxlength="500"
                                      class="mb-0"></textarea>
                            <span class="float-end text-gray">{{500-MyLeaveFormSearch.REASON.length}}/500</span>
                        </div>
                        <div class="col-xxl-12 col-xl-12 col-md-12">
                            <div class="form-check">
                                <input class="form-check-input"
                                       id="Invited_My_Leave"
                                       type="checkbox"
                                       prevent-double-click="2000"
                                       ng-change="HRM_GET_LEAVE_DURATION()"
                                       ng-model="MyLeaveFormSearch.IS_IGNORE_WORK_PATTERN">
                                <label class="form-check-label" for="Invited_My_Leave">Ignore work pattern</label>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xl-6 col-md-6 mt-2">
                            <label>Duration</label>
                            <div class="placeholder" data-type="{{MyLeaveFormSearch.UNITS}}">
                                <input type="text"
                                       ng-model="MyLeaveFormSearch.DURATION"
                                       name="DURATION"
                                       disabled="true"
                                       only-digits
                                       required
                                       ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.DURATION.$error.required}"
                                       placeholder="Number of days to be deducted from holiday balance" />
                            </div>
                        </div>

                        <div class="col-xxl-4 col-xl-5 col-md-4">
                            <div class="border_box" ng-show="calendarMonths.length>0">
                                <div class="col-xxl-12 col-xl-12 col-md-12 text-center my-2" >
                                    <span class="me-3"><i class="fa-solid fa-circle-check txt-success"></i> Working Day</span>
                                    <i class="fa-solid fa-circle-xmark" style="color:#ededed"></i> Non-Working Day
                                </div>
                                <div class="table-responsive scrollbar-wrapper" style="max-height:210px;">
                                    <table class="mb-0 leave_table">
                                        <thead> </thead>
                                        <tbody class="checkbox_group" ng-repeat="month in calendarMonths track by $index">
                                            <tr>
                                                <td colspan="7" class="txt-primary f-w-700">
                                                    <span class="ps-2">{{ month.monthName }}</span>
                                                </td>
                                            </tr>
                                            <tr class="thead_fixed bg-white">
                                                <td class="text-center f-w-600" ng-repeat="d in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']">{{d}}</td>
                                            </tr>
                                            <tr ng-repeat="week in month.weeks track by $index">
                                                <td ng-repeat="day in week.days track by $index" ng-class="{'outside': day.DATE.getMonth() !== month.monthIndex}">
                                                    <span ng-show="false"> {{day.Value = day.DATE < minDate || day.DATE > maxDate}}</span>
                                                    <div ng-show="day.DATE.getMonth() === month.monthIndex && day.Value==false">
                                                        <input type="checkbox" id="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                               name="checkbox_choices{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                               ng-model="day.SELECTED_DURATION"
                                                               ng-change="ON_CHANGE_DURATION_Fn(calendarMonths,1)"
                                                               ng-disabled="day.DURATION==0"
                                                               checked>
                                                        <label for="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}">
                                                            <span class="leave_date">{{ day.DATE | date:'d' }}</span>
                                                        </label>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="txt-danger" ng-show="MyLeaveFormSearch.UNITS!='' && MyLeaveFormSearch.UNITS!=null">
                            <i class="fa-regular fa-triangle-exclamation mx-1"></i> No. of {{MyLeaveFormSearch.UNITS}} to be deducted based on work pattern & holiday calendar.

                            <p class="txt-primary mb-0" ng-show="MyLeaveFormSearch.UNITS!='' && MyLeaveFormSearch.UNITS!=null && MyLeaveFormSearch.UNITS_ID!=1">
                                <span><i class="fa-regular fa-info-circle mx-1"></i></span>
                                {{MyLeaveFormSearch.DURATION>0?(MyLeaveFormSearch.DURATION/MyLeaveFormSearch.AVG_HRS_SHIFTS_PER_DAY | number:2):0}} days equivalent.
                            </p>
                        </div>
                    </div>
                </form>
            </div>
            <div class="card-footer text-end">
                <button class="btn btn-light" ng-click="RESET_MY_LEAVE_Fn()">Reset</button>
                <button class="btn btn-primary" ng-click="HRM_INS_UPD_LEAVE_REQUESTS(2)">Submit Now</button>
            </div>
        </div>
    </div>
</div>
<div class="" ng-show="LEAVE_TAB==2">
    <div class="card">
        <div class="card-header">
            <h5>Request on Behalf of Employee</h5>
            <div class="card-header-right-icon d-none">
                <i class="fa-regular fa-arrow-up-right"></i>
            </div>
        </div>
        <div class="card-body">
            <form name="TeamLeaveForm" novalidate>
                <div class="row">
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label>Employee <span class="text-danger">*</span> </label>
                        <input type="hidden"
                               name="DDL_EMPLOYEE_ID"
                               placeholder="Add Here"
                               required
                               ng-model="TeamLeaveFormSearch.DDL_EMPLOYEE_ID" />
                        <ul class="nav nav-pills" ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.DDL_EMPLOYEE_ID.$error.required}">
                            <li class="dropdown w-100 show">
                                <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                    <span class="select-label" id="select_label">
                                        {{TeamLeaveFormSearch.CUSTOM_EMPLOYEE_NAME}}
                                    </span>
                                </a>
                                <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                    <li class="DontHideOnClick sticky-top bg-white">
                                        <input type="text"
                                               placeholder="Search"
                                               ng-model="TeamLeaveFormSearch.DISPLAY_EMPLOYEE_TEXT_SEARCH" class="mb-1" />
                                    </li>
                                    <li class=""
                                        ng-show="TeamLeaveFormSearch.DD_DEFAULT_TEXT!=TeamLeaveFormSearch.CUSTOM_EMPLOYEE_NAME"
                                        ng-click="SELECTED_EMPLOYEE_LIST_FOR_LEAVES_Fn('')">{{TeamLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                                    <li class=""
                                        ng-click="SELECTED_EMPLOYEE_LIST_FOR_LEAVES_Fn(_reportee_emp)"
                                        ng-repeat="_reportee_emp in EMPLOYEE_LIST_FOR_LEAVES_LIST | filter:{EMPLOYEE_NAME :TeamLeaveFormSearch.DISPLAY_EMPLOYEE_TEXT_SEARCH}">
                                        <span class="">{{_reportee_emp.EMPLOYEE_NAME}}</span>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label class="d-block">Absence Type <span class="text-danger">*</span> </label>
                        <input type="hidden"
                               name="BEHAF_OF_ABSENCE_TYPE_ID"
                               placeholder="Add Here"
                               required
                               ng-model="TeamLeaveFormSearch.ABSENCE_TYPE_ID" />
                        <ul class="nav nav-pills" ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.BEHAF_OF_ABSENCE_TYPE_ID.$error.required}">
                            <li class="dropdown w-100 show">
                                <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                    <span class="select-label" id="select_label">
                                        <span class="truncate">{{TeamLeaveFormSearch.CUSTOM_ABSENCE_TYPE_NAME}}</span>
                                    </span>
                                </a>
                                <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                    <li class=""
                                        ng-show="TeamLeaveFormSearch.DD_DEFAULT_TEXT!=TeamLeaveFormSearch.CUSTOM_ABSENCE_TYPE_NAME"
                                        ng-click="SELECTED_ABSENCE_TYPE_TEAM_Fn('')">{{TeamLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                                    <li class=""
                                        ng-click="SELECTED_ABSENCE_TYPE_TEAM_Fn(_absence)"
                                        ng-repeat="_absence in TEAM_ABSENCE_TYPES_FOR_EMPLOYEE_LEAVE_LIST">
                                        <span class="">{{_absence.ABSENCE_TYPE}}</span>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="col-xxl-auto col-xl-auto col-md-auto">
                        <label class="d-block responsiveLabel">&nbsp;</label>
                        <button class="btn btn-outline txt-primary w-100 text-nowrap" ng-click="VIEW_WORK_PATTERN(2)">
                            <i class="fa-light fa-code-branch fa-lg px-2"></i>
                            <span class="text-nowrap px-3">View Work Pattern</span>
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label>Start Date <span class="text-danger">*</span> </label>
                        <div class="date-column" ng-init="DateInputLoadTeamLeave()">
                            <input type="text"
                                   class="TeamLeaveStartDate"
                                   name="TEAM_START_DATE"
                                   autocomplete="off"
                                   ng-disabled="TeamLeaveFormSearch.DDL_EMPLOYEE_ID==0 || TeamLeaveFormSearch.DDL_EMPLOYEE_ID==null || TeamLeaveFormSearch.DDL_EMPLOYEE_ID=='' || TeamLeaveFormSearch.ABSENCE_TYPE_ID==null || TeamLeaveFormSearch.ABSENCE_TYPE_ID==''"
                                   placeholder="Select Date"
                                   ng-model="TeamLeaveFormSearch.START_DATE"
                                   ng-value="TeamLeaveFormSearch.START_DATE | date:DISPLAY_DATE_FORMAT"
                                   required
                                   readonly
                                   ng-change="SetStartCompleteDateTeam(TeamLeaveFormSearch.START_TIME, TeamLeaveFormSearch.START_DATE, 1)"
                                   ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.START_DATE.$error.required}" />
                            <i class="date-icon fa-light fa-calendar"></i>
                        </div>
                    </div>
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label>End Date <span class="text-danger">*</span></label>
                        <div class="date-column">
                            <input type="text"
                                   class="TeamLeaveEndDate"
                                   name="TEAM_END_DATE"
                                   placeholder="Select Date"
                                   autocomplete="off"
                                   ng-disabled="TeamLeaveFormSearch.DDL_EMPLOYEE_ID==0 || TeamLeaveFormSearch.DDL_EMPLOYEE_ID==null || TeamLeaveFormSearch.DDL_EMPLOYEE_ID=='' || TeamLeaveFormSearch.ABSENCE_TYPE_ID==null || TeamLeaveFormSearch.ABSENCE_TYPE_ID==''"
                                   ng-model="TeamLeaveFormSearch.END_DATE"
                                   ng-value="TeamLeaveFormSearch.END_DATE | date:DISPLAY_DATE_FORMAT"
                                   required
                                   readonly
                                   ng-change="SetStartCompleteDateTeam(TeamLeaveFormSearch.END_TIME, TeamLeaveFormSearch.END_DATE, 1)"
                                   ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.START_DATE.$error.required}" />
                            <i class="date-icon fa-light fa-calendar"></i>
                        </div>
                    </div>
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label>Start Time</label>
                        <div class="date-column">
                            <input class="form-control py-2"
                                   moment-picker="TeamLeaveFormSearch.START_TIME"
                                   onkeypress="return event.charCode >= 48 && event.charCode <= 58"
                                   placeholder="Select time"
                                   maxlength="5"
                                   format="HH:mm"
                                   name="START_TIME"
                                   locale="{{LANGUAGE_SYMBOL}}"
                                   autocomplete="off"
                                   ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/"
                                   ng-model="TeamLeaveFormSearch.START_TIME"
                                   ng-model-options="{ updateOn: 'blur' }"
                                   show-header="0"
                                   ng-blur="ngstarttimechange()"
                                   change="SET_MOMENT_TEAM_START_TIME_COMPLETE_DATE(3)"
                                   ng-required="TeamLeaveFormSearch.START_TIME_VALID"
                                   ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.START_TIME.$error.required || !START_DATE_REQUIRED_VALID}">
                            <i class="date-icon fa-light fa-clock"></i>
                        </div>
                    </div>
                    <div class="col-xxl-3 col-xl-3 col-md-3">
                        <label>End Time</label>
                        <div class="date-column">
                            <input class="form-control py-2"
                                   onkeypress="return event.charCode >= 48 && event.charCode <= 58"
                                   maxlength="5"
                                   moment-picker="TeamLeaveFormSearch.END_TIME"
                                   format="HH:mm"
                                   placeholder="Select time"
                                   show-header="0"
                                   name="END_TIME"
                                   ng-model="TeamLeaveFormSearch.END_TIME"
                                   autocomplete="off"
                                   ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/"
                                   ng-blur="ngendtimechange()"
                                   ng-model-options="{ updateOn: 'blur' }"
                                   change="SET_MOMENT_TEAM_END_TIME_COMPLETE_DATE(4)"
                                   ng-required="TeamLeaveFormSearch.END_TIME_VALID"
                                   ng-class="{'error':TeamLeaveForm.submitted && TeamLeaveForm.END_TIME.$error.required || !END_DATE_VALID || !END_DATE_REQUIRED_VALID}">
                            <i class="date-icon fa-light fa-clock"></i>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 balance_border b-r-5 balance_bg">
                    <div class="row p-3 pb-0">
                        <h6 class="headings">Balance Information  <span ng-show="TeamLeaveFormSearch.START_DATE!='' && TeamLeaveFormSearch.START_DATE!=null">as on {{TeamLeaveFormSearch.START_DATE | date:DISPLAY_DATE_FORMAT}}</span> <span ng-show="TeamLeaveFormSearch.UNITS!= '' && TeamLeaveFormSearch.UNITS!= null"> ({{TeamLeaveFormSearch.UNITS}})</span> </h6>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Total Allowance</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.ANNUAL_ALLOWANCE + TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.ADJUSTMENT | number:2}}</span>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Accrued</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.CALCULATED_ACCRUED | number:2}}</span>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Taken till date</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.TAKEN | number:2}}</span>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span class="truncate">Available till date</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.AVAILABLE_TILL_DATE | number:2}}</span>
                            </div>
                        </div>

                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Future Approved</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.BOOKED_APPROVED | number:2}}</span>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Future Pending</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.BOOKED_PENDING | number:2}}</span>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xl-3 col-md-3">
                            <div class="balance_border p-2 mb-3 d-flex justify-content-between b-r-8">
                                <span>Balance</span>
                                <span>{{TeamLeaveFormSearch.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.REMAINING_BALANCE | number:2}}</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-xxl-12 col-xl-12 col-md-12" ng-show="TeamLeaveFormSearch.EMPLOYEE_LIST_TEAM.length>0">
                        <h6 class="headings mt-2">Others Absent During Same Period</h6>
                        <div class="row">
                            <div class="col-xxl-3 col-xl-3 col-md-3"
                                 ng-repeat="_em_leave in TeamLeaveFormSearch.EMPLOYEE_LIST_TEAM | unique:'ABSENCE_TYPE_ID'"
                                 ng-init="nginitteamleave_Fn(_em_leave,2)" ng-click="POP_OPEN_LEAVER_DTL_Fn(_em_leave,TeamLeaveFormSearch)">
                                <div class="border p-2 d-flex align-items-center justify-content-between b-r-8">
                                    <span>{{_em_leave.ABSENCE_TYPE}} ({{_em_leave.COUNT=(TeamLeaveFormSearch.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true).length }})</span>
                                    <div class="avatarContainer">
                                        <div ng-repeat="_leavers in (TeamLeaveFormSearch.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true) | limitTo:3"
                                             ng-init="nginitteamleave_Fn(_leavers,2)">
                                            <img ng-if="_leavers.IMG_PATH!=null && _leavers.IMG_PATH!=''" src="..{{_leavers.IMG_PATH}}" height="30" width="30" class="rounded-circle" />
                                            <span class="text_avatar_24 me-1" ng-if="_leavers.IMG_PATH==null || _leavers.IMG_PATH==''">{{_leavers.SHORT_NAME}}</span>
                                            <span ng-if="_em_leave.COUNT>3 && $last" class="avatar">+{{_em_leave.COUNT-3}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xxl-6 col-xl-6 col-md-6 mt-2">
                        <label>Document Upload <span ng-show="false" class="txt-danger">*</span></label>
                        <div class="col-xxl-12 col-md-12 col-xl-12">
                            <div class="form-group file-area mb-0">
                                <input id="TEAM_LEAVE"
                                       ng-files="getTheFilesToUpload($files,'TEAM_LEAVE',0.5,TeamLeaveFormSearch,50,1,'',3)"
                                       name="file"
                                       type="file" />
                                <div class="file-dummy">
                                    <i class="fa-light fa-file-plus fa-xl txt-primary"></i>
                                    <p class="mt-2 mb-0">Only JPEG, PNG and PDF files with max size 500KB</p>
                                </div>
                            </div>
                            <span class="border b-r-5 w-100 p-2 my-2 d-flex align-items-center " ng-repeat="File in TeamLeaveFormSearch.UploadedFiles">
                                <a class="truncate f-11" href="{{File.FILE_PATH}}{{File.SERVER_FILE_NAME}}" download="download">
                                    <i class="fa fa-download"></i> {{File.ORIGINAL_FILE_NAME}}
                                </a>
                                <i ng-click="DELETE_TEAM_FILE_UPLOAD_Fn(TeamLeaveFormSearch,File,$index)" class="fa-light fa-lg fa-xmark txt-danger ms-auto me-2 c-pointer"></i>
                            </span>
                        </div>
                    </div>

                    <div class="col-xxl-6 col-xl-6 col-md-6 mt-2">
                        <label>Reason</label>
                        <textarea rows="3"
                                  class="mb-0"
                                  placeholder="Enter Reason"
                                  name="REASON"
                                  maxlength="500"
                                  ng-model="TeamLeaveFormSearch.REASON">
                                    </textarea>
                        <span class="float-end text-gray">{{500-TeamLeaveFormSearch.REASON.length}}/500</span>
                    </div>


                    <div class="col-xxl-12 col-xl-12 col-md-12">
                        <div class="form-check">
                            <input class="form-check-input"
                                   id="Invited_Team_Leave"
                                   name="IGNORE_WORK_PATTERN"
                                   type="checkbox"
                                   prevent-double-click="2000"
                                   ng-change="HRM_GET_LEAVE_DURATION_TEAM()"
                                   ng-model="TeamLeaveFormSearch.IS_IGNORE_WORK_PATTERN"
                                   value="" checked="">
                            <label class="form-check-label" for="Invited_Team_Leave">Ignore work pattern</label>
                        </div>
                    </div>

                    <div class="col-xxl-3 col-xl-3 col-md-3 mt-2">
                        <label>Duration</label>
                        <div class="placeholder" data-type="{{TeamLeaveFormSearch.UNITS}}">
                            <input type="text"
                                   placeholder="0"
                                   name="DURATION"
                                   required
                                   disabled="true"
                                   autocomplete="off"
                                   ng-model="TeamLeaveFormSearch.DURATION" ng-class="{'f-w-700':TeamLeaveFormSearch.DURATION>0}" />
                        </div>
                    </div>

                    <div class="col-xxl-3 col-xl-4 col-md-3">
                        <div class="border_box" ng-show="calendarMonthsTeam.length>0">
                            <div class="col-xxl-12 col-xl-12 col-md-12 text-center my-2">
                                <span class="me-3"><i class="fa-solid fa-circle-check txt-success"></i> Working Day</span>
                                <i class="fa-solid fa-circle-xmark" style="color:#ededed"></i> Non-Working Day
                            </div>
                            <div class="table-responsive scrollbar-wrapper" style="max-height:210px;">
                                <table class="mb-0 leave_table">
                                    <thead> </thead>
                                    <tbody class="checkbox_group" ng-repeat="month in calendarMonthsTeam track by $index">
                                        <tr>
                                            <td colspan="7" class="txt-primary f-w-700">
                                                <span class="ps-2">{{ month.monthName }}</span>
                                            </td>
                                        </tr>
                                        <tr class="thead_fixed bg-white">
                                            <td class="text-center f-w-600" ng-repeat="d in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']">{{d}}</td>
                                        </tr>
                                        <tr ng-repeat="week in month.weeks track by $index">
                                            <td ng-repeat="day in week.days track by $index" ng-class="{'outside': day.DATE.getMonth() !== month.monthIndex}">
                                              
                                                <span ng-show="false"> {{day.Value = day.DATE < TeamminDate || day.DATE > TeammaxDate}}</span>
                                                <div ng-show="day.DATE.getMonth() === month.monthIndex && day.Value==false">
                                                    <input type="checkbox" id="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                           name="checkbox_choices{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                           ng-model="day.SELECTED_DURATION"
                                                           ng-disabled="day.DURATION==0"
                                                           ng-change="ON_CHANGE_DURATION_Fn(calendarMonthsTeam,2)"
                                                           checked>
                                                    <label for="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}">
                                                        <span class="leave_date">{{ day.DATE | date:'d' }}</span>
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-xxl-12 col-xl-12 col-md-12">
                        <p class="text-danger mb-0" ng-show="TeamLeaveFormSearch.UNITS!='' && TeamLeaveFormSearch.UNITS!=null">
                            <span><i class="fa-regular fa-triangle-exclamation"></i></span>
                            No. of {{TeamLeaveFormSearch.UNITS}} deducted based on work pattern & holiday calendar.
                        </p>
                        <p class="txt-primary mb-0" ng-show="TeamLeaveFormSearch.UNITS!='' && TeamLeaveFormSearch.UNITS!=null && TeamLeaveFormSearch.UNITS_ID!=1">
                            <span><i class="fa-regular fa-info-circle"></i></span>
                            {{TeamLeaveFormSearch.DURATION>0?(TeamLeaveFormSearch.DURATION/TeamLeaveFormSearch.AVG_HRS_SHIFTS_PER_DAY | number:2):0}} days equivalent.
                        </p>
                    </div>

                </div>
            </form>
        </div>
        <div class="card-footer text-end">
            <button class="btn btn-light" ng-click="RESET_TEAM_LEAVE_Fn(2)">
                Reset
            </button>
            <button class="btn btn-primary" ng-click="HRM_INS_UPD_LEAVE_REQUESTS_TEAM(2)">
                Submit Now
            </button>
        </div>
    </div>
    <div class="card">
        <div class="card-header pb-1">
            <div class="row gx-1">
                <div class="col-xxl-2 col-xl-2 col-md-2">
                    <span class="circle_icon">
                        <i class="fa-light fa-plane-departure"></i>
                    </span>
                    <h5 class="mx-1">Leave History</h5>
                </div>
                <div class="col-xxl-2 col-xl-2 col-md-2 ms-auto">
                    <form id="SearchForm" name="SearchForm" novalidate autocomplete="off">
                        <input type="text"
                               placeholder="Search"
                               autocomplete="off"
                               ng-model="TeamLeaveFormSearch.FILTER_TEAM_SEARCH"
                               name="search" />
                        <button type="submit" class="btn btn-wenodo" ng-show="false" click-once ng-click="TEAM_HRM_LEAVE_REQUEST_LIST(1)">Search</button>
                    </form>
                </div>

                <div class="col-xxl-2 col-md-2 col-xl-2">
                    <ul class="nav nav-pills">
                        <li class="dropdown w-100 show">
                            <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                <span class="select-label" id="select_label">
                                    <span class="truncate">{{TeamLeaveFormSearch.CUSTOM_FILFTER_TEAM_ABSENCE_TYPE_NAME}}</span>
                                </span>
                            </a>
                            <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                <li class=""
                                    ng-show="TeamLeaveFormSearch.DD_DEFAULT_TEXT!=TeamLeaveFormSearch.CUSTOM_FILFTER_TEAM_ABSENCE_TYPE_NAME"
                                    ng-click="SELECTED_FILTER_ABSENCE_TYPE_TEAM_Fn('')">{{TeamLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                                <li class=""
                                    ng-click="SELECTED_FILTER_ABSENCE_TYPE_TEAM_Fn(_absence)"
                                    ng-repeat="_absence in SELF_ABSENCE_TYPES_FOR_EMPLOYEE_LEAVE_LIST">
                                    <span class="">{{_absence.ABSENCE_TYPE}}</span>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="col-xxl-2 col-md-2 col-xl-2">
                    <ul class="nav nav-pills">
                        <li class="dropdown w-100 show">
                            <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                <span class="select-label" id="select_label">
                                    {{TeamLeaveFormSearch.CUSTOM_TEAM_STATUS_NAME}}
                                </span>
                            </a>
                            <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                <li class=""
                                    ng-show="TeamLeaveFormSearch.DD_DEFAULT_TEXT!=TeamLeaveFormSearch.CUSTOM_TEAM_STATUS_NAME"
                                    ng-click="SELECTED_TEAM_STATUS_Fn('')">{{TeamLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                                <li class=""
                                    ng-click="SELECTED_TEAM_STATUS_Fn(_status)"
                                    ng-repeat="_status in STATUS_LIST">
                                    <span class="">{{_status.STATUS_NAME}}</span>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="col-xxl-2 col-md-2 col-xl-2">
                    <div class="date-column">
                        <input type="text"
                               name="month"
                               class="TeammonthPicker"
                               placeholder="MM/YYYY"
                               ng-change="DATE_FILTER_CHANGE_Fn(2)"
                               ng-model="TeamLeaveFormSearch.FILTER_DATE" />
                        <i class="date-icon fa-light fa-calendar" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="col-xxl-auto col-xl-auto col-md-auto">
                    <button class="btn btn-primary" ng-click="DOWN_LOAD_EXCEL_Fn(2)"><span><i class="fa-thin fa-circle-arrow-down me-2"></i></span> Download</button>
                </div>
            </div>
        </div>

        <div class="card-body p-0">
            <div class="col-xxl-12 col-xl-12 col-md-12" ng-show="TEAM_LEAVE_REQUEST_LIST.length==0">
                <div class="no-record text-center">{{LOAD_FETCH_TEXT}}</div>
            </div>
            <div class="table-responsive scrollbar-wrapper mx-height-leave" ng-show="TEAM_LEAVE_REQUEST_LIST.length>0">
                <table>
                    <thead class="thead_fixed">
                        <tr>
                            <th>
                                <div class="form-check d-flex align-items-center">
                                    <input class="form-check-input me-2"
                                           id="LeaveDetails"
                                           type="checkbox"
                                           ng-model="TeamLeaveFormSearch.EMPLOYEE_ALL_CHECK"
                                           ng-click="EMPLOYEE_ALL_CLICK_Fn()"
                                           value="">
                                    <label class="form-check-label mb-0 mt-1" for="LeaveDetails">Employee</label>
                                </div>
                            </th>
                            <th class="text-nowrap">Absence Type</th>
                            <th class="text-nowrap">Start Date</th>
                            <th class="text-nowrap">End Date</th>
                            <th>Duration</th>
                            <th>Action by</th>
                            <th class="text-center">Status</th>
                            <th class="text-center" width="10%">Actions</th>
                            <th class="text-center"> </th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="_team_leave in TEAM_LEAVE_REQUEST_LIST | unique :'LEAVE_REQUEST_ID'"
                           ng-init="_team_leave.SHOW_HIDE=false;nginitteamleave_Fn(_team_leave,$last)" on-finish-render="ngRepeatFinishedequalizerRender">
                        <tr>
                            <td>
                                <div class="form-check text-nowrap d-flex align-items-center">
                                    <input class="form-check-input me-2"
                                           ng-model="_team_leave.IS_SELECTED"
                                           id="Invited{{$index}}"
                                           ng-change="EMPLOYEE_LIST_CLICK_Fn(_team_leave)"
                                           type="checkbox" value="">
                                    <label class="form-check-label mb-0" for="Invited{{$index}}">
                                        <span class="text_avatar me-1" ng-show="_team_leave.IMG_PATH==null || _team_leave.IMG_PATH==''">{{_team_leave.SHORT_NAME}}</span>
                                        <img ng-show="_team_leave.IMG_PATH!=null && _team_leave.IMG_PATH!=''"
                                             src="..{{_team_leave.IMG_PATH}}"
                                             height="24" width="24" class="rounded-circle me-1" />
                                        {{_team_leave.EMPLOYEE_NAME}}
                                    </label>
                                </div>
                            </td>
                            <td>
                                {{_team_leave.ABSENCE_TYPE}}
                            </td>
                            <td class="text-nowrap">
                                <i class="fa-light fa-calendar-lines text-grey"></i> {{_team_leave.START_DATE | date:DISPLAY_DATE_FORMAT}}
                                <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_team_leave.START_DATE | date: TIME_FORMAT}}</span>
                            </td>
                            <td class="text-nowrap">
                                <i class="fa-light fa-calendar-lines text-grey"></i> {{_team_leave.END_DATE | date:DISPLAY_DATE_FORMAT}}
                                <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_team_leave.END_DATE | date: TIME_FORMAT}}</span>
                            </td>
                            <td class="text-nowrap">
                                {{_team_leave.DURATION}} {{_team_leave.UNIT_NAME=_team_leave.UNITS_ID==1?'Days':_team_leave.UNITS_ID==2?'Shifts':'Hours'}}
                            </td>
                            <td>
                                <span ng-show="_team_leave.STATUS_ID==86">-</span>
                                <span class="d-block" ng-if="_team_leave.STATUS_ID==87 || _team_leave.STATUS_ID==88 || _team_leave.STATUS_ID==90">
                                    <span class="d-block">{{_team_leave.APP_REJ_CANCEL_BY=_team_leave.APP_REJ_BY}}</span>
                                    <span><i class="fa-light fa-calendar-lines text-grey"></i> {{_team_leave.APP_REJ_CANCEL_BY_DATE=_team_leave.APP_REJ_DATE | date}}</span>
                                    <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_team_leave.APP_REJ_DATE| date :TIME_FORMAT}}</span>
                                </span>
                                <span class="d-block" ng-if="_team_leave.STATUS_ID==89">
                                    <span class="d-block">{{_team_leave.APP_REJ_CANCEL_BY=_team_leave.CANCELLED_BY}}</span>
                                    <span><i class="fa-light fa-calendar-lines text-grey"></i> {{_team_leave.APP_REJ_CANCEL_BY_DATE=_team_leave.CANCELLATION_DATE | date}}</span>
                                    <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_team_leave.CANCELLATION_DATE | date :TIME_FORMAT}}</span>
                                </span>
                            </td>
                            <td class="text-center">
                                <span class="badge-lg"
                                      data-bs-toggle="tooltip" data-bs-original-title="{{_team_leave.STATUS_ID==87 || _team_leave.STATUS_ID==88?_team_leave.APP_REJ_COMMENTS==null?'No Comment':_team_leave.APP_REJ_COMMENTS:_team_leave.CANCELLATION_COMMENTS==null?'No Comment':_team_leave.CANCELLATION_COMMENTS}}"
                                      ng-class="{'badge-light-warning':_team_leave.STATUS_ID==86,'badge-light-success':_team_leave.STATUS_ID==87,'badge-light-danger':_team_leave.STATUS_ID==88,'badge-light-secondary':_team_leave.STATUS_ID==89,'badge-light-info':_team_leave.STATUS_ID==90}">
                                    {{_team_leave.STATUS_NAME= (STATUS_LIST | filter:{'STATUS_ID':_team_leave.STATUS_ID})[0].STATUS_NAME }}
                                </span>
                            </td>
                            <td class="text-nowrap">
                                <div class="text-center">
                                    <button class="btn btn-light" type="button" data-bs-toggle="dropdown" ng-click="_team_leave.CAL_SHOW_HIDE=!_team_leave.CAL_SHOW_HIDE" aria-expanded="false" ng-show="false"><i class="fa-regular fa-calendar-circle-user"></i></button>
                                    
                                    <button class="btn  w-resp"
                                            data-bs-toggle="tooltip" data-bs-original-title="Approve"
                                            ng-disabled="_team_leave.STATUS_ID!=86"
                                            click-once
                                            ng-class="{'btn-outline text-grey':_team_leave.STATUS_ID!=86 ,'btn-outline-success':_team_leave.STATUS_ID==86}"
                                            ng-click="APPROVE_LEAVE_POP_Fn(_team_leave)">
                                        <i class="fa-light fa-circle-check fa-lg"></i>
                                    </button>
                                    <button data-bs-toggle="tooltip"
                                            data-bs-original-title="Reject"
                                            ng-hide="CheckStandardRoleAccess(5) || CheckStandardRoleAccess(10) || CheckStandardRoleAccess(15)"
                                            class="btn btn-outline-danger w-resp"
                                            click-once
                                            ng-disabled="!(_team_leave.STATUS_ID==86 && _team_leave.IS_REJECTED)"
                                            ng-class="{'btn-outline text-grey':!(_team_leave.STATUS_ID==86 && _team_leave.IS_REJECTED)}"
                                            ng-click="REJECT_LEAVE_POP_Fn(_team_leave)">
                                        <i class="fa-light fa-trash-xmark fa-lg"></i>
                                    </button>

                                    <button class="btn btn-outline-danger w-resp"
                                            data-bs-toggle="tooltip"
                                            data-bs-original-title="Cancel"
                                            click-once
                                            ng-disabled="{{ ((_team_leave.STATUS_ID==90 || _team_leave.STATUS_ID==87) && _team_leave.IS_REJECTED) ?false:true}}"
                                            ng-class="{'btn-outline text-grey':_team_leave.STATUS_ID==88 || _team_leave.STATUS_ID==89  || !((_team_leave.STATUS_ID==90 || _team_leave.STATUS_ID==87) && _team_leave.IS_REJECTED)} "
                                            ng-click="CANCEL_LEAVE_POP_Fn(_team_leave)">
                                        <i class="fa-light fa-circle-xmark fa-lg"></i>
                                    </button>
                                </div>
                            </td>
                            <td class="text-center">
                                <i class="fa-regular c-pointer" ng-click="OPEN_LEAVE_DETAIL_Fn(_team_leave);_team_leave.SHOW_HIDE_CALENDAR=false"
                                   ng-class="{'fa-chevron-up':_team_leave.SHOW_HIDE,'fa-chevron-down':!_team_leave.SHOW_HIDE}"></i>
                            </td>
                        </tr>

                        <tr class="bg_dd_table" ng-show="_team_leave.SHOW_HIDE">
                            <td colspan="9">
                                <div class="row gx-2">
                                    <div class="col-xxl-9 col-xl-9 col-md-9">
                                        <div class="row">
                                            <div class="col-xxl-6 col-xl-6 col-md-6">
                                                <div class="border b-r-8 p-3 my-2">
                                                    <label>Balance</label>
                                                    <div class="row">
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Total Allowance</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.ANNUAL_ALLOWANCE + _team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.ADJUSTMENT | number:2}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Accrued</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.CALCULATED_ACCRUED | number:2}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Taken till date</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.TAKEN | number:2}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Available till date</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.AVAILABLE_TILL_DATE | number:2}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Future Approved</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.BOOKED_APPROVED | number:2}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Future Pending</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.BOOKED_PENDING | number:2 }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-4 col-xl-6 col-md-6">
                                                            <div class="border b-r-8 p-2 d-flex justify-content-between mt-3">
                                                                <span class="f-10">Balance</span>
                                                                <span class="f-10 f-w-700">{{_team_leave.EMPLOYEE_ABSENCES_COUNT_LIST_TEAM.REMAINING_BALANCE | number:2}}</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-xxl-6 col-xl-6 col-md-6">
                                                <div class="border b-r-8 p-3 my-2">
                                                    <label>Others Absent During Same Period</label>
                                                    <div class="row">
                                                        <!--<div class="col-xxl-6 col-xl-6 col-md-6"
                                                             ng-repeat="_em_leave in _team_leave.EMPLOYEE_LIST_TEAM | unique:'ABSENCE_TYPE_ID'"
                                                             ng-click="POP_OPEN_LEAVER_DTL_Fn(_em_leave,_team_leave)">
                                                            <div class="border p-2 d-flex justify-content-between b-r-8 mt-3 c-pointer">
                                                                <span>{{_em_leave.ABSENCE_TYPE}} ({{(_team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true).length }})</span>
                                                                <span ng-repeat="_team in _team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true | limitTo:3" ng-init="_team.IMG_PATH==null?nginitteamleave_Fn(_team,2):''">
                                                                    <img ng-show="_team.IMG_PATH!=null" src="../{{UPLOAD_FOLDER_NAME}}{{_team.IMG_PATH}}" height="24" width="24" class="rounded-circle" />
                                                                    <span class="text_avatar me-1" ng-show="_team.IMG_PATH==null">{{_team.SHORT_NAME}}</span>
                                                                </span>
                                                                <span ng-show="(_team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true).length>3">{{(_team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true).length-3}}+</span>
                                                            </div>
                                                        </div>-->

                                                        <div class="col-xxl-6 col-xl-6 col-md-6"
                                                             ng-repeat="_em_leave in _team_leave.EMPLOYEE_LIST_TEAM | unique:'ABSENCE_TYPE_ID'"
                                                             ng-init="nginitteamleave_Fn(_em_leave,2)"
                                                             ng-click="POP_OPEN_LEAVER_DTL_Fn(_em_leave,_team_leave)">
                                                            <div class="border p-2 d-flex align-items-center justify-content-between b-r-8 c-pointer">
                                                                <span>{{_em_leave.ABSENCE_TYPE}} ({{_em_leave.COUNT=(_team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true).length }})</span>
                                                                <div class="avatarContainer">
                                                                   
                                                                    <div ng-repeat="_leavers in (_team_leave.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':_em_leave.ABSENCE_TYPE_ID}:true) | limitTo:3" ng-init="nginitteamleave_Fn(_leavers,2)">
                                                                        <img ng-if="_leavers.IMG_PATH!=null && _leavers.IMG_PATH!=''" src="..{{_leavers.IMG_PATH}}" height="30" width="30" class="rounded-circle" />
                                                                      
                                                                        <span class="text_avatar_24 me-1" ng-if="_leavers.IMG_PATH==null || _leavers.IMG_PATH==''">{{_leavers.SHORT_NAME}}</span>
                                                                        <span ng-if="$last && (_em_leave.COUNT)>3" class="avatar">+{{_em_leave.COUNT-3}}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="col-xxl-3 col-xl-3 col-md-3">
                                                <div class="border b-r-8 p-3 my-2">
                                                    <label>Reason</label>
                                                    <div class="border p-2 b-r-8">
                                                        <p class="text-break mb-0">
                                                            {{_team_leave.REASON==null || _team_leave.REASON==''?'-':_team_leave.REASON}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-xxl-3 col-xl-3 col-md-3">
                                                <div class="border b-r-8 p-3 my-2">
                                                    <label>Comments</label>
                                                    <div class="border p-2 b-r-8">
                                                        <p class="text-break mb-0" ng-show="_team_leave.STATUS_ID==86">-</p>
                                                        <p class="text-break mb-0" ng-show="_team_leave.STATUS_ID==89">
                                                            {{_team_leave.CANCELLATION_COMMENTS==null || _team_leave.CANCELLATION_COMMENTS==''?'-':_team_leave.CANCELLATION_COMMENTS}}
                                                        </p>
                                                        <p class="text-break mb-0" ng-show="_team_leave.STATUS_ID==87 || _team_leave.STATUS_ID==88 || _team_leave.STATUS_ID==90">
                                                            {{_team_leave.APP_REJ_COMMENTS==null || _team_leave.APP_REJ_COMMENTS==''?'-':_team_leave.APP_REJ_COMMENTS}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-xxl-6 col-xl-6 col-md-6">
                                                <div class="border b-r-8 p-3 my-2">
                                                    <div class="row">
                                                        <div class="col-xxl col-xl col-md">
                                                            <label>Upload</label>
                                                            <div class="no-record" ng-show="_team_leave.UploadedFiles.length==0">No Attachment</div>
                                                            <div class="border p-2 d-flex justify-content-between b-r-8" ng-repeat="_upls in _team_leave.UploadedFiles">
                                                                <span class="w-100 d-flex align-items-center">
                                                                    <i class="fa-light fa-download mx-2"></i>
                                                                    <a class="truncate-rota" download="{{_upls.SERVER_FILE_NAME}}" href="..{{_upls.FILE_PATH}}{{_upls.SERVER_FILE_NAME}}"> {{_upls.ORIGINAL_FILE_NAME}}</a>
                                                                    <span class="txt-danger c-pointer ms-auto" ng-show="MY_PROFILE_FLAG==0" ng-disabled="EDIT_MODE" ng-click="DELETE_UPLOAD_ASSET_Fn(_asset,_upls,$index)"><i class="fa-light fa-xmark"></i></span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-xxl-3 col-xl-3 col-md-3">
                                        <div class="border_box my-2">
                                            <div class="col-xxl-12 col-xl-12 col-md-12 text-center my-2">
                                                <span class="me-3"><i class="fa-solid fa-circle-check txt-success"></i> Working Day</span>
                                                <i class="fa-solid fa-circle-xmark" style="color:#ededed"></i> Non-Working Day
                                            </div>
                                            <div class="table-responsive scrollbar-wrapper" style="max-height:210px;">
                                                <table class="mb-0 leave_table table_non_editable">
                                                    <thead> </thead>
                                                    <tbody class="checkbox_group" ng-repeat="month in _team_leave.calendarMonths track by $index">
                                                        <tr>
                                                            <td colspan="7" class="txt-primary f-w-700">
                                                                <span class="ps-2">{{ month.monthName }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="thead_fixed bg-white" style="z-index: 1;">
                                                            <td class="text-center f-w-600" ng-repeat="d in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']">{{d}}</td>
                                                        </tr>
                                                        <tr ng-repeat="week in month.weeks track by $index">
                                                            <td ng-repeat="day in week.days track by $index" ng-class="{'outside': day.DATE.getMonth() !== month.monthIndex}">
                                                              
                                                                <span ng-show="false"> {{day.Value = day.DATE < _team_leave.minDate || day.DATE > _team_leave.maxDate}}</span>
                                                                <div ng-show="day.DATE.getMonth() === month.monthIndex && day.Value==false">

                                                                    <input type="checkbox" id="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                                           name="checkbox_choices{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                                           ng-model="day.SELECTED_DURATION"
                                                                           ng-disabled="true"
                                                                           checked>
                                                                    <label for="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}">
                                                                        <span class="leave_date">{{ day.DATE | date:'d' }}</span>
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    <tfoot class="t_foot_fixed" ng-show="GetDataTeam">
                        <tr>
                            <td colspan="9" class="text-center">
                                <button type="button"
                                        ng-click="LAZY_LOAD_TEAM_LEAVE_REQUEST_LIST()"
                                        class="btn btn-sm btn-light btn_fixed">
                                    Load More...
                                </button>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

        </div>
    </div>
</div>

<!--FIRST CARD ENDS-->
<!--SECOND CARD-->
<div class="card" ng-show="LEAVE_TAB==1" id="LEAVE_HISTORY_TAB_1">
    <div class="card-header pb-0">
        <div class="row gx-1">
            <div class="col-xxl-2 col-xl-2 col-md-2">
                <h5><span class="circle_icon "><i class="fa-light fa-plane-departure"></i></span> Leave History</h5>
            </div>
            <div class="col-xxl-2 col-md-2 col-xl-2 ms-auto">
                <!--<input type="text"
                       name="search"
                       ng-model="MyLeaveFormSearch.FILTER_MY_SEARCH"
                       placeholder="Search" />-->
            </div>
            <div class="col-xxl-2 col-md-2 col-xl-2">
                <ul class="nav nav-pills">
                    <li class="dropdown w-100 show">
                        <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                            <span class="select-label" id="select_label">
                                <span class="truncate">{{MyLeaveFormSearch.CUSTOM_FILFTER_ABSENCE_TYPE_NAME}}</span>
                            </span>
                        </a>
                        <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                            <li class=""
                                ng-show="MyLeaveFormSearch.DD_DEFAULT_TEXT!=MyLeaveFormSearch.CUSTOM_FILFTER_ABSENCE_TYPE_NAME"
                                ng-click="SELECTED_FILTER_ABSENCE_TYPE_MY_Fn('')">{{MyLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                            <li class=""
                                ng-click="SELECTED_FILTER_ABSENCE_TYPE_MY_Fn(_absence)"
                                ng-repeat="_absence in SELF_ABSENCE_TYPES_FOR_EMPLOYEE_LEAVE_LIST">
                                <span class="">{{_absence.ABSENCE_TYPE}}</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="col-xxl-2 col-md-2 col-xl-2">
                <ul class="nav nav-pills">
                    <li class="dropdown w-100 show">
                        <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                            <span class="select-label" id="select_label">
                                {{MyLeaveFormSearch.CUSTOM_MY_FLITER_STATUS_NAME}}
                            </span>
                        </a>
                        <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                            <li class=""
                                ng-show="MyLeaveFormSearch.DD_DEFAULT_TEXT!=MyLeaveFormSearch.CUSTOM_MY_FLITER_STATUS_NAME"
                                ng-click="SELECTED_FILTER_MY_STATUS_Fn('')">{{MyLeaveFormSearch.DD_DEFAULT_TEXT}}</li>
                            <li class=""
                                ng-click="SELECTED_FILTER_MY_STATUS_Fn(_status)"
                                ng-repeat="_status in STATUS_LIST">
                                <span class="">{{_status.STATUS_NAME}}</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="col-xxl-2 col-xl-2 col-md-2">
                <style>
                    .ui-datepicker-calendar {
                        display: none;
                    }

                    .ui-datepicker table {
                        display: none;
                    }
                </style>
                <div class="date-column">
                    <input type="text"
                           id="month"
                           name="month"
                           class="MymonthPicker"
                           placeholder="MM/YYYY"
                           ng-change="DATE_FILTER_CHANGE_Fn(1)"
                           ng-model="MyLeaveFormSearch.FILTER_DATE" />
                    <i class="date-icon fa-light fa-calendar" aria-hidden="true"></i>
                </div>
            </div>
            <div class="col-xxl-auto col-md-auto col-xl-auto">
                <a class="btn btn-primary" ng-click="DOWN_LOAD_EXCEL_Fn(1)"><i class="fa-thin fa-circle-arrow-down me-2"></i> Download</a>
            </div>
        </div>
    </div>

    <div class="col-xxl-12 col-xl-12 col-md-12" ng-show="MY_LEAVE_REQUEST_LIST.length==0">
        <div class="no-record text-center">{{LOAD_FETCH_TEXT}}</div>
    </div>

    <div class="table-responsive scrollbar-wrapper mx-height-leave" ng-show="MY_LEAVE_REQUEST_LIST.length>0">
        <table>
            <thead class="thead_fixed">
                <tr>
                    <th>Absence Type</th>
                    <th>Start</th>
                    <th>End</th>
                    <th>Duration</th>
                    <th>Action by</th>
                    <th class="text-center">Status</th>
                    <th class="text-center">Actions</th>
                    <th class="text-center"></th>
                </tr>
            </thead>
            <tbody ng-repeat="_leave in MY_LEAVE_REQUEST_LIST" ng-init="nginit_myleave(_leave)" on-finish-render="ngRepeatFinishedequalizerRender">
                <tr>
                    <td>{{_leave.ABSENCE_TYPE}}</td>
                    <td class="text-nowrap">
                        <i class="fa-light fa-calendar-lines text-grey"></i> {{_leave.START_DATE | date:DISPLAY_DATE_FORMAT}}
                        <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_leave.START_DATE | date: TIME_FORMAT}}</span>
                    </td>
                    <td class="text-nowrap">
                        <i class="fa-light fa-calendar-lines text-grey"></i> {{_leave.END_DATE | date:DISPLAY_DATE_FORMAT}}
                        <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_leave.END_DATE | date: TIME_FORMAT}}</span>
                    </td>
                    <td>{{_leave.DURATION}} {{_leave.UNITS_NAME=(_leave.UNITS_ID==1?'Days':_leave.UNITS_ID==2?'Shifts':'Hours')}}</td>
                    <td>
                        <span ng-show="_leave.STATUS_ID==86">-</span>
                        <span class="d-block" ng-if="_leave.STATUS_ID==87 || _leave.STATUS_ID==88 || _leave.STATUS_ID==90">
                            <span class="d-block">{{_leave.APP_REJ_CANCEL_BY = _leave.APP_REJ_BY}}</span>
                            <span><i class="fa-light fa-calendar-lines text-grey"></i> {{_leave.APP_REJ_CANCEL_BY_DATE=_leave.APP_REJ_DATE | date}}</span>
                            <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_leave.APP_REJ_DATE | date :TIME_FORMAT}}</span>
                        </span>
                        <span class="d-block" ng-if="_leave.STATUS_ID==89">
                            <span class="d-block">{{_leave.APP_REJ_CANCEL_BY =_leave.CANCELLED_BY}}</span>
                            <span><i class="fa-light fa-calendar-lines text-grey"></i> {{_leave.APP_REJ_CANCEL_BY_DATE=_leave.CANCELLATION_DATE | date }}</span>
                            <span class="time_block"><i class="fa-light fa-clock text-blue"></i> {{_leave.CANCELLATION_DATE | date :TIME_FORMAT}}</span>
                        </span>
                    </td>
                    <td class="text-center">
                        <span class="badge-lg"
                              data-bs-toggle="tooltip" data-bs-original-title="{{_leave.STATUS_ID==87 || _leave.STATUS_ID==88?_leave.APP_REJ_COMMENTS==null?'No Comment':_leave.APP_REJ_COMMENTS:_leave.CANCELLATION_COMMENTS==null?'No Comment':_leave.CANCELLATION_COMMENTS}}"
                              ng-class="{'badge-light-warning':_leave.STATUS_ID==86,'badge-light-success':_leave.STATUS_ID==87,'badge-light-danger':_leave.STATUS_ID==88,'badge-light-secondary':_leave.STATUS_ID==89,'badge-light-info':_leave.STATUS_ID==90}">
                            {{ _leave.STATUS_NAME=(STATUS_LIST | filter:{'STATUS_ID':_leave.STATUS_ID})[0].STATUS_NAME}}

                        </span>
                    </td>
                    <td class="text-center">
                        <button class="btn btn-light" type="button" data-bs-toggle="dropdown" ng-click="_team_leave.CAL_SHOW_HIDE=!_team_leave.CAL_SHOW_HIDE" aria-expanded="false" ng-show="false"><i class="fa-regular fa-calendar-circle-user"></i></button>
                        <button class="btn btn-outline-danger"
                                ng-class="{'btn-outline text-grey':_leave.STATUS_ID==87 && !_leave.IS_REJECTED || _leave.STATUS_ID==89 || _leave.STATUS_ID==88 || !_leave.IS_REJECTED}"
                                ng-disabled="_leave.STATUS_ID==87 && !_leave.IS_REJECTED || _leave.STATUS_ID==89 || _leave.STATUS_ID==88 || !_leave.IS_REJECTED"
                                ng-click="CANCEL_LEAVE_POP_Fn(_leave)"
                                data-bs-toggle="tooltip"
                                data-bs-original-title="Cancel">
                            <i class="fa-light fa-circle-xmark fa-lg"></i>
                        </button>
                    </td>
                    <td class="text-center">

                        <i class="fa-regular c-pointer" ng-click="OPEN_LEAVE_DETAIL_Fn(_leave);_leave.CAL_SHOW_HIDE=!_leave.CAL_SHOW_HIDE"
                           ng-class="{'fa-chevron-up':_leave.SHOW_HIDE,'fa-chevron-down':!_leave.SHOW_HIDE}"></i>
                    </td>
                </tr>
                <tr class="bg_dd_table" ng-show="_leave.SHOW_HIDE">
                    <td colspan="8">
                        <div class="row gx-2">
                            <div class="col-xxl-6 col-xl-6 col-md-6">
                                <div class="row gx-2">
                                    <div class="col-xxl-6 col-xl-6 col-md-6">
                                        <div class="border b-r-8 p-3 my-2">
                                            <label>Reason</label>
                                            <div class="border p-2 d-flex justify-content-between b-r-8">
                                                <p class="text-break mb-0">
                                                    {{_leave.REASON==null || _leave.REASON==''?'-':_leave.REASON}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xxl-6 col-xl-6 col-md-6">
                                        <div class="border b-r-8 p-3 my-2">
                                            <label>Comments</label>
                                            <div class="border p-2 b-r-8">
                                                <p class="text-break mb-0" ng-show="_leave.STATUS_ID==86">-</p>
                                                <p class="text-break mb-0" ng-show="_leave.STATUS_ID==89">
                                                    {{_leave.CANCELLATION_COMMENTS==null || _leave.CANCELLATION_COMMENTS==''?'-':_leave.CANCELLATION_COMMENTS}}
                                                </p>
                                                <p class="text-break mb-0" ng-show="_leave.STATUS_ID==87 || _leave.STATUS_ID==88 || _leave.STATUS_ID==90">
                                                    {{_leave.APP_REJ_COMMENTS==null || _leave.APP_REJ_COMMENTS==''?'-':_leave.APP_REJ_COMMENTS}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xxl-3 col-xl-3 col-md-3">
                                <div class="border b-r-8 p-3 my-2">
                                    <div class="row">
                                        <div class="col-xxl col-xl col-md">
                                            <label>Upload</label>
                                            <div class="no-record" ng-show="_leave.UploadedFiles.length==0">No Attachment</div>
                                            <span class="form-control py-2 d-flex align-items-center mt-2 mb-0" ng-repeat="_upls in _leave.UploadedFiles">
                                                <i class="fa-light fa-download mx-2"></i>
                                                <a class="truncate-rota" download="{{_upls.SERVER_FILE_NAME}}" href="..{{_upls.FILE_PATH}}{{_upls.SERVER_FILE_NAME}}"> {{_upls.ORIGINAL_FILE_NAME}}</a>
                                                <span class="txt-danger c-pointer ms-auto" ng-show="MY_PROFILE_FLAG==0" ng-disabled="EDIT_MODE" ng-click="DELETE_UPLOAD_ASSET_Fn(_asset,_upls,$index)"><i class="fa-light fa-xmark"></i></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xxl-3 col-xl-3 col-md-3">
                                <div class="border_box my-2">
                                    <div class="col-xxl-12 col-xl-12 col-md-12 text-center my-2">
                                        <span class="me-3"><i class="fa-solid fa-circle-check txt-success"></i> Working Day</span>
                                        <i class="fa-solid fa-circle-xmark" style="color:#ededed"></i> Non-Working Day
                                    </div>
                                    <div class="table-responsive scrollbar-wrapper" style="max-height:210px;">
                                        <table class="mb-0 leave_table table_non_editable">
                                            <thead> </thead>
                                            <tbody class="checkbox_group" ng-repeat="month in _leave.calendarMonths track by $index">
                                                <tr>
                                                    <td colspan="7" class="txt-primary f-w-700">
                                                        <span class="ps-2">{{ month.monthName }}</span>
                                                    </td>
                                                </tr>
                                                <tr class="thead_fixed bg-white" style="z-index: 1;">
                                                    <td class="text-center f-w-600" ng-repeat="d in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']">{{d}}</td>
                                                </tr>
                                                <tr ng-repeat="week in month.weeks track by $index">
                                                    <td ng-repeat="day in week.days track by $index" ng-class="{'outside': day.DATE.getMonth() !== month.monthIndex}">
                                                        <span ng-show="false"> {{day.Value = day.DATE < _leave.minDate || day.DATE > _leave.maxDate}}</span>
                                                        <div ng-show="day.DATE.getMonth() === month.monthIndex && day.Value==false">
                                                            <input type="checkbox" id="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                                   name="checkbox_choices{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                                   ng-model="day.SELECTED_DURATION"
                                                                   ng-disabled="true"
                                                                   checked>
                                                            <label for="day{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}">
                                                                <span class="leave_date">{{ day.DATE | date:'d' }}</span>
                                                            </label>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
            <tfoot class="t_foot_fixed" ng-show="GetData">
                <tr>
                    <td colspan="8" class="text-center">
                        <button type="button"
                                ng-click="LAZY_LOAD_MY_LEAVE_REQUEST_LIST()"
                                class="btn btn-sm btn-light btn_fixed">
                            Load More...
                        </button>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<div class="modal fade" id="Work_Pattern" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Work Pattern</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xxl-6 col-xl-6 col-md-6" ng-show="false">
                        <label>Work Pattern Allocation</label>
                        <ul class="nav nav-pills">
                            <li class="dropdown w-100">
                                <a class="text-limitations cursor-pointer"
                                   data-toggle="dropdown">
                                    <span class="select-label" id="select_label">
                                        WP001-Hours per day
                                    </span>
                                </a>
                                <ul id="divNewNotifications" class="dropdown-menu DontHideOnClick scrollbar-wrapper w-100">
                                    <li class="DontHideOnClick">
                                        <span class="truncate">WP001 - Hours Per Day</span>
                                    </li>
                                    <li class="DontHideOnClick">
                                        <span class="truncate">WP002 - Hours Per Week</span>
                                    </li>
                                    <li class="DontHideOnClick">
                                        <span class="truncate">WP003 - Shifts Per Day</span>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="row" ng-show="false">
                    <div class="col-xxl col-xl col-md">
                        <label>Mon</label>
                        <input type="text" placeholder="8" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Tue</label>
                        <input type="text" placeholder="8" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Wed</label>
                        <input type="text" placeholder="8" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Thu</label>
                        <input type="text" placeholder="8" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Fri</label>
                        <input type="text" placeholder="8" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Sat</label>
                        <input type="text" placeholder="-" disabled />
                    </div>
                    <div class="col-xxl col-xl col-md">
                        <label>Sun</label>
                        <input type="text" placeholder="-" disabled />
                    </div>
                </div>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Type</th>
                                <th>Total</th>
                                <th>Unit</th>
                                <th ng-repeat="_day in daysOfWeek">{{_day.day}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="_workPattern in HRM_WORK_PATTERN_LIST">
                                <td>{{_workPattern.TITLE || "-"}}</td>
                                <td>{{_workPattern.WORK_PATTERN_TYPE}}</td>
                                <td>{{_workPattern.TOTAL}}</td>
                                <td>{{_workPattern.UNITS}}</td>
                                <td ng-repeat="day in daysOfWeek">
                                    <div class="form-check" ng-show="_workPattern.WORK_PATTERN_TYPE_ID == 2">
                                        <input class="form-check-input"
                                               type="checkbox"
                                               name="{{ day.day }}"
                                               ng-model="_workPattern[day.day]"
                                               ng-checked="_workPattern[day.day] == 1"
                                               ng-disabled="true"
                                               required>
                                    </div>
                                    <span ng-show="_workPattern.WORK_PATTERN_TYPE_ID != 2">{{_workPattern[day.day] || "-"}}</span>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot ng-show="GetData">
                            <tr>
                                <td colspan="12" class="text-center">
                                    <button type="button"
                                            ng-click="LAZY_LOAD_HRM_GET_WORK_PATTERNS()"
                                            click-once class="btn btn-sm btn-light">
                                        Load More...
                                    </button>

                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="Reject_Leave" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered p-5" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" data-bs-original-title="" title=""></button>
            </div>
            <div class="modal-body">
                <div class="modal-toggle-wrapper">
                    <div class="d-flex justify-content-center">
                        <div class="tickIcon_danger">
                            <span class="badge text-bg-danger-modal">
                                <i class="fa-light fa-exclamation fa-lg"></i>
                            </span>
                        </div>
                    </div>

                    <h6 class="text-center pb-2 fw-500">Reject Leave Request</h6>
                    <p class="text-center text-dark">You are about to reject {{SELECTED_LEAVE_DETAILS.EMPLOYEE_NAME}} leave request applied for {{SELECTED_LEAVE_DETAILS.START_DATE | date:DISPLAY_DATE_FORMAT}} to {{SELECTED_LEAVE_DETAILS.END_DATE | date:DISPLAY_DATE_FORMAT}}</p>
                </div>
                <div>
                    <textarea ng-model="SELECTED_LEAVE_DETAILS.COMMENTS" rows="3" placeholder="Enter Comments"></textarea>
                </div>
            </div>
            <div class="modal-footer border-0">
                <div class="row w-100">
                    <div class="col-xxl-6 col-md-6 col-xl-6"><button class="btn btn-outline w-100" type="button" data-bs-dismiss="modal">Cancel</button></div>
                    <div class="col-xxl-6 col-md-6 col-xl-6"><button class="btn btn-danger w-100" ng-click="HRM_LEAVE_APP_REJ_LEAVE_REQUESTS(88)" type="button" data-bs-dismiss="modal">Proceed</button></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="Cancel_Leave" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered p-5" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" data-bs-original-title="" title=""></button>
            </div>
            <div class="modal-body">
                <div class="modal-toggle-wrapper">
                    <div class="d-flex justify-content-center">
                        <div class="tickIcon_danger mt-0">
                            <span class="badge text-bg-danger-modal">
                                <i class="fa-light fa-exclamation fa-lg"></i>
                            </span>
                        </div>
                    </div>

                    <h6 class="text-center pb-2 fw-500">Cancel Leave Request</h6>
                    <p class="text-center text-dark">You are about to cancel {{SELECTED_LEAVE_DETAILS.EMPLOYEE_NAME}} leave request applied for {{SELECTED_LEAVE_DETAILS.START_DATE | date:DISPLAY_DATE_FORMAT}} to {{SELECTED_LEAVE_DETAILS.END_DATE | date:DISPLAY_DATE_FORMAT}}</p>
                </div>
                <div>
                    <textarea ng-model="SELECTED_LEAVE_DETAILS.COMMENTS" rows="3" placeholder="Enter Comments"></textarea>
                </div>
            </div>
            <div class="modal-footer border-0">
                <div class="row w-100">
                    <div class="col-xxl-6 col-md-6 col-xl-6"><button class="btn btn-outline w-100" type="button" data-bs-dismiss="modal">Cancel</button></div>
                    <div class="col-xxl-6 col-md-6 col-xl-6"><button class="btn btn-danger w-100" ng-show="!AUTO_APPROVED_FLAG" ng-click="HRM_LEAVE_APP_REJ_LEAVE_REQUESTS(89)" type="button" data-bs-dismiss="modal">Proceed</button></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="Approve_Leave" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered p-5" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" data-bs-original-title="" title=""></button>
            </div>
            <div class="modal-body">
                <form name="ApproveLeaveForm" novalidate>
                    <div class="modal-toggle-wrapper">
                        <div class="col-xxl-12 col-md-12 col-xl-12">
                            <div class="d-flex justify-content-center">
                                <div class="tickIcon">
                                    <span class="badge text-bg-success-modal">
                                        <i class="fa-light fa-check fa-lg"></i>
                                    </span>
                                </div>
                            </div>
                            <h6 class="text-center pb-2 fw-500">Approve Leave Request</h6>
                            <p class="text-center text-dark">You are about to approve  {{SELECTED_LEAVE_DETAILS.EMPLOYEE_NAME}} leave request applied for  {{SELECTED_LEAVE_DETAILS.START_DATE | date:DISPLAY_DATE_FORMAT}}  to  {{SELECTED_LEAVE_DETAILS.END_DATE | date:DISPLAY_DATE_FORMAT}} </p>
                            <div class="col-xxl-12 col-xl-12 col-md-12">
                                <label>Absence Type <span class="txt-danger">*</span></label>
                                <input type="hidden"
                                       name="ABSENCE_TYPE_ID"
                                       placeholder="Add Here"
                                       required
                                       ng-model="SELECTED_LEAVE_DETAILS.ABSENCE_TYPE_ID" />
                                <ul class="nav nav-pills" ng-class="{'error':MyLeaveForm.submitted && MyLeaveForm.ABSENCE_TYPE_ID.$error.required}">
                                    <li class="dropdown w-100 show">
                                        <a class="text-limitations cursor-pointer" data-toggle="dropdown" aria-expanded="true">
                                            <span class="select-label" id="select_label">
                                                {{SELECTED_LEAVE_DETAILS.CUSTOM_ABSENCE_TYPE}}
                                            </span>
                                        </a>
                                        <ul id="divNewNotifications" class="dropdown-menu scrollbar-wrapper  w-100">
                                            <li class=""
                                                ng-click="SELECTED_ABSENCE_TYPE_APPROVE_REJECT_Fn(_absence)"
                                                ng-repeat="_absence in EDIT_ABSENCE_TYPES_FOR_EMPLOYEE_LEAVE_LIST">
                                                <span class="">{{_absence.ABSENCE_TYPE}}</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="border_box mb-3">
                                <div class="table-responsive scrollbar-wrapper" style="max-height:210px;">
                                    <table class="mb-0 leave_table">
                                        <thead> </thead>
                                        <tbody class="checkbox_group" ng-repeat="month in SELECTED_LEAVE_DETAILS.calendarMonths track by $index">
                                            <tr>
                                                <td colspan="7" class="txt-primary f-w-700">
                                                    <span class="ps-2">{{ month.monthName }}</span>
                                                </td>
                                            </tr>
                                            <tr class="thead_fixed bg-white">
                                                <td class="text-center f-w-600" ng-repeat="d in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']">{{d}}</td>
                                            </tr>
                                            <tr ng-repeat="week in month.weeks track by $index">
                                                <td ng-repeat="day in week.days track by $index" ng-class="{'outside': day.DATE.getMonth() !== month.monthIndex}">
                                                    <span ng-show="false"> {{day.Value = day.DATE < SELECTED_LEAVE_DETAILS.minDate || day.DATE > SELECTED_LEAVE_DETAILS.maxDate}}</span>
                                                    <div ng-show="day.DATE.getMonth() === month.monthIndex && day.Value==false">
                                                      
                                                        <input type="checkbox"
                                                               id="Approve{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                               name="Approve{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}"
                                                               ng-model="day.SELECTED_DURATION"
                                                               ng-disabled="day.ORIGINAL_DURATION==0 && day.DURATION==0"
                                                               ng-change="DURATION_CHANGE_Fn(SELECTED_LEAVE_DETAILS,day)"
                                                               checked>
                                                        <label for="Approve{{month.monthIndex}}{{week.WEEK_INDEX}}{{day.DATE_INDEX}}">
                                                            <span class="leave_date">{{ day.DATE | date:'d' }}</span>
                                                        </label>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div>
                                <input ng-model="SELECTED_LEAVE_DETAILS.SELECTED_DURATION" ng-disabled="true" placeholder="duration" class="form-control mb-0">  
                            </div>
                            <div class="mt-2">
                                <textarea ng-model="SELECTED_LEAVE_DETAILS.COMMENTS" rows="3" placeholder="Enter Comments" class="mb-0"></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-0">
                <div class="row w-100">
                    <div class="col-xxl-6 col-md-6 col-xl-6"><button class="btn btn-outline w-100" type="button" data-bs-dismiss="modal">Cancel</button></div>
                    <div class="col-xxl-6 col-md-6 col-xl-6">
                        <button class="btn btn-primary w-100"
                                ng-disabled="SELECTED_LEAVE_DETAILS.DISABLE_PRC_BTN"
                                ng-click="HRM_LEAVE_APP_REJ_LEAVE_REQUESTS(87)" type="button" data-bs-dismiss="modal">
                            Proceed
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="Sick_leaves" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{SELECTED_LEAVE_DTLS.ABSENCE_TYPE}}</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th> Employee</th>
                                <th> Type</th>
                                <th class="text-nowrap">Start Date</th>
                                <th class="text-nowrap">End Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="_team in SELECTED_LEAVER_DTLS.EMPLOYEE_LIST_TEAM | filter:{'ABSENCE_TYPE_ID':SELECTED_LEAVE_DTLS.ABSENCE_TYPE_ID}:true"
                                ng-init="nginitteamleave_Fn(_team,3)">
                                <td class="text-nowrap">
                                    <img ng-show="_team.IMG_PATH!=null && _team.IMG_PATH!=''" src="..{{_team.IMG_PATH}}" height="24" width="24" class="rounded-circle" />
                                    <span class="text_avatar me-1" ng-show="_team.IMG_PATH==null || _team.IMG_PATH==''">{{_team.SHORT_NAME}}</span>{{_team.EMPLOYEE_NAME}}
                                </td>
                                <td> {{_team.ABSENCE_TYPE}}</td>
                                <td class="text-nowrap">{{_team.START_DATE| date:DISPLAY_DATE_FORMAT}}</td>
                                <td class="text-nowrap">{{_team.END_DATE| date:DISPLAY_DATE_FORMAT}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
