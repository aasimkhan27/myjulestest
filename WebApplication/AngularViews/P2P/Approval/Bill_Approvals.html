<ul class="nav nav-tabs" id="custom-content-below-tab" role="tablist">
    <li class="nav-item" ng-click="TAB_CLICK_APPROVE_FY(1)">
        <a class="nav-link " ng-class="{'active':TAB_FLAG==1}" data-toggle="pill" role="tab" aria-controls="custom-content-below-home" aria-selected="true">Action Required</a>
    </li>
    <li class="nav-item" ng-click="TAB_CLICK_APPROVE_FY(2)">
        <a class="nav-link " ng-class="{'active':TAB_FLAG==2}" data-toggle="pill" role="tab" aria-controls="custom-content-below-home" aria-selected="true">Processed</a>
    </li>
    <li class="nav-item" ng-show="CheckSubModuleAccess(134) || CheckSubModuleAccess(156)" ng-click="TAB_CLICK_APPROVE_FY(3)">
        <a class="nav-link " ng-class="{'active':TAB_FLAG==3}" data-toggle="pill" role="tab" aria-controls="custom-content-below-home" aria-selected="true">All</a>
    </li>
    <li class="nav-item mt-1 ml-2 ml-auto" ng-show="IntegrationDetails!=null && IntegrationDetails!='' && false">
        <a ng-show="!IntegrationDetails.PageLoad && IntegrationDetails.ShowSyncBtn"
           ng-click="CLICK_SUPPLIER_XERO_SYNC_Fn()"
           class="btn btn-w-default"
           data-toggle="tooltip"
           data-html="true"
           click-once
           data-original-title="Sync Xero Invoice">
            Sync Xero Invoice
            <i class="far fa-sync-alt"></i>
        </a>
        <a class="font-12" ng-show="!IntegrationDetails.PageLoad && !IntegrationDetails.ShowSyncBtn  "><i class="fas fa-sync fa-spin"></i> Syncing Xero Invoice</a>
    </li>
    <li class="nav-item mt-2" ng-show="IntegrationDetails!=null && IntegrationDetails!='' && false">
        <div class="col-auto ml-auto text-right font-12">(Last Sync on {{IntegrationDetails.LAST_PICKUP_DATE | utcToLocal:"dd/MMM/yyyy h:mm:ss a" }})</div>
    </li>
</ul>
<div class="tab-content" id="custom-content-below-tabContent">
    <div class="tab-pane fade " ng-class="{'show active':TAB_FLAG==1}" id="custom-content-below-home" role="tabpanel" aria-labelledby="custom-content-below-home-tab">
        <div class="row">
            <div class="col-md-2 custom-scrollbar height-77vh stick-top">
                <div class="col-md-12 px-0">
                    <form id="POForm" name="POForm" novalidate>
                        <div class="search-form-group">
                            <input type="text" ng-model="ApprovalViewSearch.SEARCH_NAME" class="form-control"
                                   placeholder="Search by Invoice#/Supplier" />
                            <button type="submit" class="btn btn-wenodo"
                                    click-once
                                    ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER(1,4,false)"></button>
                        </div>
                    </form>
                </div>
                <div class="detailed-card " ng-class="{'active':PPL.PAGING==ApprovalViewSearch.REQUEST_DETAILS.PAGING}"
                     ng-repeat="PPL in HEADERS_FOR_APPROVER_LIST"
                     ng-click="PURCHASE_REQUEST_APPROVAL_CLICK(PPL)">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <span class="po-details text-limit-1 font-12">{{PPL.CONTACT_NAME}}</span>
                                        <span class="po-supplier font-12">{{PPL.INVOICE_NUMBER}}</span>

                                    </div>
                                    <div class="col-auto"><span class="badge badge-light-blue"></span></div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="po-supplier font-10">{{PPL.REQUESTOR_NAME}}</span>
                                        <span class="po-supplier font-10">{{PPL.BRANCH_NAME}}</span>
                                    </div>
                                    <div class="col-auto text-right">
                                        <span class="po-supplier font-12 text-dark text-nowrap">
                                            {{PPL.TOTAL_AMOUNT | number :2}}  <span ng-bind-html="PPL.CURRENCY_CODE"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" ng-show="GetActionData">
                    <button type="button" ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER_LAZY_LOAD()" class="btn btn-block btn-w-default">
                        {{VIEWMORERECORD}}
                    </button>
                </div>
            </div>
            <div class="col-md-10">
                <div class="row align-content-center mn-height-66vh" ng-show="HEADERS_FOR_APPROVER_LIST.length==0">
                    <div class="col-md-12 text-center">
                        <h5 class="text-muted">
                            <span class="d-block mb-3">
                                <img src="../../../E_Content/images/sorted.png" />
                            </span>
                            Everything's sorted!
                        </h5>
                    </div>
                </div>
                <div class="card-body" ng-show="HEADERS_FOR_APPROVER_LIST.length>0">
                    <div class="row">
                        <div class="col">
                            <h6 class="po-details  font-14 text-normal">
                                Bill - <b>{{ApprovalViewSearch.REQUEST_DETAILS.INVOICE_NUMBER}}</b>  from <b>{{ApprovalViewSearch.REQUEST_DETAILS.CONTACT_NAME}}</b>.
                            </h6>
                        </div>
                        <div class="col-auto">
                            <button type="button" ng-click="VALIDATION_CLICK_FY(37)" ng-show="ApprovalData.ACTION_REQUIRED==1" class="btn btn-wenodo">Approve</button>
                            <button type="button" ng-click="VALIDATION_CLICK_FY(38)" ng-show="ApprovalData.ACTION_REQUIRED==1" class="btn btn-danger">Reject</button>
                            <button type="button" ng-click="PROJECT_POP_FY()" ng-show="false && ApprovalData.ACTION_REQUIRED==1 && CheckSubModuleAccess(136)" class="btn btn-w-default">Update Project</button>
                        </div>
                    </div>
                    <div class="row align-items-center mt-1">
                        <div class="col-auto">
                            <div class="name-badge" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">{{TextReturn(ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME)}}</div>
                            <div class="name-badge" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">{{TextReturn(ApprovalViewSearch.REQUEST_DETAILS.RAISED_BY_NAME)}}</div>
                        </div>
                        <div class="col-md-5">
                            <span class="po-details" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">By {{ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME}}</span>
                            <span class="po-details" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">By {{ApprovalViewSearch.REQUEST_DETAILS.RAISED_BY_NAME}}</span>
                            <span class="po-supplier">{{ApprovalViewSearch.REQUEST_DETAILS.REQUESTOR_EMAIL}}</span>
                            <span class="po-supplier"><span class="text-normal">Raised For {{ApprovalViewSearch.REQUEST_DETAILS.BRANCH_NAME}} </span></span>
                        </div>
                        <div class="col-md-3"><span class="po-supplier">Bill No: {{ApprovalViewSearch.REQUEST_DETAILS.INVOICE_NUMBER}}</span></div>

                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-group">
                                <label>Contact</label>
                                <span class="d-block text-bold font-14"> {{ApprovalViewSearch.REQUEST_DETAILS.CONTACT_NAME}}</span>

                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.INVOICE_DATE | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Budget Consumption Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.BUDGET_DATE ==null || ApprovalViewSearch.REQUEST_DETAILS.BUDGET_DATE =='' ?(ApprovalViewSearch.REQUEST_DETAILS.INVOICE_DATE | date): ApprovalViewSearch.REQUEST_DETAILS.BUDGET_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Due Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.DUE_DATE ==null || ApprovalViewSearch.REQUEST_DETAILS.DUE_DATE =='' ?'-': ApprovalViewSearch.REQUEST_DETAILS.DUE_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Reference</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.REFERENCE==null || ApprovalViewSearch.REQUEST_DETAILS.REFERENCE==''?'-':ApprovalViewSearch.REQUEST_DETAILS.REFERENCE}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Project Name</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.PROJECT_NAME==null || ApprovalViewSearch.REQUEST_DETAILS.PROJECT_NAME==''?'-':ApprovalViewSearch.REQUEST_DETAILS.PROJECT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Theme</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.REQUEST_DETAILS.BRANDING_THEME==null || ApprovalViewSearch.REQUEST_DETAILS.BRANDING_THEME==''?'-':ApprovalViewSearch.REQUEST_DETAILS.BRANDING_THEME}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <h5 class="card-title mt-2">Line Items</h5>
                        <div class="row">
                            <div class="col-auto " ng-show="false">
                                <div class=" mb-2">
                                    1  &nbsp;
                                    {{ApprovalViewSearch.REQUEST_DETAILS.BASE_CURRENCY_CODE}}
                                    =  {{ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE}}
                                    {{ApprovalViewSearch.REQUEST_DETAILS.PO_CURRENCY_CODE}}
                                </div>
                            </div>
                            <div class="col-auto  ml-auto ">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Currency:</label>
                                    <span class="text-bold font-13">    {{ApprovalViewSearch.REQUEST_DETAILS.CURRENCY_CODE}}</span>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Amounts are</label>
                                    <span class="text-bold font-13">{{ApprovalViewSearch.REQUEST_DETAILS.TAX_NAME}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive custom-scrollbar height-auto">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th>Line# </th>
                                        <th>Item </th>
                                        <th>Description </th>
                                        <th>Quantity </th>
                                        <th>Unit Price </th>
                                        <th>UOM </th>
                                        <th>Disc %</th>
                                        <th>GL Account </th>
                                        <th>Tax Rate </th>
                                        <th class="text-right">Tax Amount</th>
                                        <th class="text-right">Amount</th>
                                        <th ng-repeat="TrackingCat in SELECTED_OPTION_LIST_MASTER">{{TrackingCat.FIELD_NAME}}</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="PRL in ACTION_ITEM_LIST"
                                       ng-init="InitiateBillItemList(PRL,3);"
                                       on-finish-render="ngRepeatFinishedActionRender">
                                    <tr>
                                        <td> {{PRL.LINE_NO}}</td>
                                        <td> {{PRL.ITEM_NAME=="" || PRL.ITEM_NAME==null?'-':PRL.ITEM_NAME}}</td>
                                        <td>
                                            {{PRL.DESCRIPTION==null || PRL.DESCRIPTION==''?'-': PRL.DESCRIPTION | limitTo:PRL.DESCRIPTION_LIMIT_TO}}
                                            <span ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO">...</span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,1)" data-toggle="tooltip" data-html="true" data-original-title="Read More"><i class="far fa-plus"></i></span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION_LIMIT_TO>DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,2)" data-toggle="tooltip" data-html="true" data-original-title="Hide"><i class="far fa-minus"></i></span>
                                        </td>
                                        <td>{{PRL.QUANTITY}}</td>
                                        <td>{{PRL.UNIT_PRICE}}</td>
                                        <td>{{PRL.UOM_NAME}}</td>
                                        <td>{{PRL.DISCOUNT_PERCENT=="" || PRL.DISCOUNT_PERCENT==null?'-':PRL.DISCOUNT_PERCENT}}</td>
                                        <td>{{PRL.ACCOUNT_DETAILS}}</td>
                                        <td>{{PRL.TAX_RATE_DETAILS}}</td>
                                        <td class="text-right">{{PRL.TAX_AMOUNT | number:2}}</td>
                                        <td class="text-right text-nowrap pr-2">
                                            {{PRL.LINE_AMOUNT | number:2}}

                                            <span ng-show="false">
                                                {{PRL.TOTAL_SPLIT_AMOUNT= SETTING_USE_GROSS==1?(PRL.LINE_AMOUNT + (ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==2?0:PRL.TAX_AMOUNT)):ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==2? ((PRL.LINE_AMOUNT-PRL.TAX_AMOUNT)):PRL.LINE_AMOUNT}}
                                            </span>

                                        </td>
                                        <td ng-repeat="TrackingCat in PRL.SELECTED_OPTION_LIST_MASTER track by $index"
                                            ng-init="InitiateXeroTrackingBillCategories(TrackingCat, $index,PRL,3);">
                                            {{TrackingCat.OPTION_NAME}}
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Sub Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{(ACTION_ITEM_LIST | total: 'LINE_AMOUNT') | number:2}}
                                        </td>
                                        <td colspan="{{SELECTED_OPTION_LIST_MASTER.length}}" ng-if="SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed" ng-repeat="TAX in ACTION_ITEM_LIST | unique:'TAX_RATE_ID'" ng-if="TAX.TAX_RATE_ID!=null && TAX.TAX_RATE_ID!=72">
                                        <td colspan="10" class="text-right font-13">
                                            {{TAX.TAX_RATE_DETAILS}}
                                        </td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{ACTION_ITEM_LIST | filter:{TAX_RATE_ID:TAX.TAX_RATE_ID} | total:'TAX_AMOUNT' | number:2}}
                                        </td>
                                        <td colspan="{{SELECTED_OPTION_LIST_MASTER.length}}" ng-if="SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            <span ng-show="false">
                                                {{((ACTION_ITEM_LIST | total:'TAX_AMOUNT')) | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1">
                                                {{(ApprovalViewSearch.REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT= ((ACTION_ITEM_LIST | total: 'LINE_AMOUNT') + (ACTION_ITEM_LIST | total: 'TAX_AMOUNT'))) | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==2">
                                                {{(ApprovalViewSearch.REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(ACTION_ITEM_LIST | total: 'LINE_AMOUNT'))  | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==3">
                                                {{(ApprovalViewSearch.REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(ACTION_ITEM_LIST | total: 'LINE_AMOUNT'))| number:2}}
                                            </span>
                                            {{ApprovalViewSearch.REQUEST_DETAILS.CURRENCY_CODE}}
                                        </td>
                                        <td colspan="{{SELECTED_OPTION_LIST_MASTER.length}}" ng-if="SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                </tfoot>

                            </table>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="row mt-3">
                            <div class="card-header w-100" ng-show="P2P_BUDGET_MASTER_LIST.length>0">
                                <h5 class="card-title"> Actual Budget (This shows the current status of Budget) </h5>
                            </div>
                            <div class="col-md-12 mt-2" ng-show="P2P_BUDGET_MASTER_LIST.length>0">
                                <span class="po-amount">The following budgets would be affected by the approval of the Bill.</span>
                            </div>
                            <div class="col-md-12 text-center mt-2" ng-show="P2P_BUDGET_MASTER_LIST.length==0">
                                <div class="alert bg-custom-blue">{{BUDGET_TEXT_VALIDATION}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto">
                                <div class="table-responsive custom-scrollbar" style="max-height:100%">
                                    <table class="table table-head-fixed table-hover table-form table-bordered " ng-show="MONTH_PROCESS_ALL_LIST.length>0">
                                        <thead>
                                            <tr>
                                                <th width="10%">GL Account</th>
                                                <th ng-repeat="PRL in ACTION_ITEM_LIST | unique:'ACCOUNT_ID' | orderBy:['ACCOUNT_ID']"
                                                    colspan="{{(ACTION_ITEM_LIST |  filter:{ACCOUNT_ID:PRL.ACCOUNT_ID}:true).length}}">
                                                    {{PRL.ACCOUNT_DETAILS}}
                                                </th>
                                            </tr>
                                            <tr class="bg-wenodo-border">
                                                <th width="10%">Item Name</th>
                                                <th data-toggle="tooltip" data-html="true" data-original-title="{{PRL.DESCRIPTION | limitTo:250}}"
                                                    ng-repeat="PRL in ACTION_ITEM_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                    {{PRL.DESCRIPTION | limitTo:30}}
                                                </th>
                                            </tr>
                                            <tr class="bg-wenodo-border">
                                                <th width="10%">Line Amount</th>
                                                <th ng-repeat="PRL in ACTION_ITEM_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                    {{PRL.TOTAL_SPLIT_AMOUNT | number:2}}
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody ng-repeat="_m in MONTH_PROCESS_ALL_LIST">
                                            <tr>
                                                <td width="10%">{{_m.INVOICE_DATE | date}} <span ng-show="false"> {{_m.FLAG=($last?1:0)}}</span></td>
                                                <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" ng-init="_m.FLAG==1?Inittotalproccereq(_prl,_m,$index):''">
                                                    <span ng-show="false">{{_prl.INVOICE_DATE=_m.INVOICE_DATE}}</span>
                                                    {{_prl.BUDGET}}
                                                </td>
                                            </tr>
                                            <tr ng-show="$last">
                                                <td class="text-bold">
                                                    Allocated Amount
                                                </td>
                                                <td class="text-bold" ng-repeat="line in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']">
                                                    {{line.TOTAL_BUDGET}}
                                                </td>
                                            </tr>
                                            <tr ng-show="$last">
                                                <td class="text-bold">Remaining Amount</td>
                                                <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" class="text-bold" ng-class="{'text-red':(_prl.REMAINING_AMOUNT | number:2)!=0,'':(_prl.REMAINING_AMOUNT | number:2)==0}">
                                                    {{(_prl.REMAINING_AMOUNT=(ACTION_ITEM_LIST | filter:{LINE_NO:_prl.LINE_NO}:true | total:'TOTAL_SPLIT_AMOUNT') -_prl.TOTAL_BUDGET) | number:2}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <table class="table table-head-fixed table-hover" ng-show="P2P_BUDGET_MASTER_LIST.length>0">
                            <thead class="bg-wenodo-border">
                                <tr>
                                    <th>GL Account </th>
                                    <th>Period</th>
                                    <th class="text-right">Total</th>
                                    <th class="text-right">Remaining</th>
                                    <th class="text-right">Consumed</th>
                                    <th class="text-right">Booked</th>
                                    <th class="text-right">Credit Notes</th>
                                    <th class="text-right">Current</th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="BD in P2P_BUDGET_MASTER_LIST">
                                <tr>
                                    <td rowspan="3">{{BD.GLACCOUNT_NAME}}</td>
                                    <td colspan="7" ng-if="BD.DB_ACCOUNT_ID==0" class="text-align-center text-bold">There is no budget allocated in this GL Account</td>
                                </tr>
                                <tr ng-if="BD.DB_ACCOUNT_ID!=0" ng-repeat="BL in BD.BUDGET_DETAILS_LIST"
                                    ng-init="BL.CURRENT_PO_CUSTOM=0;"
                                    ng-click="VIEW_BUDGET_fn(BD,ApprovalViewSearch.REQUEST_DETAILS.BUDGET_DATE,ApprovalViewSearch.REQUEST_DETAILS.PROJECT_MASTER_ID,ApprovalViewSearch,ApprovalViewSearch,'BILL_APP_ACTION')">
                                    <td>{{BL.PERIOD}}</td>
                                    <td class="text-right">{{BL.TOTAL | number:2}}</td>
                                    <td class="text-right" ng-class="{'text-red text-bold':BL.REMAINING_AMOUNT<0}">
                                        {{(BL.REMAINING_AMOUNT=((BL.TOTAL*1)-((BL.BOOKED*1) +(BL.CURRENT_PO_CUSTOM*1)+(BL.CONSUMED*1)+(BL.MEMO*1)))) | number:2}}
                                        <span ng-show="false">
                                            {{BD.IS_OVER_BUDGET=(BL.REMAINING_AMOUNT<0 && BD.BUDGET_DETAILS_LIST.length==BL.LINE_ID?true:BD.IS_OVER_BUDGET?true:false)}}
                                        </span>
                                    </td>
                                    <td class="text-right">{{BL.CONSUMED | number :2}}</td>
                                    <td class="text-right">{{BL.BOOKED  | number :2}}</td>
                                    <td class="text-right">
                                        <span ng-show="BL.MEMO==0">{{BL.MEMO*-1 | number :2}}</span><span ng-show="BL.MEMO!=0">({{BL.MEMO*-1 | number :2}})</span>
                                    </td>
                                    <td class="text-right">
                                        <span ng-show="false">
                                            {{BL.ITEM_TAX_AMOUNT=(ACTION_ITEM_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'TAX_AMOUNT')}}
                                            {{BL.ITEM_AMOUNT= (ACTION_ITEM_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'LINE_AMOUNT') }}
                                            {{BL.TAX_AMT_TOTAL= ((NAN_Fn(BL.ITEM_TAX_AMOUNT)?0:BL.ITEM_TAX_AMOUNT) + BL.ITEM_AMOUNT*1)}}
                                        </span>
                                        <!--{{(SETTING_USE_GROSS==1?(BL.CURRENT_PO_CUSTOM=ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)):BL.CURRENT_PO_CUSTOM=(BL.ITEM_AMOUNT- (ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1?0: BL.ITEM_TAX_AMOUNT)/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)) | number:2}}-->
                                        {{SELECTED_REQ.APPROVER_STATUS_ID==38 || SELECTED_REQ.APPROVER_STATUS_ID==42 ?0:ApprovalViewSearch.REQUEST_DETAILS.SPLIT_TYPE>0? BL.CURRENT_PO_CUSTOM=(( ACCOUNT_PROCESS_ALL_ITEMDETAIL | filter:{ACCOUNT_ID:BD.ACCOUNT_ID}:true) | total : 'BUDGET')/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE: (SETTING_USE_GROSS==1?(BL.CURRENT_PO_CUSTOM=ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)):BL.CURRENT_PO_CUSTOM=(BL.ITEM_AMOUNT-(ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1?0: BL.ITEM_TAX_AMOUNT)/ApprovalViewSearch.REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)) | number:2}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alert alert-warning-red" ng-show="(P2P_BUDGET_MASTER_LIST | filter:{IS_OVER_BUDGET:true}).length">
                            <strong>Warning!</strong> This bill is going over budget.
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="card-header">
                            <h5 class="card-title mt-2" ng-show="MATCH_DIV_SHOW">Bill to PO Matching</h5>
                            <!--<h5 class="card-title" ng-show="false">Billed Status: <span class="badge badge-light-green ml-2"><i class="far fa-check"></i> Billed</span></h5>-->
                            <div class="card-tools" ng-show="false && EDIT_MATCH_BTN_SHOW">
                                <ul class="nav nav-pills">
                                    <li class="nav-item"><button type="button" class="btn btn-wenodo" ng-click="GET_PO_FOR_INVOICE_PO_MAPPING_POP()">Edit Matching</button></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pb-0">
                        <div class="row" ng-show="MATCH_DIV_SHOW">
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-success"></i> Total Bill Amount (Gross):</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-light-green"></i> Matched PO Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.REQUEST_DETAILS.MATCHED_PO_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-grey"></i> Remaining Bill Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{(ApprovalViewSearch.REQUEST_DETAILS.REMAINING_BILL_AMOUNT=(ApprovalViewSearch.REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT - ApprovalViewSearch.REQUEST_DETAILS.MATCHED_PO_AMOUNT)) | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <div class="progress-group">
                                            <div class="progress progress-sm">
                                                <span ng-show="false">{{ApprovalViewSearch.REQUEST_DETAILS.WIDTH_PERCENT=((ApprovalViewSearch.REQUEST_DETAILS.MATCHED_PO_AMOUNT) *100/(ApprovalViewSearch.REQUEST_DETAILS.TOTAL_AMOUNT))}}</span>
                                                <div class="progress-bar" ng-class="{'bg-success':(ApprovalViewSearch.REQUEST_DETAILS.WIDTH_PERCENT | number:2) <=100, 'bg-danger':(ApprovalViewSearch.REQUEST_DETAILS.WIDTH_PERCENT | number:2)>100}"
                                                     style="width: {{(ApprovalViewSearch.REQUEST_DETAILS.WIDTH_PERCENT | number:2)>100?100:(ApprovalViewSearch.REQUEST_DETAILS.WIDTH_PERCENT |number:2)}}%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':ApprovalViewSearch.REQUEST_DETAILS.ATTACHMENTS.length>0 && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0 || ApprovalViewSearch.REQUEST_DETAILS.UploadedFiles.length>0 && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null ,'fa fa-close text-red':(ApprovalViewSearch.REQUEST_DETAILS.ATTACHMENTS.length==null || ApprovalViewSearch.REQUEST_DETAILS.ATTACHMENTS.length==0) && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0  && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0 || (ApprovalViewSearch.REQUEST_DETAILS.UploadedFiles.length==0 || ApprovalViewSearch.REQUEST_DETAILS.UploadedFiles.length==null ) && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null  }">
                                    </i>  Invoice attachment.
                                </span>
                                <span class="po-amount">
                                    <span ng-show="(ACTION_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length==0">
                                        <i class="fa fa-check text-success">
                                        </i> This <b>invoice </b> is  matching with <b> purchase order</b>.
                                    </span>
                                    <span ng-show="(ACTION_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length>0">
                                        <i class="fa fa-close text-red">
                                        </i> This <b>invoice </b> is not currently matching with <span ng-show="(ACTION_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:false}).length==0">any</span> <b> purchase order</b>.
                                    </span>
                                </span>

                                <span class="po-amount" ng-show="false">

                                    <span ng-show="ApprovalViewSearch.REQUEST_DETAILS.REMAINING_BILL_AMOUNT==0">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line  </b> is  matching with   <b> purchase order line  </b>.
                                    </span>
                                    <span ng-show="ApprovalViewSearch.REQUEST_DETAILS.REMAINING_BILL_AMOUNT>0">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line </b> is not currently matching with any  <b>purchase order line </b>.
                                    </span>
                                </span>

                                <span class="po-amount">
                                    <i class=""
                                       ng-class="{'fa fa-check text-success':(ACTION_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length==ACTION_ITEM_LIST.length,'fa fa-close text-red':(ACTION_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length!=ACTION_ITEM_LIST.length}">
                                    </i> The <b> invoice line GL Account </b><span ng-show="(ACTION_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length!=ACTION_ITEM_LIST.length"> is not matching with </span>  <span ng-show="(ACTION_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length==ACTION_ITEM_LIST.length"> is<b> matching with</b> </span> <b> purchase order line GL Account</b>.
                                </span>
                                <span class="po-amount" ng-show="(ACTION_ITEM_LIST | filter:{RECEIVING_TYPE_ID:1}).length==ACTION_ITEM_LIST.length">
                                    <span ng-show="(ACTION_ITEM_LIST | total:'TAX_WITH_AMT')==(MAPPED_LIST | total:'USED_AMOUNT')">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line amount </b> matching with   <b> purchase order line amount </b>.
                                    </span>
                                    <span ng-show="(ACTION_ITEM_LIST | total:'TAX_WITH_AMT')!=(MAPPED_LIST | total:'USED_AMOUNT')">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line amount</b> is not currently matching with  any <b>purchase order line amount</b>.
                                    </span>
                                    <br />
                                    <span ng-show="(ACTION_ITEM_LIST | total:'QUANTITY')==(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line quantity </b> matching with   <b> purchase order line quantity </b>.
                                    </span>
                                    <span ng-show="(ACTION_ITEM_LIST | total:'QUANTITY')!=(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line quantity</b> is not currently matching with  any <b>purchase order line quantity</b>.
                                    </span>
                                </span>
                                <span class="po-amount" ng-show="(ACTION_ITEM_LIST | filter:{RECEIVING_TYPE_ID:2}).length==ACTION_ITEM_LIST.length">


                                    <span ng-show="((ACTION_ITEM_LIST | total:'TAX_WITH_AMT') | number:2) == (MAPPED_LIST | total:'USED_AMOUNT' | number:2)">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line amount </b> matching with   <b> purchase order line amount </b>.
                                    </span>
                                    <span ng-show="((ACTION_ITEM_LIST | total:'TAX_WITH_AMT') | number:2) !=(MAPPED_LIST | total:'USED_AMOUNT' | number:2)">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line amount</b> is not currently matching with  any <b>purchase order line amount</b>.
                                    </span>
                                </span>

                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':(ACTION_ITEM_LIST | filter:{GRN_MATCH:true}).length==ACTION_ITEM_LIST.length,'fa fa-close text-red':(ACTION_ITEM_LIST | filter:{GRN_MATCH:true}).length!=ACTION_ITEM_LIST.length}">
                                    </i> Receiving
                                    <span ng-show="(ACTION_ITEM_LIST | filter:{GRN_MATCH:true}).length!=ACTION_ITEM_LIST.length"> Match.</span>
                                    <span ng-show="(ACTION_ITEM_LIST | filter:{GRN_MATCH:true}).length==ACTION_ITEM_LIST.length"><b>Matched</b>.</span>
                                </span>
                            </div>
                            <div class="col-md-4">
                                <table class="table table-head-fixed table-bordered custom-scrollbar height-100 mb-0">
                                    <tr>
                                        <th>PO Number</th>
                                        <th>Amount + Tax</th>
                                        <th width="20%"></th>
                                    </tr>
                                    <tbody ng-repeat="POLine in  MAPPED_LIST | unique:'PO_HEADER_ID'" on-finish-render="ngRepeatFinishedMappedRender">
                                        <tr>
                                            <td>{{POLine.PO_NUMBER}}</td>
                                            <td> {{(POLine.PO_TOTAL_AMOUNT=(MAPPED_LIST | filter:{PO_HEADER_ID:POLine.PO_HEADER_ID} | total:'USED_AMOUNT')) | number:2}} </td>
                                            <td class="text-center">
                                                <i class="fa fa-eye text-blue cursor-pointer mr-2" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER)"></i>
                                                <i class="fa fa-download text-blue cursor-pointer" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER,1)">
                                                </i>
                                            </td>
                                        </tr>

                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td>Total</td>
                                            <td>{{(ApprovalViewSearch.REQUEST_DETAILS.MATCHED_PO_AMOUNT=(MAPPED_LIST | unique:'PO_HEADER_ID' | total:'PO_TOTAL_AMOUNT')) | number:2  }}</td>
                                            <td></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <span ng-show="false">{{INVOICE_PO_MAPPING.length>0?ApprovalViewSearch.REQUEST_DETAILS.HIDE_SHOW_MATCH_PO=true:''}}</span>

                        <div class="card-header border-5" ng-show="MATCH_DIV_SHOW">
                            <h5 class="card-title mt-1">Line Matching  </h5>
                            <div class="card-tools ml-auto">

                                <ul class="nav nav-pills" ng-show="false">
                                    <li class="nav-item">
                                        <span class="bigcheck ">
                                            <label class="bigcheck" for="USEINVOICE">
                                                <input type="checkbox"
                                                       class="bigcheck"
                                                       ng-change="UPD_USE_INVOICE_GL_FLAG()"
                                                       ng-model="ApprovalViewSearch.REQUEST_DETAILS.USE_INVOICE_GL"
                                                       id="USEINVOICE">
                                                <span class="bigcheck-target"></span>
                                            </label>
                                            Use Invoice GL Account
                                        </span>
                                    </li>
                                    <li class="nav-item">
                                        <button type="button"
                                                ng-show="EDIT_MATCH_BTN_SHOW"
                                                ng-click="INS_UPD_INVOICE_PO_MAPPING(1)"
                                                class="btn btn-wenodo mx-2">
                                            Save
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-body border-5" id="LINE_MATCHING" ng-show="MATCH_DIV_SHOW">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-head-fixed table-bordered">
                                        <thead class="bg-wenodo-border">
                                            <tr>
                                                <td colspan="5" class="text-center text-bold bg-light-green">Invoice Line</td>
                                                <td>Status</td>
                                                <td colspan="11" class="text-center text-bold bg-light-blue">PO Match Line</td>
                                            </tr>
                                            <tr>
                                                <th>Line# </th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th>Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th></th>
                                                <th>PO#</th>
                                                <th>Line#</th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th> Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th>Method</th>
                                                <th>Mapping Qty</th>
                                                <th>Mapping Amt.</th>
                                                <th>Received</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody ng-repeat="ITEM_LINE in  ACTION_ITEM_LIST" ng-init="InitiateInvoice(ITEM_LINE)"
                                               on-finish-render="ngRepeatFinishedRender">
                                            <tr>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.LINE_NO}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.ITEM_NAME}}<BR />{{ITEM_LINE.DESCRIPTION}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">
                                                    <span ng-class="{'text-red text-bold':ITEM_LINE.MATCHES.length!=(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length}">  {{ITEM_LINE.ACCOUNT_DETAILS}}</span>
                                                    <span ng-show="false && ITEM_LINE.MATCHES.length!=(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length">

                                                        <i class="fa fa-sync" ng-click="POP_SYNC_GL_ACCOUNT_Fn(ITEM_LINE)"></i>
                                                    </span>
                                                </td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.QUANTITY | number :2 }}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}" class="text-right">
                                                    <span class="text-nowrap">
                                                        <!--{{(ITEM_LINE.TAX_WITH_AMT = ITEM_LINE.LINE_AMOUNT + ITEM_LINE.TAX_AMOUNT) | number :2 }}-->
                                                        {{(ITEM_LINE.TAX_WITH_AMT = ITEM_LINE.LINE_AMOUNT +  (ApprovalViewSearch.REQUEST_DETAILS.TAX_TYPE==1?ITEM_LINE.TAX_AMOUNT:0)) | number :2 }}
                                                    </span>
                                                </td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">
                                                    {{ITEM_LINE.IS_DROP_DOWN_SHOW==false && ITEM_LINE.MATCHES.length==(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length?'Matched':'UnMatched'}}
                                                </td>
                                                <td colspan="11" ng-show="ITEM_LINE.IS_DROP_DOWN_SHOW">
                                                    <a class="form-control text-limitations custom-dropdown" ng-class="{'c-form-control':SHOW_BTN}" data-toggle="dropdown">
                                                        <span id="dropdown_title">Select a line to match</span>
                                                        <i class="fa fa-sort float-right mt-1"></i>
                                                    </a>
                                                    <ul ID="divNewNotifications" class="dropdown-menu dropdown-menu-arrow text-xs custom-scrollbar mx-w-80">
                                                        <li class="p-0">
                                                            <table class="table table-head-fixed table-hover table-bordered mb-0">
                                                                <thead class="bg-wenodo-border">
                                                                    <tr>
                                                                        <th>PO#</th>
                                                                        <th>Item Name</th>
                                                                        <th>Description</th>
                                                                        <th>GL Account</th>
                                                                        <th>Qty.</th>
                                                                        <th class="text-right">Amount + Tax</th>
                                                                        <th>Receiving Method</th>
                                                                        <th>Received</th>
                                                                        <th>Open to Invoice</th>
                                                                        <th>Current</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody ng-repeat="PO_LINE in  PO_LINES_FOR_INVOICE_PO_MAPPING | orderBy:PO_LINE_ID"
                                                                       ng-click="MATCHED_PO_LINE_FY(PO_LINE,$index,ITEM_LINE)"
                                                                       ng-show="(PO_LINE.RECEIVING_TYPE_ID!=1 && PO_LINE.CURRENT_AMOUNT!=PO_LINE.REMAINING_AMOUNT)
                                                                       || (PO_LINE.RECEIVING_TYPE_ID==1 && PO_LINE.REMAINING_QTY!=PO_LINE.CURRENT_QTY)">
                                                                    <tr>
                                                                        <td>
                                                                            {{PO_LINE.PO_NUMBER}}
                                                                        </td>
                                                                        <td>{{PO_LINE.ITEM_NAME}}</td>
                                                                        <td>{{PO_LINE.DESCRIPTION}}</td>
                                                                        <td>{{PO_LINE.ACCOUNT_DETAILS}}</td>
                                                                        <td>{{PO_LINE.QUANTITY | number :2 }}</td>
                                                                        <td class="text-right"><span class="text-nowrap">{{PO_LINE.LINE_AMOUNT | number :2 }} </span></td>
                                                                        <td>{{PO_LINE.RECEIVING_TYPE_ID==1?'Quantity':'Amount'}}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.RECEIVED_QTY:PO_LINE.RECEIVED_AMOUNT) | number :2 }}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.REMAINING_QTY:PO_LINE.REMAINING_AMOUNT) | number :2 }}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.CURRENT_QTY:PO_LINE.CURRENT_AMOUNT) | number :2 }}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="POLine in ITEM_LINE.MATCHES">
                                                <td>{{POLine.PO_NUMBER}}</td>
                                                <td>{{POLine.LINE_NO}} </td>
                                                <td>{{POLine.ITEM_NAME}}<br /> {{POLine.DESCRIPTION}}</td>
                                                <td>{{POLine.ACCOUNT_DETAILS}}</td>
                                                <td>{{POLine.QUANTITY | number :2 }}</td>
                                                <td class="text-right"><span class="text-nowrap">{{POLine.LINE_AMOUNT | number :2 }} </span></td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?'Quantity':'Amount' }}</td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?(POLine.USED_QTY | number :2) :'-'  }}</td>
                                                <td>{{POLine.USED_AMOUNT | number :2 }}</td>
                                                <td>
                                                    <span ng-class="{'text-red':ITEM_LINE.QUANTITY>POLine.RECEIVED_QTY}" ng-show="POLine.RECEIVING_TYPE_ID==1">
                                                        {{POLine.RECEIVED_QTY | number :2 }}
                                                    </span><span ng-class="{'text-red':ITEM_LINE.LINE_AMOUNT>POLine.RECEIVED_AMOUNT}" ng-show="POLine.RECEIVING_TYPE_ID==2">
                                                        {{POLine.RECEIVED_AMOUNT | number :2 }}
                                                    </span>
                                                </td>
                                                <td colspan="2">
                                                    <i class="far fa-undo" ng-show="false && POLine.TABLE_ID==null && EDIT_MATCH_BTN_SHOW" ng-click="UNDO_MATCH_FY(ITEM_LINE, POLine,0,$index)"></i>
                                                    <i class="fa fa-trash text-red" ng-show="false && POLine.TABLE_ID>0 && EDIT_MATCH_BTN_SHOW" ng-click="DELETE_INS_UPD_INVOICE_PO_MAPPING(ITEM_LINE, 2, POLine,1,$index)"
                                                       data-toggle="tooltip" data-html="true" data-original-title="Delete"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3">
                                    <h5 class="card-title mt-1">Invoice Attachment </h5>
                                    <!--<button type="button" ng-click="VIEW_INVOICE_DETAIL(ApprovalViewSearch.REQUEST_DETAILS,2,1)"
                    class="btn btn-sm btn-transparent-wenodo border"
                    data-toggle="tooltip"
                    data-html="true"
                    data-original-title="View Invoice">
                <i class="fa fa-eye"></i>
            </button>-->
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">
                                            <div class="upload-files-container">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="INVOICE"
                                                                   ng-model="ApprovalViewSearch.REQUEST_DETAILS.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'INVOICE',5,ApprovalViewSearch.REQUEST_DETAILS,33,'1','INVOICE',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-show="ApprovalViewSearch.REQUEST_DETAILS.ATTACHMENTS.length==0 && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="file-block"
                                                 ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0"
                                                 ng-repeat="Attachment in ApprovalViewSearch.REQUEST_DETAILS.ATTACHMENTS">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a ng-click="DOWNLOAD_INVOICE_ATTACHMENT(Attachment);">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{Attachment.FileName}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer"
                                                      ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null"
                                                      ng-click="REMOVE_INVOICE_IN_FILTE($index,file)">
                                                    <i class="fa fa-times"></i>
                                                </span>
                                            </div>

                                            <div class="file-block" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null" ng-repeat="file in ApprovalViewSearch.REQUEST_DETAILS.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-show="ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null" ng-click="REMOVE_INVOICE_IN_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">PO Attachment </h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(PO_ATTACHMENT_IN_INVOICE.UploadedFiles.length==0 || PO_ATTACHMENT_IN_INVOICE.UploadedFiles==null) && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-files-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="PO_ATTACHMENT_IN_INVOICE"
                                                                   ng-model="PO_ATTACHMENT_IN_INVOICE.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'PO_ATTACHMENT_IN_INVOICE',5,PO_ATTACHMENT_IN_INVOICE,37,'1','PO',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in PO_ATTACHMENT_IN_INVOICE.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_PO_IN_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">GRN Attachment</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(GRN_ATTACHMENT.UploadedFiles.length==0 || GRN_ATTACHMENT.UploadedFiles==null) && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-files-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="GRN_ATTACHMENT"
                                                                   ng-model="GRN_ATTACHMENT.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'GRN_ATTACHMENT',5,GRN_ATTACHMENT,38,'1','PO_GRN',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in GRN_ATTACHMENT.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_GRN_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">Other</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(OTHER_ATTACHMENT.UploadedFiles.length==0 || OTHER_ATTACHMENT.UploadedFiles==null) && ApprovalViewSearch.REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-files-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="OTHER_ATTACHMENT"
                                                                   ng-model="OTHER_ATTACHMENT.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'OTHER_ATTACHMENT',5,OTHER_ATTACHMENT,39,'1','OTHER_BILL',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in OTHER_ATTACHMENT.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_OTHER_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="card-header border-5"><h5 class="card-title mt-1">Note for Approvers</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            {{ApprovalViewSearch.REQUEST_DETAILS.SUBMISSION_COMMENTS==null || ApprovalViewSearch.REQUEST_DETAILS.SUBMISSION_COMMENTS=='' ?'-':ApprovalViewSearch.REQUEST_DETAILS.SUBMISSION_COMMENTS}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border-bottom"></div>
                        <div class="card-header mt-3"><h5 class="card-title">Approval Workflow</h5></div>
                        <div class="row align-items-center mt-3 mb-5">
                            <div class="col d-flex custom-scrollbar horizontal_scroll" style="min-height:350px">
                                <div class="col-md-2" ng-repeat-start="APL in APPROVAL_HEADERS_CHAIN_LIST  | unique:'GROUP_SORT_SEQUENCE'"
                                     ng-init="InitiateApprover(APL)">
                                    <div class="row pl-2">
                                        <span ng-show="false">{{APL.APL_INDEX=$index+1}}</span>
                                        <div class="col-md-12 pl-1">
                                            <button type="button" class="btn btn-w-default w-100" ng-class="{'active':APL.STEP_ACTIVE==1, 'active-approved':APL.SEQUENCE_APPROVED}">
                                                {{APL.GROUP_NAME}}
                                                <!--<span class="float-right text-success" ng-show="APL.ACTION_REQUIRED==1">Active</span>-->
                                            </button>
                                        </div>
                                        <span class="w-100 z-index-997">
                                            Approval condition: {{APL.ANY_ALL_FLAG==0?'All':'Any'}} <span ng-show="APL.ANY_ALL_FLAG>0"> of {{APL.ANY_ALL_FLAG}}</span>
                                        </span>
                                        <div class="col-auto pl-1 mt-2"
                                             ng-repeat="User in APPROVAL_HEADERS_CHAIN_LIST | filter:{GROUP_SORT_SEQUENCE:APL.GROUP_SORT_SEQUENCE}:true"
                                             ng-init="InitiateNameApprover(User,APL)">
                                            <div class="sec-center mt-1">
                                                <span ng-show="false"> {{ User.ACTION_REQUIRED==1?APL.STEP_ACTIVE=true :''}}</span>

                                                <input class="dropdown" type="checkbox" id="dropdown{{$index}}{{APL.APL_INDEX}}" name="dropdown" />
                                                <label class="name-badge-short cursor-pointer"
                                                       ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-action-required':User.ACTION_REQUIRED==1 && User.STATUS_ID==39,'name-badge-pending':User.ACTION_REQUIRED!=1 && User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}"
                                                       for="dropdown{{$index}}{{APL.APL_INDEX}}">{{User.SHORT_NAME}}</label>
                                                <div class="section-dropdown">
                                                    <div class="card-header">
                                                        <div class="name-badge d-inline">{{User.SHORT_NAME}}</div>
                                                        <span class="mt-2 ml-2">{{User.APPROVER_NAME}}</span>
                                                        <span class="badge  text-white float-right"
                                                              ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-pending':User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}">{{User.STATUS_NAME}}</span>
                                                    </div>
                                                    <div class="card-body">
                                                        <ul class="products-list product-list-in-card ">
                                                            <li class="item pt-0">
                                                                <div class="product-info ml-0">
                                                                    <div class="product-title">
                                                                        {{User.APPROVER_EMAIL}}
                                                                        <span class="d-block" ng-if="User.LAST_ACTION_TAKEN_DATE!=null">{{User.LAST_ACTION_TAKEN_DATE | toDate | date}}, {{User.LAST_ACTION_TAKEN_DATE | toDate | date:'H:mm'}}</span>
                                                                    </div>

                                                                </div>
                                                            </li>
                                                            <li class="item">
                                                                <div class="product-info ml-0 font-12 custom-scrollbar" style="max-height:100px">
                                                                    {{User.COMMENTS==null?'-':User.COMMENTS}}
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-auto" ng-if="APL.showborder && !$last" ng-repeat-end><i class="far fa-angle-right text-grey mt-1"></i></div>
                                <div class="col-md-2"
                                     ng-show="APPROVAL_HEADERS_CHAIN_LIST.length==0 && ApprovalViewSearch.REQUEST_DETAILS.THREE_WAY_MATCH_AUTO_APPROVED">
                                    3 way matched for verified bill.
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade " ng-class="{'show active':TAB_FLAG==2}" id="custom-content-below-home" role="tabpanel" aria-labelledby="custom-content-below-home-tab">
        <div class="row">
            <div class="col-md-2 custom-scrollbar height-77vh stick-top">
                <div class="col-md-12 px-0">
                    <form id="ProcSearchForm" name="ProcSearchForm" novalidate autocomplete="off">
                        <div class="search-form-group">
                            <input type="text" ng-model="ApprovalViewSearch.PROCESS_SEARCH_NAME" class="form-control" placeholder="Search by Invoice#/Supplier" />
                            <button type="submit" class="btn btn-wenodo"
                                    click-once
                                    ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER_PROCESS(1,4,false)"></button>
                        </div>
                    </form>
                </div>
                <div class="detailed-card"
                     ng-class="{'active':PPL.PAGING==ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PAGING}"
                     ng-repeat="PPL in PURCHASE_REQUESTS_PROCESS_LIST"
                     ng-click="PURCHASE_REQUEST_PROCESSED_APPROVAL_CLICK(PPL)"
                     on-finish-render="ngRepeatFinishedRender">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <span class="po-details text-limit-1 font-12">{{PPL.CONTACT_NAME}}</span>
                                        <span class="po-supplier text-limit-1 font-12">
                                            {{PPL.INVOICE_NUMBER}}

                                            <span class="circle-badge"
                                                  data-toggle="tooltip"
                                                  data-html="true"
                                                  data-original-title="Paid"
                                                  ng-show="PPL.INVOICE_HEADER_STATUS_ID==83">P</span>
                                        </span>
                                    </div>
                                    <div class="col-auto"><span class="badge" ng-class="{'badge-light-green':PPL.APPROVER_STATUS_ID==37,'name-badge-auto-approved text-white':PPL.APPROVER_STATUS_ID==41,'badge-danger':PPL.APPROVER_STATUS_ID==38 || PPL.APPROVER_STATUS_ID==42}">{{PPL.APPROVER_STATUS_NAME}}</span></div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="po-supplier font-10">{{PPL.REQUESTOR_NAME}}</span>
                                        <span class="po-supplier font-10">{{PPL.BRANCH_NAME}}</span>
                                    </div>
                                    <div class="col-auto text-right">
                                        <span class="po-supplier font-12 text-dark text-nowrap">
                                            {{PPL.TOTAL_AMOUNT | number :2}}  <span ng-bind-html="PPL.CURRENCY_CODE"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-md-12" ng-show="GetProcessData">
                    <button type="button" ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER_PROCESS_LAZY_LOAD()" class="btn btn-block btn-w-default">
                        {{VIEWMORERECORD}}
                    </button>
                </div>
            </div>
            <div class="col-md-10">
                <div class="row align-content-center mn-height-66vh" ng-show="PURCHASE_REQUESTS_PROCESS_LIST.length==0">
                    <div class="col-md-12 text-center">
                        <h5 class="text-muted">
                            <span class="d-block mb-3">
                                <img src="../../../E_Content/images/sorted.png" />
                            </span>
                            Everything's sorted!
                        </h5>
                    </div>
                </div>
                <div class="card-body" ng-show="PURCHASE_REQUESTS_PROCESS_LIST.length>0">
                    <div class="row">
                        <div class="col">
                            <h6 class="po-details  font-14 text-normal">
                                Bill - <b>{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INVOICE_NUMBER}}</b>  from <b>{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CONTACT_NAME}}</b>.
                            </h6>
                        </div>
                    </div>
                    <div class="col-auto"></div>
                    <div class="row align-items-center mt-1">
                        <div class="col-auto">
                            <div class="name-badge" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">{{TextReturn(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME)}}</div>
                            <div class="name-badge" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">{{TextReturn(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.RAISED_BY_NAME)}}</div>
                        </div>
                        <div class="col-md-5">
                            <span class="po-details" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">By {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME}}</span>
                            <span class="po-details" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">By {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.RAISED_BY_NAME}}</span>
                            <span class="po-supplier">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REQUESTOR_EMAIL}}</span>
                            <span class="po-supplier"><span class="text-normal">Raised For {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANCH_NAME}} </span></span>
                        </div>
                        <div class="col-md-3"><span class="po-supplier">Bill No: {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INVOICE_NUMBER}}</span></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-group">
                                <label>Contact</label>
                                <span class="d-block text-bold font-14"> {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CONTACT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INVOICE_DATE | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Budget Consumption Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BUDGET_DATE ==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BUDGET_DATE =='' ?(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INVOICE_DATE | date): ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BUDGET_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Due Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DUE_DATE ==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DUE_DATE =='' ?'-': ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DUE_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Reference</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Project Name</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Theme</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME}}</span>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="col-md-12 mt-3">
                        <h5 class="card-title mt-2">Line Items</h5>
                        <div class="row">
                            <div class="col-auto " ng-show="false">
                                <div class=" mb-2">
                                    1  &nbsp;
                                    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_CURRENCY_CODE}}
                                    =  {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE}}
                                    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_CURRENCY_CODE}}
                                </div>
                            </div>
                            <div class="col-auto  ml-auto ">
                                <div class="form-inline mb-2">
                                    <label class="mr-2"> Currency:</label>
                                    <span class="text-bold font-13">    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CURRENCY_CODE}}</span>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Amounts are</label>
                                    <span class="text-bold font-13">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_NAME}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive custom-scrollbar height-auto">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th>Line#</th>
                                        <th width="15%">Item </th>
                                        <th width="25%">Description </th>
                                        <th>Quantity </th>
                                        <th>Unit Price </th>
                                        <th>UOM </th>
                                        <th>Disc %</th>
                                        <th>GL Account </th>
                                        <th>Tax Rate </th>
                                        <th class="text-right">Tax Amount</th>
                                        <th class="text-right">Amount</th>
                                        <th ng-repeat="TrackingCat in XERO_TRACKING_CATEGORIES track by $index">{{TrackingCat.FIELD_NAME}}</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="PRL in PROCESS_REQUEST_ITEMS_LIST" ng-init="InitiateItemList(PRL);" on-finish-render="ngRepeatFinishedProcessRender">
                                    <tr>
                                        <td>{{PRL.LINE_NO}}</td>
                                        <td> {{PRL.ITEM_NAME=="" || PRL.ITEM_NAME==null?'-':PRL.ITEM_NAME}}</td>
                                        <td>
                                            {{PRL.DESCRIPTION==null || PRL.DESCRIPTION==''?'-': PRL.DESCRIPTION | limitTo:PRL.DESCRIPTION_LIMIT_TO}}
                                            <span ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO">...</span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,1)" data-toggle="tooltip" data-html="true" data-original-title="Read More"><i class="far fa-plus"></i></span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION_LIMIT_TO>DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,2)" data-toggle="tooltip" data-html="true" data-original-title="Hide"><i class="far fa-minus"></i></span>
                                        </td>
                                        <td>{{PRL.QUANTITY | number:2}}</td>
                                        <td>{{PRL.UNIT_PRICE | number:2}}</td>
                                        <td>{{PRL.UOM_NAME==null || PRL.UOM_NAME==''?'-':PRL.UOM_NAME}}</td>
                                        <td>{{PRL.DISCOUNT_PERCENT==null || PRL.DISCOUNT_PERCENT==''?'-':PRL.DISCOUNT_PERCENT}}</td>
                                        <td>{{PRL.ACCOUNT_DETAILS}}</td>
                                        <td> {{PRL.TAX_RATE_DETAILS}}</td>
                                        <td class="text-right">{{PRL.TAX_AMOUNT | number:2}}</td>
                                        <td class="text-right text-nowrap pr-2">
                                            {{PRL.LINE_AMOUNT | number:2}}
                                            <span ng-show="false">
                                                {{PRL.TOTAL_SPLIT_AMOUNT= SETTING_USE_GROSS==1?(PRL.LINE_AMOUNT + (ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==2?0:PRL.TAX_AMOUNT)):ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==2? ((PRL.LINE_AMOUNT-PRL.TAX_AMOUNT)):PRL.LINE_AMOUNT}}
                                            </span>

                                        </td>
                                        <td ng-repeat="TrackingCat in PRL.XERO_TRACKING_CATEGORIES track by $index" ng-init="InitiateXeroTrackingCategories(TrackingCat, $index,PRL,2);">
                                            {{TrackingCat.SELECTED_CATEGORY_OPTION.OPTION_NAME}}
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Sub Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{(PROCESS_REQUEST_ITEMS_LIST | total: 'LINE_AMOUNT') | number:2}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed" ng-repeat="TAX in PROCESS_REQUEST_ITEMS_LIST | unique:'TAX_RATE_ID'" ng-if="TAX.TAX_RATE_ID!=null && TAX.TAX_RATE_ID!=72">
                                        <td colspan="10" class="text-right font-13">{{TAX.TAX_RATE_DETAILS}}</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{PROCESS_REQUEST_ITEMS_LIST | filter:{TAX_RATE_ID:TAX.TAX_RATE_ID} | total:'TAX_AMOUNT' | number:2}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Total  </td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1">
                                                {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=((PROCESS_REQUEST_ITEMS_LIST | total: 'LINE_AMOUNT') + (PROCESS_REQUEST_ITEMS_LIST | total: 'TAX_AMOUNT')) | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==2">
                                                {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(PROCESS_REQUEST_ITEMS_LIST | total: 'LINE_AMOUNT')  | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==3">
                                                {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(PROCESS_REQUEST_ITEMS_LIST | total: 'LINE_AMOUNT') | number:2}}
                                            </span>
                                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CURRENCY_CODE}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-16"></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="card-header w-100" ng-click="SHOW_HIDE_BUDGET(ApprovalViewSearch.PROCESS_REQUEST_DETAILS)">
                            <h5 class="card-title mt-1">
                                Budget <span ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0">({{ApprovalViewSearch.BUDGET_NAME}})</span>
                            </h5>
                        </div>
                        <div class="col-md-12 mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0">
                            <!--<span class="po-amount">The following budgets would be affected by the approval of the request.</span>-->
                        </div>
                        <div class="col-md-12 text-center mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length==0">
                            <div class="alert bg-custom-blue">{{BUDGET_TEXT_VALIDATION}}</div>
                        </div>

                        <div class="row">
                            <div class="col-auto">
                                <div class="table-responsive custom-scrollbar" style="max-height:100%">
                                    <table class="table table-head-fixed table-hover table-form table-bordered " ng-show="MONTH_PROCESS_ALL_LIST.length>0">
                                        <thead>
                                            <tr>
                                                <th width="10%">GL Account</th>
                                                <th ng-repeat="PRL in PROCESS_REQUEST_ITEMS_LIST | unique:'ACCOUNT_ID' | orderBy:['ACCOUNT_ID']"
                                                    colspan="{{(PROCESS_REQUEST_ITEMS_LIST |  filter:{ACCOUNT_ID:PRL.ACCOUNT_ID}:true).length}}">
                                                    {{PRL.ACCOUNT_DETAILS}}
                                                </th>
                                            </tr>
                                            <tr class="bg-wenodo-border">
                                                <th width="10%">Item Name</th>
                                                <th data-toggle="tooltip" data-html="true" data-original-title="{{PRL.DESCRIPTION | limitTo:250}}"
                                                    ng-repeat="PRL in PROCESS_REQUEST_ITEMS_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                    {{PRL.DESCRIPTION | limitTo:30}}
                                                </th>
                                            </tr>
                                            <tr class="bg-wenodo-border">
                                                <th width="10%">Line Amount</th>
                                                <th ng-repeat="PRL in PROCESS_REQUEST_ITEMS_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                    {{PRL.TOTAL_SPLIT_AMOUNT | number:2}}
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody ng-repeat="_m in MONTH_PROCESS_ALL_LIST">
                                            <tr>
                                                <td width="10%">{{_m.INVOICE_DATE | date}} <span ng-show="false"> {{_m.FLAG=($last?1:0)}}</span></td>
                                                <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" ng-init="_m.FLAG==1?Inittotalproccereq(_prl,_m,$index):''">
                                                    <span ng-show="false">{{_prl.INVOICE_DATE=_m.INVOICE_DATE}}</span>
                                                    {{_prl.BUDGET}}
                                                </td>
                                            </tr>
                                            <tr ng-show="$last">
                                                <td class="text-bold">
                                                    Allocated Amount
                                                </td>
                                                <td class="text-bold" ng-repeat="line in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']">
                                                    {{line.TOTAL_BUDGET}}
                                                </td>
                                            </tr>
                                            <tr ng-show="$last">
                                                <td class="text-bold">Remaining Amount</td>
                                                <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" class="text-bold" ng-class="{'text-red':(_prl.REMAINING_AMOUNT | number:2)!=0,'':(_prl.REMAINING_AMOUNT | number:2)==0}">
                                                    {{(_prl.REMAINING_AMOUNT=(PROCESS_REQUEST_ITEMS_LIST | filter:{LINE_NO:_prl.LINE_NO}:true | total:'TOTAL_SPLIT_AMOUNT') -_prl.TOTAL_BUDGET) | number:2}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="card-body p-0 mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0">
                            <div class="table-responsive custom-scrollbar">
                                <table class="table table-head-fixed table-hover">
                                    <thead class="bg-wenodo-border">
                                        <tr>
                                            <th>GL Account </th>
                                            <th>Period</th>
                                            <th class="text-right">Total</th>
                                            <th class="text-right">Remaining</th>
                                            <th class="text-right">Consumed</th>
                                            <th class="text-right">Booked</th>
                                            <th class="text-right">Credit Notes</th>
                                            <th class="text-right" ng-show="false">Current Amt.</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="BD in P2P_PROCESS_BUDGET_MASTER_LIST">
                                        <tr>
                                            <td rowspan="3">{{BD.GLACCOUNT_NAME}}</td>
                                            <td colspan="7" ng-if="BD.DB_ACCOUNT_ID==0" class="text-align-center text-bold">There is no budget allocated in this GL Account</td>
                                        </tr>
                                        <tr ng-if="BD.DB_ACCOUNT_ID!=0" ng-repeat="BL in BD.BUDGET_DETAILS_LIST"
                                            ng-init="BL.CURRENT_PO_CUSTOM=0;"
                                            ng-click="VIEW_BUDGET_fn(BD,ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BUDGET_DATE,ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_MASTER_ID,ApprovalViewSearch,ApprovalViewSearch,'BILL_PROC_ACTION')">
                                            <td>{{BL.PERIOD}}</td>
                                            <td class="text-right">{{BL.TOTAL | number:2}}</td>
                                            <td class="text-right">
                                                <span ng-show="false">
                                                    {{BD.IS_OVER_BUDGET=(BL.REMAINING_AMOUNT<0 && BD.BUDGET_DETAILS_LIST.length==BL.LINE_ID?true:BD.IS_OVER_BUDGET?true:false)}}
                                                </span>
                                                <span ng-class="{'text-red text-bold':BL.REMAINING_AMOUNT<0}">
                                                    {{(BL.REMAINING_AMOUNT=((BL.TOTAL*1)-((BL.BOOKED*1) +(BL.CURRENT_PO_CUSTOM*1)+(BL.CONSUMED*1)+(BL.MEMO*1)))) | number:2}}
                                                </span>
                                            </td>
                                            <td class="text-right">{{BL.CONSUMED | number :2}}</td>
                                            <td class="text-right">{{BL.BOOKED  | number :2}}</td>

                                            <td class="text-right">
                                                <span ng-show="BL.MEMO==0">{{BL.MEMO*-1 | number :2}}</span><span ng-show="BL.MEMO!=0">({{BL.MEMO*-1 | number :2}})</span>
                                            </td>
                                            <td class="text-right" ng-show="false">
                                                <span ng-show="false">
                                                    {{BL.ITEM_TAX_AMOUNT=(PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'TAX_AMOUNT')}}
                                                    {{BL.ITEM_AMOUNT= (PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'LINE_AMOUNT') }}
                                                    {{BL.TAX_AMT_TOTAL= ((NAN_Fn(BL.ITEM_TAX_AMOUNT)?0:BL.ITEM_TAX_AMOUNT) + BL.ITEM_AMOUNT*1)}}
                                                </span>
                                                {{SELECTED_REQ_PROC.APPROVER_STATUS_ID==38 || SELECTED_REQ_PROC.APPROVER_STATUS_ID==42 || TAB_FLAG==2 ?0:ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SPLIT_TYPE>0? BL.CURRENT_PO_CUSTOM=(( ACCOUNT_PROCESS_ALL_ITEMDETAIL | filter:{ACCOUNT_ID:BD.ACCOUNT_ID}:true) | total : 'BUDGET')/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE: (SETTING_USE_GROSS==1?(BL.CURRENT_PO_CUSTOM=ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)):BL.CURRENT_PO_CUSTOM=(BL.ITEM_AMOUNT-(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1?0: BL.ITEM_TAX_AMOUNT)/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)) | number:2}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alert alert-warning-red" ng-show="(P2P_PROCESS_BUDGET_MASTER_LIST | filter:{IS_OVER_BUDGET:true}).length">
                            <strong>Warning!</strong> This bill is going over budget.
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="card-header">
                            <h5 class="card-title mt-2">Bill to PO Matching</h5>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-success"></i> Total Bill Amount (Gross):</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-light-green"></i> Matched PO Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.MATCHED_PO_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-grey"></i> Remaining Bill Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REMAINING_BILL_AMOUNT=(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT - ApprovalViewSearch.PROCESS_REQUEST_DETAILS.MATCHED_PO_AMOUNT)) | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <div class="progress-group">
                                            <div class="progress progress-sm">
                                                <span ng-show="false">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.WIDTH_PERCENT=(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.MATCHED_PO_AMOUNT*100/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TOTAL_AMOUNT)}}</span>
                                                <div class="progress-bar" ng-class="{'bg-success':(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.WIDTH_PERCENT | number:2) <=100 , 'bg-danger':(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.WIDTH_PERCENT|number:2)>100}" style="width: {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.WIDTH_PERCENT>100?100:ApprovalViewSearch.PROCESS_REQUEST_DETAILS.WIDTH_PERCENT}}%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4"></div>
                            <div class="col-md-4" ng-if="false">
                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length>0,'fa fa-close text-red':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length==0 }">
                                    </i>  Invoice attachment.
                                </span>
                                <span class="po-amount">
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length==0">
                                        <i class="fa fa-check text-success">
                                        </i> This <b>invoice </b> is  matching with <b> purchase order</b>.
                                    </span>
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length>0">
                                        <i class="fa fa-close text-red">
                                        </i> This <b>invoice </b> is not currently matching with <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{IS_DROP_DOWN_SHOW:false}).length==0">any</span> <b> purchase order</b>.
                                    </span>
                                </span>
                                <span class="po-amount" ng-show="false">
                                    <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REMAINING_BILL_AMOUNT==0">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line  </b> is  matching with   <b> purchase order line  </b>.
                                    </span>
                                    <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REMAINING_BILL_AMOUNT>0">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line </b> is not currently matching with any  <b>purchase order line </b>.
                                    </span>
                                </span>
                                <span class="po-amount">
                                    <i class=""
                                       ng-class="{'fa fa-check text-success':(PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_MATCH:true}).length==PROCESS_REQUEST_ITEMS_LIST.length,'fa fa-close text-red':(PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_MATCH:true}).length!=PROCESS_REQUEST_ITEMS_LIST.length}">
                                    </i> The <b> invoice line GL Account </b><span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_MATCH:true}).length!=PROCESS_REQUEST_ITEMS_LIST.length"> is not matching with </span>  <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_MATCH:true}).length==PROCESS_REQUEST_ITEMS_LIST.length"> is<b> matching with</b> </span> <b> purchase order line GL Account</b>.
                                </span>
                                <span class="po-amount">
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | total:'QUANTITY')==(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line quantity </b> matching with   <b> purchase order line quantity </b>.
                                    </span>
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | total:'QUANTITY')!=(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line quantity</b> is not currently matching with  any <b>purchase order line quantity</b>.
                                    </span>
                                </span>
                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':(PROCESS_REQUEST_ITEMS_LIST | filter:{GRN_MATCH:true}).length==PROCESS_REQUEST_ITEMS_LIST.length,'fa fa-close text-red':(PROCESS_REQUEST_ITEMS_LIST | filter:{GRN_MATCH:true}).length!=PROCESS_REQUEST_ITEMS_LIST.length}">
                                    </i> Receiving
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{GRN_MATCH:true}).length!=PROCESS_REQUEST_ITEMS_LIST.length"> Match.</span>
                                    <span ng-show="(PROCESS_REQUEST_ITEMS_LIST | filter:{GRN_MATCH:true}).length==PROCESS_REQUEST_ITEMS_LIST.length"><b>Matched</b>.</span>
                                </span>
                            </div>
                            <div class="col-md-4">
                                <table class="table table-head-fixed table-bordered custom-scrollbar height-100 mb-0">
                                    <tr>
                                        <th>PO Number</th>
                                        <th>Amount + Tax</th>
                                        <th width="20%"></th>
                                    </tr>
                                    <tbody ng-repeat="POLine in  PROCE_INVOICE_PO_MAPPING | unique:'PO_HEADER_ID'">
                                        <tr>
                                            <td>{{POLine.PO_NUMBER}}</td>
                                            <td> {{(POLine.PO_TOTAL_AMOUNT=(PROCE_INVOICE_PO_MAPPING | filter:{PO_HEADER_ID:POLine.PO_HEADER_ID} | total:'USED_AMOUNT')) | number:2}} </td>
                                            <td class="text-center">
                                                <i class="fa fa-eye text-blue cursor-pointer mr-2" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER)"></i>
                                                <i class="fa fa-download text-blue cursor-pointer" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER,1)">
                                                </i>
                                            </td>
                                        </tr>

                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td>Total</td>
                                            <td>{{(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.MATCHED_PO_AMOUNT=(PROCE_INVOICE_PO_MAPPING | unique:'PO_HEADER_ID' | total:'PO_TOTAL_AMOUNT')) | number:2  }}</td>
                                            <td></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <span ng-show="false">{{PROCE_INVOICE_PO_MAPPING.length>0?ApprovalViewSearch.PROCESS_REQUEST_DETAILS.HIDE_SHOW_MATCH_PO=true:''}}</span>
                        <div class="card-header border-5"><h5 class="card-title mt-1">Line Matched</h5></div>
                        <div class="card-body border-5">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-head-fixed table-bordered">
                                        <thead class="bg-wenodo-border">
                                            <tr>
                                                <td colspan="5" class="text-center text-bold bg-light-green">Invoice Line</td>
                                                <td colspan="11" class="text-center text-bold bg-light-blue">PO Match Line</td>
                                            </tr>
                                            <tr>
                                                <th>Line# </th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th>Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th>PO#</th>
                                                <th>Line#</th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th> Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th>Method</th>
                                                <th>Mapping Qty</th>
                                                <th>Mapping Amt.</th>
                                                <th>Received</th>

                                            </tr>
                                        </thead>
                                        <tbody ng-repeat="ITEM_LINE in  PROCESS_REQUEST_ITEMS_LIST"
                                               ng-init="InitiateProcessInvoice(ITEM_LINE)"
                                               on-finish-render="ngRepeatFinishedRender">
                                            <tr>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.LINE_NO}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.ITEM_NAME}}<br />{{ITEM_LINE.DESCRIPTION}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.ACCOUNT_DETAILS}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.QUANTITY | number :2 }}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}" class="text-right"><span class="text-nowrap">
                            <!--{{ITEM_LINE.LINE_AMOUNT  + ITEM_LINE.TAX_AMOUNT | number :2 }}-->
                                    {{(ITEM_LINE.TAX_WITH_AMT = ITEM_LINE.LINE_AMOUNT +  (ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1?ITEM_LINE.TAX_AMOUNT:0)) | number :2 }}
                                        </span>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="POLine in ITEM_LINE.MATCHES">
                                                <td>{{POLine.PO_NUMBER}}</td>
                                                <td>{{POLine.LINE_NO}} </td>
                                                <td>{{POLine.ITEM_NAME}}<br /> {{POLine.DESCRIPTION}}</td>
                                                <td>{{POLine.ACCOUNT_DETAILS}}</td>
                                                <td>{{POLine.QUANTITY | number :2 }}</td>
                                                <td class="text-right"><span class="text-nowrap">{{POLine.LINE_AMOUNT | number :2 }} </span></td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?'Quantity':'Amount' }}</td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?(POLine.USED_QTY | number :2) :'-'  }}</td>
                                                <td>{{POLine.USED_AMOUNT  | number :2 }}</td>
                                                <td>
                                                    <span ng-show="POLine.RECEIVING_TYPE_ID==1">{{POLine.RECEIVED_QTY | number :2 }}</span>
                                                    <span ng-show="POLine.RECEIVING_TYPE_ID==2">{{POLine.RECEIVED_AMOUNT | number :2 }}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card-header">Invoice Attachment</div>
                            <div class="text-sm p-3" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length==0 && ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">No Attachment</div>

                            <div class="file-block" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ATTACHMENTS.length==0 && ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                - No Attachments
                            </div>
                            <div class="file-block"
                                 ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0"
                                 ng-repeat="Attachment in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ATTACHMENTS">
                                <div class="file-info">
                                    <i class="far fa-file-alt file-icon"></i>
                                    <span class="file-name">
                                        <a ng-click="DOWNLOAD_INVOICE_ATTACHMENT(Attachment);">
                                            <span class="text-limit-1 font-10 cursor-pointer">{{Attachment.FileName}} </span>
                                        </a>
                                    </span>
                                </div>
                                <span class="remove-file-icon cursor-pointer"
                                      ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null"
                                      ng-click="REMOVE_INVOICE_IN_FILTE($index,file)">
                                    <i class="fa fa-times"></i>
                                </span>
                            </div>


                            <div class="file-block" ng-repeat="file in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles">
                                <div class="file-info">
                                    <i class="far fa-file-alt file-icon"></i>
                                    <span class="file-name">
                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                        </a>
                                    </span>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-6">
                            <div class="card-header">PO Attachment</div>
                            <div class="text-sm p-3" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_ATTACHMENT_IN_INVOICE.UploadedFiles.length==0">No Attachment</div>
                            <div class="file-block" ng-repeat="file in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_ATTACHMENT_IN_INVOICE.UploadedFiles">
                                <div class="file-info">
                                    <i class="far fa-file-alt file-icon"></i>
                                    <span class="file-name">
                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                        </a>
                                    </span>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-6">
                            <div class="card-header">GRN Attachment</div>
                            <div class="text-sm p-3" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.GRN_ATTACHMENT.UploadedFiles.length==0">No Attachment</div>
                            <div class="file-block" ng-repeat="file in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.GRN_ATTACHMENT.UploadedFiles">
                                <div class="file-info">
                                    <i class="far fa-file-alt file-icon"></i>
                                    <span class="file-name">
                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                        </a>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card-header">Other Attachment</div>
                            <div class="text-sm p-3" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.OTHER_ATTACHMENT.UploadedFiles.length==0">No Attachment</div>
                            <div class="file-block" ng-repeat="file in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.OTHER_ATTACHMENT.UploadedFiles">
                                <div class="file-info">
                                    <i class="far fa-file-alt file-icon"></i>
                                    <span class="file-name">
                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}"
                                           download="{{file.SERVER_FILE_NAME}}">
                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                        </a>

                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="card-header border-5"><h5 class="card-title mt-1">Note for Approvers</h5></div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SUBMISSION_COMMENTS==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SUBMISSION_COMMENTS=='' ?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SUBMISSION_COMMENTS}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card-header"><h5 class="card-title">Approval Workflow</h5></div>
                    <div class="row align-items-center mt-3 mb-5">
                        <div class="col d-flex custom-scrollbar horizontal_scroll" style="min-height:350px">
                            <div class="col-md-2" ng-repeat-start="APL in PROCESSED_APPROVAL_HEADERS_CHAIN_LIST  | unique:'GROUP_SORT_SEQUENCE'" ng-init="InitiateApprover(APL)">
                                <div class="row pl-2">
                                    <span ng-show="false">{{APL.APL_INDEX=$index+1}}</span>
                                    <div class="col-md-12 pl-1">
                                        <button type="button" class="btn btn-w-default w-100" ng-class="{'active':APL.STEP_ACTIVE==1, 'active-approved':APL.SEQUENCE_APPROVED}">
                                            {{APL.GROUP_NAME}}
                                            <!--<span class="float-right text-success" ng-show="APL.ACTION_REQUIRED==1">Active</span>-->
                                        </button>
                                    </div>
                                    <span class="w-100 z-index-997">
                                        Approval condition: {{APL.ANY_ALL_FLAG==0?'All':'Any'}} <span ng-show="APL.ANY_ALL_FLAG>0"> {{APL.ANY_ALL_FLAG}}</span>
                                    </span>
                                    <div class="col-auto pl-1 mt-2"
                                         ng-repeat="User in PROCESSED_APPROVAL_HEADERS_CHAIN_LIST | filter:{GROUP_SORT_SEQUENCE:APL.GROUP_SORT_SEQUENCE}:true"
                                         ng-init="InitiateNameApprover(User,APL)">
                                        <div class="sec-center mt-1">
                                            <span ng-show="false"> {{ User.ACTION_REQUIRED==1?APL.STEP_ACTIVE=true :''}}</span>
                                            <input class="dropdown" type="checkbox" id="Prodropdown{{$index}}{{APL.APL_INDEX}}" name="dropdown" />
                                            <label class="name-badge-short cursor-pointer"
                                                   ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-action-required':User.ACTION_REQUIRED==1 &&  User.STATUS_ID==39,'name-badge-pending':User.ACTION_REQUIRED!=1 && User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}"
                                                   for="Prodropdown{{$index}}{{APL.APL_INDEX}}">{{User.SHORT_NAME}}</label>
                                            <div class="section-dropdown">
                                                <div class="card-header">
                                                    <div class="name-badge d-inline">{{User.SHORT_NAME}} </div>
                                                    <span class="mt-2 ml-2">{{User.APPROVER_NAME}}</span>
                                                    <span class="badge  text-white float-right"
                                                          ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-pending':User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}">{{User.STATUS_NAME}}</span>
                                                </div>
                                                <div class="card-body">
                                                    <ul class="products-list product-list-in-card">
                                                        <li class="item pt-0">
                                                            <div class="product-info ml-0">
                                                                <div class="product-title">
                                                                    {{User.APPROVER_EMAIL}}
                                                                    <span class="d-block" ng-if="User.LAST_ACTION_TAKEN_DATE!=null">{{User.LAST_ACTION_TAKEN_DATE | toDate | date}}, {{User.LAST_ACTION_TAKEN_DATE | toDate | date:'H:mm'}}</span>
                                                                </div>
                                                            </div>

                                                        </li>
                                                        <li class="item">
                                                            <div class="product-info ml-0 font-12 custom-scrollbar" style="max-height:100px">
                                                                {{User.COMMENTS==null?'-':User.COMMENTS}}
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-auto" ng-if="APL.showborder && !$last" ng-repeat-end><i class="far fa-angle-right text-grey mt-1"></i></div>
                            <div class="col-md-2"
                                 ng-show="PROCESSED_APPROVAL_HEADERS_CHAIN_LIST.length==0 && ApprovalViewSearch.PROCESS_REQUEST_DETAILS.THREE_WAY_MATCH_AUTO_APPROVED">
                                3 way matched for verified bill.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade " ng-class="{'show active':TAB_FLAG==3}" id="custom-content-below-home" role="tabpanel" aria-labelledby="custom-content-below-home-tab">
        <div class="row">
            <div class="col-md-2 custom-scrollbar height-77vh stick-top">
                <div class="col-md-12 px-0">
                    <form id="SearchforceForm" name="SearchforceForm" novalidate>
                        <div class="search-form-group">
                            <input type="text" ng-model="ApprovalViewSearch.SEARCH_NAME_ALL" class="form-control" placeholder="Search by Invoice#/Supplier" />
                            <button type="submit"
                                    class="btn btn-wenodo"
                                    click-once
                                    ng-click="GET_APPROVAL_HEADERS_FOR_ADMIN(1,4,false)"></button>
                        </div>
                    </form>
                </div>
                <div class="detailed-card " ng-class="{'active':PPL.PAGING==ApprovalViewSearch.ALL_REQUEST_DETAILS.PAGING}"
                     ng-repeat="PPL in HEADERS_FOR_APPROVER_ADMIN_LIST"
                     ng-click="PURCHASE_REQUEST_ALL_APPROVAL_ADMIN_CLICK(PPL)" on-finish-render="ngRepeatFinishedRender">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col text-limit-1">
                                        <span class="po-details  font-12">{{PPL.CONTACT_NAME}}</span>
                                        <span class="po-supplier font-12">
                                            {{PPL.INVOICE_NUMBER}}
                                            <span class="circle-badge"
                                                  data-toggle="tooltip"
                                                  data-html="true"
                                                  data-original-title="Paid"
                                                  ng-show="PPL.INVOICE_HEADER_STATUS_ID==83">P</span>
                                        </span>

                                    </div>
                                    <div class="col-auto">
                                        <span class="badge"
                                              ng-class="{'badge-light-grey':PPL.OVERALL_STATUS_ID==39,'badge-light-green':PPL.OVERALL_STATUS_ID==37,'name-badge-auto-approved text-white':PPL.OVERALL_STATUS_ID==41,'badge-danger':PPL.OVERALL_STATUS_ID==38 || PPL.OVERALL_STATUS_ID==42}">{{PPL.OVERALL_STATUS_NAME}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="po-supplier font-10">{{PPL.REQUESTOR_NAME}}</span>
                                        <span class="po-supplier font-10">{{PPL.BRANCH_NAME}}</span>
                                    </div>
                                    <div class="col-auto text-right">
                                        <span class="po-supplier font-12 text-dark text-nowrap">
                                            {{PPL.TOTAL_AMOUNT | number :2}}  <span ng-bind-html="PPL.CURRENCY_CODE"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" ng-show="GetAllData">
                    <button type="button" ng-click="GET_APPROVAL_HEADERS_FOR_ADMIN_LAZY_LOAD()" class="btn btn-block btn-w-default">
                        {{VIEWMORERECORD}}
                    </button>
                </div>
            </div>
            <div class="col-md-10">
                <div class="row align-content-center mn-height-66vh" ng-show="HEADERS_FOR_APPROVER_ADMIN_LIST.length==0">
                    <div class="col-md-12 text-center">
                        <h5 class="text-muted">
                            <span class="d-block mb-3">
                                <img src="../../../E_Content/images/sorted.png" />
                            </span>
                            Everything's sorted!
                        </h5>
                    </div>
                </div>
                <div class="card-body" ng-show="HEADERS_FOR_APPROVER_ADMIN_LIST.length>0">
                    <div class="row">
                        <div class="col">
                            <h6 class="po-details  font-14 text-normal">
                                Bill - <b>{{ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_NUMBER}}</b>  from <b>{{ApprovalViewSearch.ALL_REQUEST_DETAILS.CONTACT_NAME}}</b>.
                            </h6>
                        </div>
                        <div class="col-auto">
                            <button type="button" ng-click="VALIDATION_FORCE_CLICK_FY(37,SELECTED_REQ_ALL)" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.OVERALL_STATUS_ID==39 && CheckSubModuleAccess(143)" class="btn btn-wenodo">Force Approve</button>
                            <button type="button" ng-click="VALIDATION_FORCE_CLICK_FY(38,SELECTED_REQ_ALL)" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.OVERALL_STATUS_ID==39 && CheckSubModuleAccess(143)" class="btn btn-danger">Force Reject</button>
                            <button type="button" ng-click="PROJECT_POP_FY(3)"
                                    ng-show="false && CheckSubModuleAccess(136) && ApprovalViewSearch.ALL_REQUEST_DETAILS.OVERALL_STATUS_ID==39"
                                    class="btn btn-w-default">
                                Update Project
                            </button>
                        </div>
                    </div>
                    <div class="row align-items-center mt-1">
                        <div class="col-auto">
                            <div class="name-badge" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">{{TextReturn(ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME)}}</div>
                            <div class="name-badge" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">{{TextReturn(ApprovalViewSearch.ALL_REQUEST_DETAILS.RAISED_BY_NAME)}}</div>
                        </div>
                        <div class="col-md-5">
                            <span class="po-details" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">By {{ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_NAME}}</span>
                            <span class="po-details" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">By {{ApprovalViewSearch.ALL_REQUEST_DETAILS.RAISED_BY_NAME}}</span>
                            <span class="po-supplier">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.REQUESTOR_EMAIL}}</span>
                            <span class="po-supplier"><span class="text-normal">Raised For {{ApprovalViewSearch.ALL_REQUEST_DETAILS.BRANCH_NAME}} </span></span>
                        </div>
                        <div class="col-md-3"><span class="po-supplier">Bill No: {{ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_NUMBER}}</span></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-group">
                                <label>Contact</label>
                                <span class="d-block text-bold font-14"> {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CONTACT_NAME}}</span>

                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_DATE | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Budget Consumption Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.BUDGET_DATE ==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.BUDGET_DATE =='' ?(ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_DATE | date): ApprovalViewSearch.ALL_REQUEST_DETAILS.BUDGET_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Due Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.DUE_DATE ==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.DUE_DATE =='' ?'-': ApprovalViewSearch.ALL_REQUEST_DETAILS.DUE_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Reference</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.REFERENCE==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.REFERENCE==''?'-':ApprovalViewSearch.ALL_REQUEST_DETAILS.REFERENCE}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Project Name</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.PROJECT_NAME==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.PROJECT_NAME==''?'-':ApprovalViewSearch.ALL_REQUEST_DETAILS.PROJECT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Theme</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.BRANDING_THEME==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.BRANDING_THEME==''?'-':ApprovalViewSearch.ALL_REQUEST_DETAILS.BRANDING_THEME}}</span>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="col-md-12 mt-3">
                        <h5 class="card-title mt-2">Line Items</h5>
                        <div class="row">
                            <div class="col-auto " ng-show="false">
                                <div class=" mb-2">
                                    1  &nbsp;
                                    {{ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_CURRENCY_CODE}}
                                    =  {{ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE}}
                                    {{ApprovalViewSearch.ALL_REQUEST_DETAILS.PO_CURRENCY_CODE}}
                                </div>
                            </div>
                            <div class="col-auto  ml-auto ">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Currency:</label>
                                    <span class="text-bold font-13">    {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CURRENCY_CODE}}</span>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Amounts are</label>
                                    <span class="text-bold font-13">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_NAME}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive custom-scrollbar height-auto">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th>Line# {{ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE}} </th>
                                        <th>Item </th>
                                        <th>Description </th>
                                        <th>Quantity </th>
                                        <th>Unit Price </th>
                                        <th>UOM </th>
                                        <th>Disc %</th>
                                        <th>GL Account </th>
                                        <th>Tax Rate </th>
                                        <th class="text-right">Tax Amount</th>
                                        <th class="text-right">Amount</th>

                                        <th ng-repeat="TrackingCat in ALL_SELECTED_OPTION_LIST_MASTER">{{TrackingCat.FIELD_NAME}}</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="PRL in ALL_ITEM_LIST"
                                       ng-init="InitiateBillItemList(PRL,3);"
                                       on-finish-render="ngRepeatFinishedPoAllRender">
                                    <tr>
                                        <td> {{PRL.LINE_NO}}</td>
                                        <td> {{PRL.ITEM_NAME=="" || PRL.ITEM_NAME==null?'-':PRL.ITEM_NAME}}</td>
                                        <td>
                                            {{PRL.DESCRIPTION==null || PRL.DESCRIPTION==''?'-': PRL.DESCRIPTION | limitTo:PRL.DESCRIPTION_LIMIT_TO}}
                                            <span ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO">...</span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,1)" data-toggle="tooltip" data-html="true" data-original-title="Read More"><i class="far fa-plus"></i></span>
                                            <span class="btn btn-xs btn-transparent-wenodo" ng-show="PRL.DESCRIPTION_LIMIT_TO>DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,2)" data-toggle="tooltip" data-html="true" data-original-title="Hide"><i class="far fa-minus"></i></span>
                                        </td>
                                        <td>{{PRL.QUANTITY}}</td>
                                        <td>{{PRL.UNIT_PRICE}}</td>
                                        <td>{{PRL.UOM_NAME}}</td>
                                        <td>{{PRL.DISCOUNT_PERCENT=="" || PRL.DISCOUNT_PERCENT==null?'-':PRL.DISCOUNT_PERCENT}}</td>
                                        <td>{{PRL.ACCOUNT_DETAILS}}</td>
                                        <td>{{PRL.TAX_RATE_DETAILS}}</td>
                                        <td class="text-right">{{PRL.TAX_AMOUNT | number:2}}</td>
                                        <td class="text-right text-nowrap pr-2">
                                            {{PRL.LINE_AMOUNT | number:2}}
                                            <span ng-show="false">
                                                {{PRL.TOTAL_SPLIT_AMOUNT= SETTING_USE_GROSS==1?(PRL.LINE_AMOUNT + (ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==2?0:PRL.TAX_AMOUNT)):ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==2? ((PRL.LINE_AMOUNT-PRL.TAX_AMOUNT)):PRL.LINE_AMOUNT}}
                                            </span>
                                        </td>
                                        <td ng-repeat="TrackingCat in PRL.ALL_SELECTED_OPTION_LIST_MASTER track by $index"
                                            ng-init="InitiateXeroTrackingBillCategories(TrackingCat, $index,PRL,3);">
                                            {{TrackingCat.OPTION_NAME}}
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Sub Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">{{(ALL_ITEM_LIST | total: 'LINE_AMOUNT') | number:2}}</td>
                                        <td colspan="{{ALL_SELECTED_OPTION_LIST_MASTER.length}}" ng-if="ALL_SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed" ng-repeat="TAX in ALL_ITEM_LIST | unique:'TAX_RATE_ID'" ng-if="TAX.TAX_RATE_ID!=null && TAX.TAX_RATE_ID!=72">
                                        <td colspan="10" class="text-right font-13">
                                            {{TAX.TAX_RATE_DETAILS}}
                                        </td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{ALL_ITEM_LIST | filter:{TAX_RATE_ID:TAX.TAX_RATE_ID} | total:'TAX_AMOUNT' | number:2}}
                                        </td>
                                        <td colspan="{{ALL_SELECTED_OPTION_LIST_MASTER.length}}" ng-if="ALL_SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="10" class="text-right font-13">Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            <span ng-show="false">{{(ALL_ITEM_LIST | total:'TAX_AMOUNT') | number:2}}</span>
                                            <span ng-if="ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1">
                                                {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT= ((ALL_ITEM_LIST | total: 'LINE_AMOUNT') + (ALL_ITEM_LIST | total: 'TAX_AMOUNT')) | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==2">
                                                {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(ALL_ITEM_LIST | total: 'LINE_AMOUNT')  | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==3">
                                                {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT=(ALL_ITEM_LIST | total: 'LINE_AMOUNT') | number:2}}
                                            </span>
                                            {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CURRENCY_CODE}}
                                        </td>
                                        <td colspan="{{ALL_SELECTED_OPTION_LIST_MASTER.length}}" ng-if="ALL_SELECTED_OPTION_LIST_MASTER.length>0" class="text-right font-13"></td>
                                    </tr>
                                </tfoot>

                            </table>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="card-header w-100" ng-click="SHOW_HIDE_BUDGET(ApprovalViewSearch.ALL_REQUEST_DETAILS)">
                            <h5 class="card-title mt-1">
                                Actual Budget (This shows the current status of Budget) <span ng-show="P2P_ALL_BUDGET_MASTER_LIST.length>0">({{ApprovalViewSearch.BUDGET_NAME}})</span>
                            </h5>
                        </div>
                        <div class="card-body p-0 mt-2">
                            <div class="col-md-12 mt-2" ng-show="P2P_ALL_BUDGET_MASTER_LIST.length>0">
                                <span class="po-amount">The following budgets would be affected by the approval of the Bill.</span>
                            </div>
                            <div class="col-md-12 text-center mt-2" ng-show="P2P_ALL_BUDGET_MASTER_LIST.length==0">
                                <div class="alert bg-custom-blue">{{BUDGET_TEXT_VALIDATION}}</div>
                            </div>
                            <div class="row">
                                <div class="col-auto">
                                    <div class="table-responsive custom-scrollbar" style="max-height:100%">
                                        <table class="table table-head-fixed table-hover table-form table-bordered " ng-show="MONTH_PROCESS_ALL_LIST.length>0">
                                            <thead>
                                                <tr>
                                                    <th width="10%">GL Account</th>
                                                    <th ng-repeat="PRL in ALL_ITEM_LIST | unique:'ACCOUNT_ID' | orderBy:['ACCOUNT_ID']"
                                                        colspan="{{(ALL_ITEM_LIST |  filter:{ACCOUNT_ID:PRL.ACCOUNT_ID}:true).length}}">
                                                        {{PRL.ACCOUNT_DETAILS}}
                                                    </th>
                                                </tr>
                                                <tr class="bg-wenodo-border">
                                                    <th width="10%">Item Name</th>
                                                    <th data-toggle="tooltip" data-html="true" data-original-title="{{PRL.DESCRIPTION | limitTo:250}}"
                                                        ng-repeat="PRL in ALL_ITEM_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                        {{PRL.DESCRIPTION | limitTo:30}}
                                                    </th>
                                                </tr>
                                                <tr class="bg-wenodo-border">
                                                    <th width="10%">Line Amount</th>
                                                    <th ng-repeat="PRL in ALL_ITEM_LIST | orderBy: ['ACCOUNT_ID'] ">
                                                        {{PRL.TOTAL_SPLIT_AMOUNT | number:2}}
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody ng-repeat="_m in MONTH_PROCESS_ALL_LIST">
                                                <tr>
                                                    <td width="10%">{{_m.INVOICE_DATE | date}} <span ng-show="false"> {{_m.FLAG=($last?1:0)}}</span></td>
                                                    <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" ng-init="_m.FLAG==1?Inittotalproccereq(_prl,_m,$index):''">
                                                        <span ng-show="false">{{_prl.INVOICE_DATE=_m.INVOICE_DATE}}</span>
                                                        {{_prl.BUDGET}}
                                                    </td>
                                                </tr>
                                                <tr ng-show="$last">
                                                    <td class="text-bold">
                                                        Allocated Amount
                                                    </td>
                                                    <td class="text-bold" ng-repeat="line in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']">
                                                        {{line.TOTAL_BUDGET}}
                                                    </td>
                                                </tr>
                                                <tr ng-show="$last">
                                                    <td class="text-bold">Remaining Amount</td>
                                                    <td ng-repeat="_prl in _m.ITEM_LIST | orderBy: ['ACCOUNT_ID']" class="text-bold" ng-class="{'text-red':(_prl.REMAINING_AMOUNT | number:2)!=0,'':(_prl.REMAINING_AMOUNT | number:2)==0}">
                                                        {{(_prl.REMAINING_AMOUNT=(ALL_ITEM_LIST | filter:{LINE_NO:_prl.LINE_NO}:true | total:'TOTAL_SPLIT_AMOUNT') -_prl.TOTAL_BUDGET) | number:2}}
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="table-responsive custom-scrollbar" ng-show="P2P_ALL_BUDGET_MASTER_LIST.length>0">
                                <table class="table table-head-fixed table-hover">
                                    <thead class="bg-wenodo-border">
                                        <tr>
                                            <th>GL Account </th>
                                            <th>Period</th>
                                            <th class="text-right">Total</th>
                                            <th class="text-right">Remaining</th>
                                            <th class="text-right">Consumed</th>
                                            <th class="text-right">Booked</th>
                                            <th class="text-right">Credit Notes</th>
                                            <th class="text-right" ng-show="TAB_FLAG==3 && SELECTED_REQ_ALL.INVOICE_HEADER_STATUS_ID==79">Current Amt.</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="BD in P2P_ALL_BUDGET_MASTER_LIST">
                                        <tr>
                                            <td rowspan="3">{{BD.GLACCOUNT_NAME}}</td>
                                            <td colspan="7" ng-if="BD.DB_ACCOUNT_ID==0" class="text-align-center text-bold">There is no budget allocated in this GL Account</td>
                                        </tr>
                                        <tr ng-if="BD.DB_ACCOUNT_ID!=0" ng-repeat="BL in BD.BUDGET_DETAILS_LIST"
                                            ng-init="BL.CURRENT_PO_CUSTOM=0;"
                                            ng-click="VIEW_BUDGET_fn(BD,ApprovalViewSearch.ALL_REQUEST_DETAILS.BUDGET_DATE,ApprovalViewSearch.ALL_REQUEST_DETAILS.PROJECT_MASTER_ID,ApprovalViewSearch,ApprovalViewSearch,'BILL_ALL_ACTION')">
                                            <td>{{BL.PERIOD}}</td>
                                            <td class="text-right">{{BL.TOTAL | number:2}}</td>
                                            <td class="text-right">
                                                <span ng-show="false">
                                                    {{BD.IS_OVER_BUDGET=(BL.REMAINING_AMOUNT<0 && BD.BUDGET_DETAILS_LIST.length==BL.LINE_ID?true:BD.IS_OVER_BUDGET?true:false)}}
                                                </span>
                                                <span ng-class="{'text-red text-bold':BL.REMAINING_AMOUNT<0}">
                                                    {{(BL.REMAINING_AMOUNT=((BL.TOTAL*1)-((BL.BOOKED*1) +(BL.CURRENT_PO_CUSTOM*1)+(BL.CONSUMED*1)+(BL.MEMO*1)))) | number:2}}
                                                </span>
                                            </td>
                                            <td class="text-right">{{BL.CONSUMED | number :2}}</td>
                                            <td class="text-right">{{BL.BOOKED  | number :2}}</td>
                                            <td class="text-right">
                                                <span ng-show="BL.MEMO==0">{{BL.MEMO*-1 | number :2}}</span><span ng-show="BL.MEMO!=0">({{BL.MEMO*-1 | number :2}})</span>
                                            </td>
                                            <td class="text-right" ng-show="TAB_FLAG==3 && SELECTED_REQ_ALL.INVOICE_HEADER_STATUS_ID==79">
                                                <span ng-show="false">
                                                    {{BL.ITEM_TAX_AMOUNT=(ALL_ITEM_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'TAX_AMOUNT')}}
                                                    {{BL.ITEM_AMOUNT= (ALL_ITEM_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'LINE_AMOUNT') }}
                                                    {{BL.TAX_AMT_TOTAL= ((NAN_Fn(BL.ITEM_TAX_AMOUNT)?0:BL.ITEM_TAX_AMOUNT) + BL.ITEM_AMOUNT*1)}}
                                                </span>
                                                <!--<span> {{SELECTED_REQ_ALL.OVERALL_STATUS_ID==38 || SELECTED_REQ_ALL.OVERALL_STATUS_ID==42 ?0: (SETTING_USE_GROSS==1?(BL.CURRENT_PO_CUSTOM=ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)):BL.CURRENT_PO_CUSTOM=(BL.ITEM_AMOUNT-(ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1?0:BL.ITEM_TAX_AMOUNT)/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)) | number:2}}</span>-->
                                                {{SELECTED_REQ_ALL.OVERALL_STATUS_ID==38 || SELECTED_REQ_ALL.OVERALL_STATUS_ID==42 || TAB_FLAG==3 && SELECTED_REQ_ALL.INVOICE_HEADER_STATUS_ID!=79?0:ApprovalViewSearch.ALL_REQUEST_DETAILS.SPLIT_TYPE>0? BL.CURRENT_PO_CUSTOM=(( ACCOUNT_PROCESS_ALL_ITEMDETAIL | filter:{ACCOUNT_ID:BD.ACCOUNT_ID}:true) | total : 'BUDGET')/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE: (SETTING_USE_GROSS==1?(BL.CURRENT_PO_CUSTOM=ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)):BL.CURRENT_PO_CUSTOM=(BL.ITEM_AMOUNT-(ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1?0: BL.ITEM_TAX_AMOUNT)/ApprovalViewSearch.ALL_REQUEST_DETAILS.BASE_TO_INVOICE_CONVERSION_RATE)) | number:2}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alert alert-warning-red" ng-show="(P2P_ALL_BUDGET_MASTER_LIST | filter:{IS_OVER_BUDGET:true}).length">
                            <strong>Warning!</strong> This bill is going over budget.
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="card-header">
                            <h5 class="card-title mt-2" ng-show="MATCH_DIV_SHOW">Bill to PO Matching</h5>
                            <!--<h5 class="card-title" ng-show="false">Billed Status: <span class="badge badge-light-green ml-2"><i class="far fa-check"></i> Billed</span></h5>-->
                            <div class="card-tools" ng-show="false && EDIT_MATCH_BTN_SHOW && SELECTED_REQ_ALL.OVERALL_STATUS_ID!=37">
                                <ul class="nav nav-pills">
                                    <li class="nav-item"><button type="button" class="btn btn-wenodo" ng-click="GET_PO_FOR_INVOICE_PO_MAPPING_POP()">Edit Matching</button></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pb-0">
                        <div class="row" ng-show="MATCH_DIV_SHOW">
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-success"></i> Total Bill Amount (Gross):</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.ALL_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-light-green"></i> Matched PO Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{ApprovalViewSearch.ALL_REQUEST_DETAILS.MATCHED_PO_AMOUNT | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-10"><span class="text-muted font-12"><i class="fas fa-square text-grey"></i> Remaining Bill Amount:</span> </div>
                                    <div class="col-md-2 text-right">
                                        <span class="text-dark text-bold font-12">
                                            {{(ApprovalViewSearch.ALL_REQUEST_DETAILS.REMAINING_BILL_AMOUNT=(ApprovalViewSearch.ALL_REQUEST_DETAILS.CUSTOM_TOTAL_AMOUNT - ApprovalViewSearch.ALL_REQUEST_DETAILS.MATCHED_PO_AMOUNT)) | number :2}}
                                        </span>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <div class="progress-group">
                                            <div class="progress progress-sm">
                                                <span ng-show="false">{{ApprovalViewSearch.ALL_REQUEST_DETAILS.WIDTH_PERCENT=(ApprovalViewSearch.ALL_REQUEST_DETAILS.MATCHED_PO_AMOUNT*100/ApprovalViewSearch.ALL_REQUEST_DETAILS.TOTAL_AMOUNT)}}</span>
                                                <div class="progress-bar" ng-class="{'bg-success':(ApprovalViewSearch.ALL_REQUEST_DETAILS.WIDTH_PERCENT  | number:2)<=100, 'bg-danger':(ApprovalViewSearch.ALL_REQUEST_DETAILS.WIDTH_PERCENT | number:2)>100 }" style="width: {{ApprovalViewSearch.ALL_REQUEST_DETAILS.WIDTH_PERCENT>100?100:ApprovalViewSearch.ALL_REQUEST_DETAILS.WIDTH_PERCENT}}%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':ApprovalViewSearch.ALL_REQUEST_DETAILS.ATTACHMENTS.length>0 && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0 || ApprovalViewSearch.ALL_REQUEST_DETAILS.UploadedFiles.length>0 && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null ,'fa fa-close text-red':(ApprovalViewSearch.ALL_REQUEST_DETAILS.ATTACHMENTS.length==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.ATTACHMENTS.length==0) && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0  && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0 || (ApprovalViewSearch.ALL_REQUEST_DETAILS.UploadedFiles.length==0 || ApprovalViewSearch.ALL_REQUEST_DETAILS.UploadedFiles.length==null )&& ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null  }">
                                    </i>  Invoice attachment.
                                </span>
                                <span class="po-amount">
                                    <span ng-show="(ALL_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length==0">
                                        <i class="fa fa-check text-success">
                                        </i> This <b>invoice </b> is  matching with <b> purchase order</b>.
                                    </span>
                                    <span ng-show="(ALL_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:true}).length>0">
                                        <i class="fa fa-close text-red">
                                        </i> This <b>invoice </b> is not currently matching with <span ng-show="(ALL_ITEM_LIST | filter:{IS_DROP_DOWN_SHOW:false}).length==0">any</span> <b> purchase order</b>.
                                    </span>
                                </span>

                                <span class="po-amount">
                                    <span ng-show="(ApprovalViewSearch.ALL_REQUEST_DETAILS.REMAINING_BILL_AMOUNT | number:2) ==0">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line  </b> is  matching with   <b> purchase order line  </b>.
                                    </span>
                                    <span ng-show="(ApprovalViewSearch.ALL_REQUEST_DETAILS.REMAINING_BILL_AMOUNT | number:2)>0">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line </b> is not currently matching with any  <b>purchase order line </b>.
                                    </span>
                                </span>
                                <span class="po-amount">
                                    <i class=""
                                       ng-class="{'fa fa-check text-success':(ALL_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length==ALL_ITEM_LIST.length,'fa fa-close text-red':(ALL_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length!=ALL_ITEM_LIST.length}">
                                    </i> The <b> invoice line GL Account </b><span ng-show="(ALL_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length!=ALL_ITEM_LIST.length"> is not matching with </span>  <span ng-show="(ALL_ITEM_LIST | filter:{ACCOUNT_MATCH:true}).length==ALL_ITEM_LIST.length"> is<b> matching with</b> </span> <b> purchase order line GL Account</b>.
                                </span>
                                <span class="po-amount" ng-show="(ALL_ITEM_LIST | filter:{RECEIVING_TYPE_ID:1}).length==ALL_ITEM_LIST.length">
                                    <span ng-show="(ALL_ITEM_LIST | total:'QUANTITY')==(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line quantity </b> matching with   <b> purchase order line quantity </b>.
                                    </span>
                                    <span ng-show="(ALL_ITEM_LIST | total:'QUANTITY')!=(MAPPED_LIST | total:'USED_QTY')">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line quantity</b> is not currently matching with  any <b>purchase order line quantity</b>.
                                    </span>
                                    <span ng-show="(ALL_ITEM_LIST | total:'TAX_WITH_AMT')==(MAPPED_LIST | total:'USED_AMOUNT')">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line amount </b> matching with   <b> purchase order line amount </b>.
                                    </span>
                                    <span ng-show="(ALL_ITEM_LIST | total:'TAX_WITH_AMT')!=(MAPPED_LIST | total:'USED_AMOUNT')">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line amount</b> is not currently matching with  any <b>purchase order line amount</b>.
                                    </span>
                                </span>
                                <span class="po-amount" ng-show="(ALL_ITEM_LIST | filter:{RECEIVING_TYPE_ID:2}).length==ALL_ITEM_LIST.length">

                                    <span ng-show="((ALL_ITEM_LIST | total:'TAX_WITH_AMT') | number:2) ==(MAPPED_LIST | total:'USED_AMOUNT' | number:2)">
                                        <i class="fa fa-check text-success"></i> This  <b>invoice line amount </b> matching with   <b> purchase order line amount </b>.
                                    </span>
                                    <span ng-show="((ALL_ITEM_LIST | total:'TAX_WITH_AMT') | number:2) !=(MAPPED_LIST | total:'USED_AMOUNT' | number:2)">
                                        <i class="fa fa-close text-red"></i> This  <b>invoice line amount</b> is not currently matching with  any <b>purchase order line amount</b>.
                                    </span>
                                </span>
                                <span class="po-amount">
                                    <i class="" ng-class="{'fa fa-check text-success':(ALL_ITEM_LIST | filter:{GRN_MATCH:true}).length==ALL_ITEM_LIST.length,'fa fa-close text-red':(ALL_ITEM_LIST | filter:{GRN_MATCH:true}).length!=ALL_ITEM_LIST.length}">
                                    </i> Receiving
                                    <span ng-show="(ALL_ITEM_LIST | filter:{GRN_MATCH:true}).length!=ALL_ITEM_LIST.length"> Match.</span>
                                    <span ng-show="(ALL_ITEM_LIST | filter:{GRN_MATCH:true}).length==ALL_ITEM_LIST.length"><b>Matched</b>.</span>
                                </span>
                            </div>
                            <div class="col-md-4">
                                <table class="table table-head-fixed table-bordered custom-scrollbar height-100 mb-0">
                                    <tr>
                                        <th>PO Number</th>
                                        <th>Amount + Tax</th>
                                        <th width="20%"></th>
                                    </tr>
                                    <tbody ng-repeat="POLine in  MAPPED_LIST | unique:'PO_HEADER_ID'" on-finish-render="ngRepeatFinishedMappedRender">
                                        <tr>
                                            <td>{{POLine.PO_NUMBER}}</td>
                                            <td> {{(POLine.PO_TOTAL_AMOUNT=(MAPPED_LIST | filter:{PO_HEADER_ID:POLine.PO_HEADER_ID} | total:'USED_AMOUNT')) | number:2}} </td>
                                            <td class="text-center">
                                                <i class="fa fa-eye text-blue cursor-pointer mr-2" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER)"></i>
                                                <i class="fa fa-download text-blue cursor-pointer" ng-click="PDF_MAIN_DOWNLOAD_FY(POLine.PO_HEADER_ID,POLine.PO_NUMBER,1)">
                                                </i>
                                            </td>
                                        </tr>

                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td>Total</td>
                                            <td>{{(ApprovalViewSearch.ALL_REQUEST_DETAILS.MATCHED_PO_AMOUNT=(MAPPED_LIST | unique:'PO_HEADER_ID' | total:'PO_TOTAL_AMOUNT')) | number:2  }}</td>
                                            <td></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <span ng-show="false">{{INVOICE_PO_MAPPING.length>0?ApprovalViewSearch.ALL_REQUEST_DETAILS.HIDE_SHOW_MATCH_PO=true:''}}</span>

                        <div class="card-header border-5" ng-show="MATCH_DIV_SHOW">
                            <h5 class="card-title mt-1">Line Matching</h5>
                            <div class="card-tools ml-auto">
                                <ul class="nav nav-pills" ng-show="false">
                                    <li class="nav-item" ng-show="EDIT_MATCH_BTN_SHOW && SELECTED_REQ_ALL.OVERALL_STATUS_ID!=37">
                                        <span class="bigcheck ">
                                            <label class="bigcheck" for="USEINVOICEALL">
                                                <input type="checkbox"
                                                       class="bigcheck"
                                                       ng-change="UPD_USE_INVOICE_GL_FLAG()"
                                                       ng-model="ApprovalViewSearch.ALL_REQUEST_DETAILS.USE_INVOICE_GL"
                                                       id="USEINVOICEALL">
                                                <span class="bigcheck-target"></span>
                                            </label>
                                            Use Invoice GL Account
                                        </span>
                                    </li>
                                    <li class="nav-item" ng-show="EDIT_MATCH_BTN_SHOW && SELECTED_REQ_ALL.OVERALL_STATUS_ID!=37">
                                        <button type="button"
                                                ng-click="INS_UPD_INVOICE_PO_MAPPING(2)"
                                                class="btn btn-wenodo mx-2">
                                            Save
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-body border-5" id="LINE_MATCHING" ng-show="MATCH_DIV_SHOW">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-head-fixed table-bordered">
                                        <thead class="bg-wenodo-border">
                                            <tr>
                                                <td colspan="5" class="text-center text-bold bg-light-green">Invoice Line</td>
                                                <td>Status</td>
                                                <td colspan="11" class="text-center text-bold bg-light-blue">PO Match Line</td>
                                            </tr>
                                            <tr>
                                                <th>Line# </th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th>Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th></th>
                                                <th>PO#</th>
                                                <th>Line#</th>
                                                <th width="25%">Description</th>
                                                <th>GL Account</th>
                                                <th> Qty.</th>
                                                <th class="text-right">Amount + Tax</th>
                                                <th>Method</th>
                                                <th>Mapping Qty</th>
                                                <th>Mapping Amt.</th>
                                                <th>Received</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody ng-repeat="ITEM_LINE in  ALL_ITEM_LIST" ng-init="InitiateInvoice(ITEM_LINE)"
                                               on-finish-render="ngRepeatFinishedRender">
                                            <tr>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.LINE_NO}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.ITEM_NAME}}<BR />{{ITEM_LINE.DESCRIPTION}}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">
                                                    <span ng-class="{'text-red text-bold':ITEM_LINE.MATCHES.length!=(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length}">
                                                        {{ITEM_LINE.ACCOUNT_DETAILS}}
                                                    </span>
                                                    <span ng-show="false && ITEM_LINE.MATCHES.length!=(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length">
                                                        <i class="fa fa-sync" ng-click="POP_SYNC_GL_ACCOUNT_Fn(ITEM_LINE)"></i>
                                                    </span>
                                                </td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">{{ITEM_LINE.QUANTITY | number :2 }}</td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}" class="text-right">
                                                    <span class="text-nowrap">
                                                        <!--{{(ITEM_LINE.TAX_WITH_AMT=ITEM_LINE.LINE_AMOUNT + ITEM_LINE.TAX_AMOUNT) | number :2 }}-->

                                                        {{(ITEM_LINE.TAX_WITH_AMT = ITEM_LINE.LINE_AMOUNT +  (ApprovalViewSearch.ALL_REQUEST_DETAILS.TAX_TYPE==1?ITEM_LINE.TAX_AMOUNT:0)) | number :2 }}

                                                    </span>
                                                </td>
                                                <td rowspan="{{ITEM_LINE.MATCHES.length+1}}">
                                                    {{ITEM_LINE.IS_DROP_DOWN_SHOW==false && ITEM_LINE.MATCHES.length==(ITEM_LINE.MATCHES | filter:{ACCOUNT_ID:ITEM_LINE.ACCOUNT_ID}).length ?'Matched':'UnMatched'}}
                                                </td>
                                                <td colspan="11" ng-show="ITEM_LINE.IS_DROP_DOWN_SHOW">
                                                    <!--ng-if="(ITEM_LINE.REMAINING_TO_MAP_QTY>0) || (ITEM_LINE.REMAINING_TO_MAP_AMOUNT>0)"-->
                                                    <a class="form-control text-limitations custom-dropdown" ng-class="{'c-form-control':SHOW_BTN}" data-toggle="dropdown">
                                                        <span id="dropdown_title">Select a line to match</span>
                                                        <i class="fa fa-sort float-right mt-1"></i>
                                                    </a>
                                                    <ul ID="divNewNotifications" class="dropdown-menu dropdown-menu-arrow text-xs custom-scrollbar mx-w-80">
                                                        <li class="p-0">
                                                            <table class="table table-head-fixed table-hover table-bordered mb-0">
                                                                <thead class="bg-wenodo-border">
                                                                    <tr>
                                                                        <th>PO#</th>
                                                                        <th>Item Name</th>
                                                                        <th>Description</th>
                                                                        <th>GL Account</th>
                                                                        <th>Qty.</th>
                                                                        <th class="text-right">Amount + Tax</th>
                                                                        <th>Receiving Method</th>
                                                                        <th>Received</th>
                                                                        <th>Open to Invoice</th>
                                                                        <th>Current</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody ng-repeat="PO_LINE in  PO_LINES_FOR_INVOICE_PO_MAPPING | orderBy:PO_LINE_ID"
                                                                       ng-click="MATCHED_PO_LINE_FY(PO_LINE,$index,ITEM_LINE)"
                                                                       ng-show="(PO_LINE.RECEIVING_TYPE_ID!=1 && PO_LINE.CURRENT_AMOUNT!=PO_LINE.REMAINING_AMOUNT)
                                                                       || (PO_LINE.RECEIVING_TYPE_ID==1 && PO_LINE.REMAINING_QTY!=PO_LINE.CURRENT_QTY)">
                                                                    <tr>
                                                                        <td>
                                                                            {{PO_LINE.PO_NUMBER}}
                                                                        </td>
                                                                        <td>{{PO_LINE.ITEM_NAME}}</td>
                                                                        <td>{{PO_LINE.DESCRIPTION}}</td>
                                                                        <td>{{PO_LINE.ACCOUNT_DETAILS}}</td>
                                                                        <td>{{PO_LINE.QUANTITY | number :2 }}</td>
                                                                        <td class="text-right"><span class="text-nowrap">{{PO_LINE.LINE_AMOUNT | number :2 }} </span></td>
                                                                        <td>{{PO_LINE.RECEIVING_TYPE_ID==1?'Quantity':'Amount'}}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.RECEIVED_QTY:PO_LINE.RECEIVED_AMOUNT) | number :2 }}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.REMAINING_QTY:PO_LINE.REMAINING_AMOUNT) | number :2 }}</td>
                                                                        <td>{{(PO_LINE.RECEIVING_TYPE_ID==1?PO_LINE.CURRENT_QTY:PO_LINE.CURRENT_AMOUNT) | number :2 }}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="POLine in ITEM_LINE.MATCHES">
                                                <td>{{POLine.PO_NUMBER}}</td>
                                                <td>{{POLine.LINE_NO}} </td>
                                                <td>{{POLine.ITEM_NAME}}<br /> {{POLine.DESCRIPTION}}</td>
                                                <td>{{POLine.ACCOUNT_DETAILS}}</td>
                                                <td>{{POLine.QUANTITY | number :2 }}</td>
                                                <td class="text-right"><span class="text-nowrap">{{POLine.LINE_AMOUNT | number :2 }} </span></td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?'Quantity':'Amount' }}</td>
                                                <td>{{POLine.RECEIVING_TYPE_ID==1?(POLine.USED_QTY | number :2) :'-'  }}</td>
                                                <td>{{POLine.USED_AMOUNT | number :2 }}</td>
                                                <td>
                                                    <span ng-class="{'text-red':ITEM_LINE.QUANTITY>POLine.RECEIVED_QTY}" ng-show="POLine.RECEIVING_TYPE_ID==1">
                                                        {{POLine.RECEIVED_QTY | number :2 }}
                                                    </span><span ng-class="{'text-red':ITEM_LINE.LINE_AMOUNT>POLine.RECEIVED_AMOUNT}" ng-show="POLine.RECEIVING_TYPE_ID==2">
                                                        {{POLine.RECEIVED_AMOUNT | number :2 }}
                                                    </span>
                                                </td>
                                                <td colspan="2">
                                                    <i class="far fa-undo" ng-show="false && POLine.TABLE_ID==null && SELECTED_REQ_ALL.OVERALL_STATUS_ID!=37" ng-click="UNDO_MATCH_FY(ITEM_LINE,POLine,0,$index)"></i>
                                                    <i class="fa fa-trash text-red" ng-show="false && POLine.TABLE_ID>0 && SELECTED_REQ_ALL.OVERALL_STATUS_ID!=37" ng-click="DELETE_INS_UPD_INVOICE_PO_MAPPING(ITEM_LINE, 2, POLine,2,$index)"
                                                       data-toggle="tooltip" data-html="true" data-original-title="Delete"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">Invoice Attachment </h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null">
                                            <div class="upload-files-container">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="INVOICE"
                                                                   ng-model="ApprovalViewSearch.ALL_REQUEST_DETAILS.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'INVOICE',5,ApprovalViewSearch.ALL_REQUEST_DETAILS,33,'1','INVOICE',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">

                                            <div class="file-block"
                                                 ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.ATTACHMENTS.length==0 && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="file-block"
                                                 ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0"
                                                 ng-repeat="Attachment in ApprovalViewSearch.ALL_REQUEST_DETAILS.ATTACHMENTS">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a ng-click="DOWNLOAD_INVOICE_ATTACHMENT(Attachment);">
                                                            <span class="text-limit-1 font-10 cursor-pointer">{{Attachment.FileName}} </span>
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer"
                                                      ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null"
                                                      ng-click="REMOVE_INVOICE_IN_FILTE($index,file)">
                                                    <i class="fa fa-times"></i>
                                                </span>
                                            </div>

                                            <div class="file-block" ng-show="ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID==null" ng-repeat="file in ApprovalViewSearch.ALL_REQUEST_DETAILS.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">

                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}"
                                                           download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>

                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_INVOICE_IN_FILTE_ALL($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">PO Attachment </h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(PO_ATTACHMENT_IN_INVOICE.UploadedFiles.length==0 || PO_ATTACHMENT_IN_INVOICE.UploadedFiles==null) && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-filescx-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="PO_ATTACHMENT_IN_INVOICE"
                                                                   ng-model="PO_ATTACHMENT_IN_INVOICE.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'PO_ATTACHMENT_IN_INVOICE',5,PO_ATTACHMENT_IN_INVOICE,37,'1','PO',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in PO_ATTACHMENT_IN_INVOICE.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>

                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_PO_IN_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">GRN Attachment</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(GRN_ATTACHMENT.UploadedFiles.length==0 || GRN_ATTACHMENT.UploadedFiles==null) && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-files-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="GRN_ATTACHMENT"
                                                                   ng-model="GRN_ATTACHMENT.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'GRN_ATTACHMENT',5,GRN_ATTACHMENT,38,'1','PO_GRN',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in GRN_ATTACHMENT.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>

                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_GRN_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card-header border-5 mb-3"><h5 class="card-title mt-1">Other</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="file-block"
                                                 ng-show="(OTHER_ATTACHMENT.UploadedFiles.length==0 || OTHER_ATTACHMENT.UploadedFiles==null) && ApprovalViewSearch.ALL_REQUEST_DETAILS.INTEGRATION_SYSTEM_ID>0">
                                                - No Attachments
                                            </div>
                                            <div class="upload-files-container" ng-show="false">
                                                <div class="drag-file-area">
                                                    <label class="label">
                                                        <span class="browse-files">
                                                            <input type="file" class="default-file-input w-100" id="OTHER_ATTACHMENT"
                                                                   ng-model="OTHER_ATTACHMENT.UploadedFiles"
                                                                   ng-files="getTheFilesToUpload($files,'OTHER_ATTACHMENT',5,OTHER_ATTACHMENT,39,'1','OTHER_BILL',10,'P2P_Upload_Path','P2P',ApprovalViewSearch.ALL_REQUEST_DETAILS.INVOICE_HEADER_ID)" />
                                                            <span class="browse-files-text"><i class="far fa-upload"></i> Add an Attachment</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="file-block" ng-repeat="file in OTHER_ATTACHMENT.UploadedFiles">
                                                <div class="file-info">
                                                    <i class="far fa-file-alt file-icon"></i>
                                                    <span class="file-name">
                                                        <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="{{file.SERVER_FILE_NAME}}">
                                                            <span class="text-limit-1 cursor-pointer">{{file.ORIGINAL_FILE_NAME}} </span>
                                                        </a>

                                                    </span>
                                                </div>
                                                <span class="remove-file-icon cursor-pointer" ng-click="REMOVE_OTHER_FILTE($index,file)"><i class="fa fa-times"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="card-header border-5"><h5 class="card-title mt-1">Note for Approvers</h5></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            {{ApprovalViewSearch.ALL_REQUEST_DETAILS.SUBMISSION_COMMENTS==null || ApprovalViewSearch.ALL_REQUEST_DETAILS.SUBMISSION_COMMENTS=='' ?'-':ApprovalViewSearch.ALL_REQUEST_DETAILS.SUBMISSION_COMMENTS}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border-bottom"></div>
                        <div class="card-header mt-3"><h5 class="card-title">Approval Workflow</h5></div>
                        <div class="row align-items-center mt-3 mb-5">
                            <div class="col d-flex custom-scrollbar horizontal_scroll" style="min-height:350px">
                                <div class="col-md-2" ng-repeat-start="APL in APPROVAL_HEADERS_CHAIN_LIST  | unique:'GROUP_SORT_SEQUENCE'"
                                     ng-init="InitiateApprover(APL)">
                                    <div class="row pl-2">
                                        <span ng-show="false">{{APL.APL_INDEX=$index+1}}</span>
                                        <div class="col-md-12 pl-1">
                                            <button type="button" class="btn btn-w-default w-100" ng-class="{'active':APL.STEP_ACTIVE==1, 'active-approved':APL.SEQUENCE_APPROVED}">
                                                {{APL.GROUP_NAME}}
                                                <!--<span class="float-right text-success" ng-show="APL.ACTION_REQUIRED==1">Active</span>-->
                                            </button>
                                        </div>
                                        <span class="w-100 z-index-997">
                                            Approval condition: {{APL.ANY_ALL_FLAG==0?'All':'Any'}} <span ng-show="APL.ANY_ALL_FLAG>0"> of {{APL.ANY_ALL_FLAG}}</span>
                                        </span>
                                        <div class="col-auto pl-1 mt-2"
                                             ng-repeat="User in APPROVAL_HEADERS_CHAIN_LIST | filter:{GROUP_SORT_SEQUENCE:APL.GROUP_SORT_SEQUENCE}:true"
                                             ng-init="InitiateNameApprover(User,APL)">
                                            <div class="sec-center mt-1">
                                                <span ng-show="false"> {{ User.ACTION_REQUIRED==1?APL.STEP_ACTIVE=true :''}}</span>

                                                <input class="dropdown" type="checkbox" id="dropdownBillAll{{$index}}{{APL.APL_INDEX}}" name="dropdown" />
                                                <label class="name-badge-short cursor-pointer"
                                                       ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-action-required':User.ACTION_REQUIRED==1 && User.STATUS_ID==39,'name-badge-pending':User.ACTION_REQUIRED!=1 && User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}"
                                                       for="dropdownBillAll{{$index}}{{APL.APL_INDEX}}">{{User.SHORT_NAME}}</label>
                                                <div class="section-dropdown">
                                                    <div class="card-header">
                                                        <div class="name-badge d-inline">{{User.SHORT_NAME}}</div>
                                                        <span class="mt-2 ml-2">{{User.APPROVER_NAME}}</span>
                                                        <span class="badge  text-white float-right"
                                                              ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-pending':User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}">{{User.STATUS_NAME}}</span>
                                                    </div>
                                                    <div class="card-body">
                                                        <ul class="products-list product-list-in-card">
                                                            <li class="item">
                                                                <div class="product-info ml-0">
                                                                    <div class="product-title">
                                                                        {{User.APPROVER_EMAIL}}
                                                                        <span class="d-block" ng-if="User.LAST_ACTION_TAKEN_DATE!=null">{{User.LAST_ACTION_TAKEN_DATE | toDate | date}}, {{User.LAST_ACTION_TAKEN_DATE | toDate | date:'H:mm'}}</span>
                                                                    </div>
                                                                </div>

                                                            </li>
                                                            <li class="item">
                                                                <div class="product-info ml-0 font-12 custom-scrollbar" style="max-height:100px">
                                                                    {{User.COMMENTS==null?'-':User.COMMENTS}}
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-auto" ng-if="APL.showborder && !$last" ng-repeat-end><i class="far fa-angle-right text-grey mt-1"></i></div>
                                <div class="col-md-2"
                                     ng-show="APPROVAL_HEADERS_CHAIN_LIST.length==0 && ApprovalViewSearch.ALL_REQUEST_DETAILS.THREE_WAY_MATCH_AUTO_APPROVED">
                                    3 way matched for verified bill.
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade show" id="Approved_Reject_POP">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title d-flex">
                    <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FLAG==37">Approval&nbsp; </span>
                    <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FLAG==38">Rejection&nbsp; </span> Comment  <span class="text-danger">
                        <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FLAG==38">&nbsp;* </span>
                    </span>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-md-12 text-center" ng-show="OTP_VALID_CHECK=='1' && NXT_APPROVAL_HEADER_STATUS_ID=='' && ALLOW_SUBMIT">
                    <div class="prompt">Enter OTP</div>
                    <form method="get" class="digit-group" data-group-name="digits" data-autosubmit="false" autocomplete="off">
                        <input type="text" id="digit-1" ng-model="ApprovalViewSearch.digit1" name="digit-1" data-next="digit-2" />
                        <input type="text" id="digit-2" ng-model="ApprovalViewSearch.digit2" name="digit-2" data-next="digit-3" data-previous="digit-1" />
                        <input type="text" id="digit-3" ng-model="ApprovalViewSearch.digit3" name="digit-3" data-next="digit-4" data-previous="digit-2" />
                        <span class="splitter">&ndash;</span>
                        <input type="text" id="digit-4" ng-model="ApprovalViewSearch.digit4" name="digit-4" data-next="digit-5" data-previous="digit-3" />
                        <input type="text" id="digit-5" ng-model="ApprovalViewSearch.digit5" name="digit-5" data-next="digit-6" data-previous="digit-4" />
                        <input type="text" id="digit-6" ng-model="ApprovalViewSearch.digit6" name="digit-6" data-previous="digit-5" />
                    </form>
                    <span class="d-block text-danger font-14 semibold mb-2"><em>{{MESSAGE_OTP_ERROR}}</em></span>
                    <span class="d-block text-success font-14 semibold mb-2"><em>{{MESSAGE_OTP_SEND}}</em></span>
                    <button type="button" ng-click="RESEND_GENERATE_APPROVAL_OTP()" class="btn btn-w-default">Resend OTP</button>
                </div>
                <form id="ApprovalForm" name="ApprovalForm" ng-show="!ALLOW_SUBMIT">
                    <div class="row">
                        <div class="col-md-12">
                            <textarea name="COMMENT"
                                      ng-required="ApprovalViewSearch.APPROVE_REJECT_FROCE_FLAG==38 "
                                      class="form-control"
                                      ng-class="{'error':ApprovalForm.submitted && ApprovalForm.COMMENT.$error.required}"
                                      rows="8"
                                      maxlength="2000"
                                      ng-model="ApprovalViewSearch.COMMENT">
                           </textarea>
                            <span class="d-block text-grey text-xs semibold mb-2">{{2000 - ApprovalViewSearch.COMMENT.length}} Character Remaining </span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" ng-show="!ALLOW_SUBMIT">
                <button type="button"
                        ng-click="APPROVE_CLICK_FY()"
                        click-once
                        ng-disabled="OTP_VALID_CHECK=='1' && NXT_APPROVAL_HEADER_STATUS_ID=='' && ALLOW_SUBMIT"
                        class="btn btn-sm btn-wenodo">
                    Submit
                </button>
                <button type="button" class="btn btn-sm btn-w-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade show" id="Comments">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{COMMENT_DTLS.NAME}} Comments</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body custom-scrollbar">
                <span class="po-amount">{{COMMENT_DTLS.COMMENTS}}</span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-w-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<div class="modal fade show" id="Edit_Matching">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Bill to Purchase Order matching for {{ApprovalViewSearch.REQUEST_DETAILS.CONTACT_NAME}}</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body custom-scrollbar">
                <div class="col-md-12 cursor-pointer" ng-click="HIDE_SHOW_MATCH=!HIDE_SHOW_MATCH">
                    Filters
                    <i class="far  float-right "
                       ng-class="{'fa-angle-down':HIDE_SHOW_MATCH,'fa-angle-up':!HIDE_SHOW_MATCH}"
                       data-toggle="tooltip" data-html="true" data-original-title="{{HIDE_SHOW_MATCH?'Show':'Hide'}}"></i>
                    <!--<i class="far fa-angle-down  float-right cursor-pointer" data-toggle="tooltip" data-html="true" data-original-title="Show"></i>-->
                </div>
                <div class="row px-2" ng-show="HIDE_SHOW_MATCH">
                    <div class="col-md-3">
                        <label class="d-block text-bold">Amount (Gross)</label>
                        <div class="form-group">
                            <label class="d-block">From</label>
                            <input type="text"
                                   class="form-control"
                                   only-digits
                                   maxlength="13"
                                   ng-model="ApprovalViewSearch.AMOUNT_FROM"
                                   placeholder="Enter the amount from" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="d-block">&nbsp;</label>
                        <div class="form-group">
                            <label class="d-block">To</label>
                            <input type="text" class="form-control"
                                   only-digits
                                   maxlength="13"
                                   ng-model="ApprovalViewSearch.AMOUNT_TO"
                                   placeholder="Enter the amount to" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="d-block">&nbsp;</label>
                        <div class="form-group">
                            <label class="d-block">PO Number</label>
                            <input type="text" class="form-control"
                                   ng-model="ApprovalViewSearch.PO_NUMBER"
                                   placeholder="Enter the number" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="d-block text-bold">Date Range</label>
                        <div class="form-group">
                            <label class="d-block">From</label>
                            <input type="text"
                                   class="form-control dateinput"
                                   name="date"
                                   ng-model="ApprovalViewSearch.DATE_FROM"
                                   readonly
                                   placeholder="Select from date" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="d-block">&nbsp;</label>
                        <div class="form-group">
                            <label class="d-block">To</label>
                            <input type="text"
                                   class="form-control dateinput"
                                   name="date"
                                   ng-model="ApprovalViewSearch.DATE_TO"
                                   readonly
                                   placeholder="Select to date" />
                        </div>
                    </div>
                    <div class="col text-right">
                        <label class="d-block">&nbsp;</label>
                        <div class="form-group">
                            <label class="d-block">&nbsp;</label>
                            <button type="button" ng-click="GET_PO_FOR_INVOICE_PO_MAPPING()" class="btn btn-wenodo">Filter</button>
                            <button type="button" ng-click="RESET_EDIT_MACTHING()" class="btn btn-w-default">Reset</button>
                        </div>
                    </div>
                </div>
                <hr />
                <div ng-show="PO_FOR_INVOICE_PO_MAPPING_LIST.length==0">
                    <div class="col-md-12 text-center">
                        <h5 class="text-muted">
                            <span class="d-block mb-3">
                                <img src="../../../E_Content/images/sorted.png" />
                            </span>
                            Everything's sorted!
                        </h5>
                    </div>
                </div>
                <div class="table-responsive" ng-show="PO_FOR_INVOICE_PO_MAPPING_LIST.length>0">
                    <table class="table table-head-fixed table-bordered mb-0">
                        <thead class="bg-wenodo-border">
                            <tr>
                                <th width="3%"></th>
                                <th width="15%"></th>
                                <th>Item</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="P_INVC_L in PO_FOR_INVOICE_PO_MAPPING_LIST">
                            <tr>
                                <td rowspan="{{P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING.length+1}}">
                                    <span class="bigcheck">
                                        <label class="bigcheck" for="PO_MATCH{{$index}}">
                                            <input type="checkbox"
                                                   class="bigcheck"
                                                   ng-change="PO_CLICK_FY(P_INVC_L)"
                                                   ng-model="P_INVC_L.IS_SELECTED"
                                                   id="PO_MATCH{{$index}}">
                                            <span class="bigcheck-target"></span>
                                        </label>
                                    </span>
                                </td>
                                <td rowspan="{{P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING.length+1}}">
                                    <div class="col-md-12">
                                        <span class="text-blue text-bold font-14">
                                            {{P_INVC_L.PO_NUMBER}}
                                        </span>
                                        <div class="row">
                                            <div class="col-md-12"><span class="text-muted font-12">PO Amount:</span> <span class="text-dark text-bold font-12">{{P_INVC_L.PO_AMOUNT  | number :2}}   {{ApprovalViewSearch.REQUEST_DETAILS.CURRENCY_CODE}}</span></div>
                                            <div class="col-md-12"><span class="text-muted font-12">Remaining:</span> <span class="text-dark text-bold font-12">{{P_INVC_L.REMAINING_MAPPING_AMOUNT}}   {{ApprovalViewSearch.REQUEST_DETAILS.CURRENCY_CODE}}</span></div>
                                            <div class="col-md-12"><span class="text-muted font-12">Date:</span> <span class="text-dark text-bold font-12">{{P_INVC_L.PO_DATE | date}}</span></div>
                                            <div class="col-md-12"><span class="text-muted font-12">Requestor:</span> <span class="text-dark text-bold font-12">{{P_INVC_L.REQUESTOR_NAME}}</span></div>
                                            <div class="col-md-12"><span class="text-muted font-12">Reference:</span> <span class="text-dark text-bold font-12">{{P_INVC_L.REFERENCE=="" || P_INVC_L.REFERENCE==null?'-':P_INVC_L.REFERENCE}}</span></div>
                                        </div>
                                    </div>
                                </td>
                                <td ng-if="P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING.length==0"></td>
                                <td ng-if="P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING.length==0"></td>
                            </tr>
                            <tr ng-repeat="PO_LINE in  P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING" ng-show="PO_LINE.REMAINING_QTY>0 || PO_LINE.REMAINING_AMOUNT>0">
                                <td>{{PO_LINE.ITEM_NAME}}</td>
                                <td><span class="text-limit-100">{{PO_LINE.DESCRIPTION}}</span></td>
                            </tr>
                            <tr ng-show="(P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING ==null || P_INVC_L.PO_LINES_FOR_INVOICE_PO_MAPPING.length==0) && $last">
                                <td rowspan="1" colspan="4"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>



            </div>
            <div class="modal-footer">
                <button type="button" href="#LINE_MATCHING" tabindex="0" role="link" ng-click="SELECTED_MATCH_PO()"
                        ng-disabled="ApprovalViewSearch.REQUEST_DETAILS.REAMANING_AMOUNT<0 || (PO_FOR_INVOICE_PO_MAPPING_LIST | filter:{EXCEED_AMT:true}).length>0"
                        class="btn btn-wenodo">
                    Match
                </button>
                <button type="button" class="btn btn-w-default" data-dismiss="modal" ng-click="OPEN_ASIDE()">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade show" id="PROJECT_POP">
    <form id="project_form" name="project_form" novalidate>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Update Bill# <b>{{ApprovalViewSearch.REQUEST_DETAILS.INVOICE_NUMBER}}</b></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body custom-scrollbar">
                    <div class="row px-2">
                        <div class="col-md-3"><label>Project</label></div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <select class="custom-select mw-150"
                                        name="PROJECT_MASTER_ID"
                                        required
                                        ng-model="ApprovalViewSearch.PROJECT_MASTER_ID"
                                        ng-options="T.PROJECT_MASTER_ID as T.PROJECT_NAME for T in PROJECT_MASTER_LIST"
                                        ng-class="{'error':project_form.submitted && project_form.PROJECT_MASTER_ID.$error.required}">
                                    <option value="">-Select Project-</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" ng-click="INS_UPD_PROJECT_IN_INVOICE()" class="btn btn-wenodo">Save</button>
                    <button type="button" class="btn btn-w-default" data-dismiss="modal" ng-click="OPEN_ASIDE()">Close</button>
                </div>
            </div>
        </div>
    </form>
</div>

<div class="modal fade show" id="POP_SYNC_GL_ACCOUNT">
    <form id="project_form" name="project_form" novalidate>
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"> <b>{{ApprovalViewSearch.REQUEST_DETAILS.INVOICE_NUMBER}}<br />{{INVOICE_LINE.DESCRIPTION}}</b></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body custom-scrollbar">
                    <div class="row px-2">
                        <div class="col-md-12">
                            <p class="text-bold">
                                The Invoice line GL Account is not matching the purchase order line GL Account. Please click on the update GL Account button to update the invoice GL Account.
                            </p>
                        </div>
                        <div class="col-md-12">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th class="text-center">Invoice </th>
                                        <th class="text-center" colspan="4">PO </th>
                                    </tr>
                                </thead>
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Line#</th>
                                        <th>PO#</th>
                                        <th>Account Details</th>

                                    </tr>
                                </thead>
                                <tr>
                                    <td rowspan="{{INVOICE_LINE.MATCHES.length+1}}">
                                        {{INVOICE_LINE.ACCOUNT_DETAILS}}
                                    </td>
                                </tr>
                                <tr ng-repeat="ACt in INVOICE_LINE.MATCHES">
                                    <td>{{ACt.PO_LINE_NO}}</td>
                                    <td>{{ACt.PO_NUMBER}}</td>
                                    <td ng-class="{'text-red text-bold':INVOICE_LINE.ACCOUNT_ID!=ACt.ACCOUNT_ID}">{{ACt.ACCOUNT_DETAILS}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" ng-click="SYNC_GL_ACCOUNT_Fn()" class="btn btn-wenodo">Update</button>
                    <button type="button" class="btn btn-w-default" data-dismiss="modal" ng-click="OPEN_ASIDE()">Close</button>
                </div>
            </div>
        </div>
    </form>
</div>


<div id="PO_MAIN_PDF" class="filter-panel sidenav" style="width:0px;z-index:1500">
    <div class="card-header">
        <h5 class="card-title mt-1">Filters</h5>
        <div class="card-tools ml-auto">
            <button class="btn btn-tool py-0" ng-click="CLOSE_MAIN_PDF()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <pdf-viewer delegate-handle="my-pdf-container"
                        url="pdfMainUrl"
                        scale="1"
                        show-toolbar="true"
                        headers="{ 'x-you-know-whats-awesome': 'EVERYTHING' }" class="pdf_layout"></pdf-viewer>

        </div>
    </div>
    <div class="modal-footer sidenav-footer-fixed">
        <button type="button" class="btn btn-wenodo" ng-click="CLOSE_MAIN_PDF()">Close</button>
    </div>
</div>
<div class="modal fade show" id="Approved_Reject_FROCE_POP">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title d-flex">
                    <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FROCE_FLAG==37">Approval&nbsp; </span>
                    <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FROCE_FLAG==38">Rejection&nbsp; </span> Comment  <span class="text-danger">
                        <span ng-show="ApprovalViewSearch.APPROVE_REJECT_FROCE_FLAG==38">&nbsp;* </span>
                    </span>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-md-12 text-center" ng-show="OTP_VALID_CHECK=='1' && NXT_APPROVAL_HEADER_STATUS_ID=='' && ALLOW_FORCE_SUBMIT">
                    <div class="prompt">Enter OTP</div>
                    <form method="get" class="digit-group" data-group-name="digits" data-autosubmit="false" autocomplete="off">
                        <input type="text" id="digit-1" ng-model="ApprovalViewSearch.digit1" name="digit-1" data-next="digit-2" />
                        <input type="text" id="digit-2" ng-model="ApprovalViewSearch.digit2" name="digit-2" data-next="digit-3" data-previous="digit-1" />
                        <input type="text" id="digit-3" ng-model="ApprovalViewSearch.digit3" name="digit-3" data-next="digit-4" data-previous="digit-2" />
                        <span class="splitter">&ndash;</span>
                        <input type="text" id="digit-4" ng-model="ApprovalViewSearch.digit4" name="digit-4" data-next="digit-5" data-previous="digit-3" />
                        <input type="text" id="digit-5" ng-model="ApprovalViewSearch.digit5" name="digit-5" data-next="digit-6" data-previous="digit-4" />
                        <input type="text" id="digit-6" ng-model="ApprovalViewSearch.digit6" name="digit-6" data-previous="digit-5" />
                    </form>
                    <span class="d-block text-danger font-14 semibold mb-2"><em>{{MESSAGE_OTP_ERROR}}</em></span>
                    <span class="d-block text-success font-14 semibold mb-2"><em>{{MESSAGE_OTP_SEND}}</em></span>
                    <button type="button" ng-click="RESEND_GENERATE_APPROVAL_OTP()" class="btn btn-w-default">Resend OTP</button>
                </div>
                <form id="ApprovalForceForm" name="ApprovalForceForm" ng-show="!ALLOW_FORCE_SUBMIT">
                    <div class="row">
                        <div class="col-md-6 text-center" ng-show="false">
                            <div class="info-box bg-headers">
                                <span class="info-box-icon"><i class="fad fa-check-square text-success"></i></span>
                                <div class="info-box-content">
                                    <span class="info-box-text semibold">Approved  / Selected  Invoices</span>
                                    <span class="info-box-number text-nowrap">
                                        {{ApprovalViewSearch.SELECTED_INVOICES}}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 text-center" ng-show="false">
                            <div class="info-box bg-headers">
                                <span class="info-box-icon"><i class="fad fa-times-square text-danger"></i></span>
                                <div class="info-box-content">
                                    <span class="info-box-text semibold">Rejected / Unselected Invoice</span>
                                    <span class="info-box-number text-nowrap">
                                        {{ApprovalViewSearch.UNSELECTED_INVOICE}}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <textarea name="FORCE_COMMENTS"
                                      ng-required="ApprovalViewSearch.APPROVE_REJECT_FROCE_FLAG==38"
                                      class="form-control"
                                      ng-class="{'error':ApprovalForceForm.submitted && ApprovalForceForm.FORCE_COMMENTS.$error.required}"
                                      rows="8"
                                      maxlength="2000"
                                      ng-model="ApprovalViewSearch.FORCE_COMMENTS">
                           </textarea>
                            <span class="d-block text-grey text-xs semibold mb-2">{{2000 - ApprovalViewSearch.FORCE_COMMENTS.length}} Character Remaining </span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" ng-show="!ALLOW_FORCE_SUBMIT">
                <button type="button"
                        ng-click="CLICK_APPROVE_FORCE_Fn()"
                        click-once
                        ng-disabled="OTP_VALID_CHECK=='1' && NXT_APPROVAL_HEADER_STATUS_ID=='' && ALLOW_SUBMIT"
                        class="btn btn-sm btn-wenodo">
                    Submit
                </button>
                <button type="button" class="btn btn-sm btn-w-default" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>