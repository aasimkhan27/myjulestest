<div class="row">
            <div class="col-md-2 custom-scrollbar height-77vh stick-top">
                <div class="col-md-12 px-0 pb-1 sticky-top bg-white">
                    <form id="ProcSearchForm" name="ProcSearchForm" novalidate autocomplete="off">
                        <div class="search-form-group">
                            <input type="text" ng-model="ApprovalViewSearch.PROCESS_SEARCH_NAME" class="form-control" placeholder="Search by REQ#/Supplier/PO#" />
                            <button type="submit" class="btn btn-wenodo"
                                    click-once
                                    ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER_PROCESS(1,4,false)"></button>
                        </div>
                    </form>
                </div>
                <div class="detailed-card"
                     ng-class="{'active':PPL.PAGING==ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PAGING}"
                     ng-repeat="PPL in PURCHASE_REQUESTS_PROCESS_LIST"
                     ng-click="PURCHASE_REQUEST_PROCESSED_APPROVAL_CLICK(PPL)">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <span class="po-details text-limit-1 font-12">{{PPL.CONTACT_NAME}}</span>
                                        <span class="po-supplier font-12" ng-if="PPL.PO_NUMBER!=null">{{PPL.PO_NUMBER}}</span>
                                        <span class="po-supplier font-12" ng-if="PPL.PO_NUMBER==null">{{PPL.REQ_NUMBER}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <span class="badge" ng-class="{'border-badge':PPL.APPROVER_STATUS_ID==74,'badge-light-green':PPL.APPROVER_STATUS_ID==37,'badge-danger':PPL.APPROVER_STATUS_ID==38 || PPL.APPROVER_STATUS_ID==42}">{{PPL.APPROVER_STATUS_NAME}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="po-supplier font-10">{{PPL.REQUESTOR_NAME}}</span>
                                        <span class="po-supplier font-10">{{PPL.BRANCH_NAME}}</span>
                                    </div>
                                    <div class="col-auto text-right">

                                        <span class="po-supplier font-12 text-dark text-nowrap">
                                            {{PPL.TOTAL_AMOUNT | number :2}}
                                            <span ng-bind-html="PPL.PO_CURRENCY_CODE"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" ng-show="GetProcessData">
                    <button type="button" ng-click="GET_APPROVAL_HEADERS_FOR_APPROVER_PROCESS_LAZY_LOAD()" class="btn btn-block btn-w-default">
                        {{VIEWMORERECORD}}
                    </button>
                </div>
            </div>
            <div class="col-md-10">
                <div class="row align-content-center mn-height-66vh" ng-show="PURCHASE_REQUESTS_PROCESS_LIST.length==0">
                    <div class="col-md-12 text-center">
                        <h5 class="text-muted">
                            <span class="d-block mb-3">
                                <img src="../../../E_Content/images/sorted.png" />
                            </span>
                            Everything's sorted!
                        </h5>
                    </div>
                </div>
                <div class="card-body" ng-show="PURCHASE_REQUESTS_PROCESS_LIST.length>0">
                    <div class="row">
                        <div class="col"><h6 class="po-details  font-14 ">Purchase Order  <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.STATUS_ID==72">({{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_NUMBER}})</span>  to {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CONTACT_NAME}}. </h6></div>
                        <div class="col-auto">
                            <h6 class="po-details text-nowrap  ">
                                {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TOTAL_AMOUNT | number :2 }}
                                <span>{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_CURRENCY_CODE}}</span>
                            </h6>
                        </div>

                    </div>
                    <div class="row align-items-center mt-1">
                        <div class="col-auto"><div class="name-badge">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHORT_NAME}}</div></div>
                        <div class="col-md-5">
                            <span class="po-details">By {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REQUESTOR_NAME}}</span>
                            <span class="po-supplier">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REQUESTOR_EMAIL}}</span>
                            <span class="po-supplier"><span class="text-normal">Raised For {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANCH_NAME}} </span></span>
                        </div>
                        <div class="col-md-3"><span class="po-supplier">REQ#: {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REQ_NUMBER}}</span></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-group">
                                <label>Contact</label>
                                <span class="d-block text-bold font-14"> {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.CONTACT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_DATE | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Delivery Date</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_DATE  | date}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Reference</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.REFERENCE}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Project Name</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_NAME}}</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label>Theme</label>
                                <span class="d-block text-bold font-14">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME ==null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BRANDING_THEME}}</span>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <h5 class="card-title mt-2">Line Items</h5>
                        <div class="row">
                            <div class="col-auto " ng-show="false">
                                <div class=" mb-2">
                                    1  &nbsp;
                                    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_CURRENCY_CODE}}
                                    =  {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_PO_CONVERSION_RATE}}
                                    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_CURRENCY_CODE}}
                                </div>
                            </div>
                            <div class="col-auto  ml-auto ">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">PO Currency:</label>
                                    <span class="text-bold font-13">    {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_CURRENCY_CODE}}</span>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-inline mb-2">
                                    <label class="mr-2">Amounts are</label>
                                    <span class="text-bold font-13">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_NAME}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive custom-scrollbar height-auto">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th width="15%">Item </th>
                                        <th width="25%">Description </th>
                                        <th>Quantity </th>
                                        <th><span class="text-nowrap">Unit Price </span></th>
                                        <th>UOM </th>
                                        <th><span class="text-nowrap">Disc %</span></th>
                                        <th>GL Account </th>
                                        <th><span class="text-nowrap">Tax Rate </span></th>
                                        <th class="text-right">Tax Amount</th>
                                        <th class="text-right">Amount</th>
                                        <th ng-repeat="TrackingCat in XERO_TRACKING_CATEGORIES track by $index">{{TrackingCat.FIELD_NAME}}</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="PRL in PROCESS_REQUEST_ITEMS_LIST"
                                       ng-init="InitiateItemList(PRL);"
                                       on-finish-render="ngRepeatFinishedProcessRender">
                                    <tr>
                                        <td>{{PRL.ITEM_NAME}}</td>
                                        <td>
                                            {{PRL.DESCRIPTION==null || PRL.DESCRIPTION==''?'-': PRL.DESCRIPTION | limitTo:PRL.DESCRIPTION_LIMIT_TO}}
                                            <span ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO">...</span>
                                            <span class="btn btn-xs btn-wenodo d-inline-flex" ng-show="PRL.DESCRIPTION.length>PRL.DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,1)" data-toggle="tooltip" data-html="true" data-original-title="Read More"><i class="far fa-plus"></i></span>
                                            <span class="btn btn-xs btn-wenodo d-inline-flex" ng-show="PRL.DESCRIPTION_LIMIT_TO>DESCRIPTION_LIMIT_TO" ng-click="READ_MORE_FY(PRL,2)" data-toggle="tooltip" data-html="true" data-original-title="Hide"><i class="far fa-minus"></i></span>
                                        </td>
                                        <td>{{PRL.QUANTITY | number:2}}</td>
                                        <td>{{PRL.UNIT_PRICE | number:2}}</td>
                                        <td>{{PRL.UOM_NAME==null || PRL.UOM_NAME==''?'-':PRL.UOM_NAME}}</td>
                                        <td>{{PRL.DISCOUNT_PERCENT==null || PRL.DISCOUNT_PERCENT==''?'-':PRL.DISCOUNT_PERCENT}}</td>
                                        <td>{{PRL.ACCOUNT_DETAILS}}</td>
                                        <td>{{PRL.TAX_RATE_DETAILS}}</td>
                                        <td class="text-right">
                                            {{PRL.TAX_AMOUNT=ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==3?0: (ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==2?((((PRL.UNIT_PRICE*PRL.QUANTITY) / (1 + (PRL.TAX_RATE/100)))-(((PRL.UNIT_PRICE*PRL.QUANTITY) / (1 + (PRL.TAX_RATE/100)))*(PRL.DISCOUNT_PERCENT/100))) * (PRL.TAX_RATE/100)):(((PRL.UNIT_PRICE*PRL.QUANTITY)-((PRL.UNIT_PRICE*PRL.QUANTITY)*(PRL.DISCOUNT_PERCENT/100))) * (PRL.TAX_RATE/100))) | number:2}}
                                        </td>
                                        <td class="text-right text-nowrap pr-2">
                                            {{PRL.AMOUNT= ((PRL.QUANTITY * PRL.UNIT_PRICE) - (PRL.QUANTITY*1 * PRL.UNIT_PRICE*1 * (PRL.DISCOUNT_PERCENT)/100)) | number:2}}
                                        </td>
                                        <td ng-repeat="TrackingCat in PRL.XERO_TRACKING_CATEGORIES track by $index" ng-init="InitiateXeroTrackingCategories(TrackingCat, $index,PRL,2);">
                                            {{TrackingCat.SELECTED_CATEGORY_OPTION.OPTION_NAME}}
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="9" class="text-right font-13">Sub Total</td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{(PROCESS_REQUEST_ITEMS_LIST | total: 'AMOUNT') | number:2}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed" ng-repeat="TAX in PROCESS_REQUEST_ITEMS_LIST | unique:'TAX_RATE_ID'" ng-if="TAX.TAX_RATE_ID!=null">
                                        <td colspan="9" class="text-right font-13">
                                            {{TAX.TAX_RATE_DETAILS}}
                                        </td>
                                        <td class="text-right text-nowrap pr-2 font-13">
                                            {{ PROCESS_REQUEST_ITEMS_LIST | filter:{TAX_RATE_ID:TAX.TAX_RATE_ID} | total:'TAX_AMOUNT' | number:2}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-13"></td>
                                    </tr>
                                    <tr class="text-bold table-footer-fixed">
                                        <td colspan="9" class="text-right font-13">Total  </td>
                                        <td class="text-right text-nowrap pr-2 font-13">

                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1">


                                                {{((PROCESS_REQUEST_ITEMS_LIST | total: 'AMOUNT') + (PROCESS_REQUEST_ITEMS_LIST | total: 'TAX_AMOUNT')) | number:2}}

                                            </span>
                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==2">
                                                {{(PROCESS_REQUEST_ITEMS_LIST | total: 'AMOUNT')  | number:2}}
                                            </span>
                                            <span ng-if="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==3">
                                                {{(PROCESS_REQUEST_ITEMS_LIST | total: 'AMOUNT') | number:2}}
                                            </span>
                                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_CURRENCY_CODE}}
                                        </td>
                                        <td colspan="{{XERO_TRACKING_CATEGORIES.length}}" ng-if="XERO_TRACKING_CATEGORIES.length>0" class="text-right font-16"></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12  ">
                        <div class="card-header w-100">
                            <h5 class="card-title mt-1 font-15"> Advance Amount</h5>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span class="d-block text-bold font-14"> {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ADVANCE | number:2}}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="card-header w-100" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0">
                            <h5 class="card-title mt-1"> Actual Budget (This shows the current status of Budget) <span ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0"> ({{ApprovalViewSearch.BUDGET_NAME}})</span> </h5>
                            <button type="button"
                                    ng-click="GET_P2P_BUDGET_SNAPSHOT(ApprovalViewSearch.PROCESS_REQUEST_DETAILS);ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHOW_REQ_BUDGET=!ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHOW_REQ_BUDGET;"
                                    data-toggle="tooltip"
                                    data-html="true"
                                    class="btn btn-transparent-wenodo ml-2 border float-right">
                                View Requisition Budget
                            </button>

                        </div>
                        <div class="col-md-12 mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0 ">
                            <span class="po-amount">The following budgets would be affected by the approval of the request.</span>
                        </div>
                        <div class="col-md-12 text-center mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length==0">
                            <div class="alert bg-custom-blue">{{BUDGET_TEXT_VALIDATION}}</div>
                        </div>
                        <div class="card-body p-0 mt-2" ng-show="P2P_PROCESS_BUDGET_MASTER_LIST.length>0">
                            <div class="table-responsive custom-scrollbar">
                                <table class="table table-head-fixed table-hover">
                                    <thead class="bg-wenodo-border">
                                        <tr>
                                            <th>GL Account </th>
                                            <th>Period</th>
                                            <th class="text-right">Total</th>
                                            <th class="text-right">Remaining</th>
                                            <th class="text-right">Consumed</th>
                                            <th class="text-right">Booked</th>
                                            <th class="text-right">Credit Notes</th>
                                            <th class="text-right">Current Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="BD in P2P_PROCESS_BUDGET_MASTER_LIST">
                                        <tr>
                                            <td rowspan="3">{{BD.GLACCOUNT_NAME}}</td>
                                            <td colspan="7" ng-if="BD.DB_ACCOUNT_ID==0" class="text-align-center text-bold">There is no budget allocated in this GL Account</td>
                                        </tr>
                                        <tr ng-if="BD.DB_ACCOUNT_ID!=0" ng-repeat="BL in BD.BUDGET_DETAILS_LIST" ng-init="BL.CURRENT_PO_CUSTOM=0;"
                                            ng-click="VIEW_BUDGET_fn(BD,ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PO_DATE,ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PROJECT_MASTER_ID,ApprovalViewSearch,ApprovalViewSearch,'PO_APP_PROC')">
                                            <td>{{BL.PERIOD}}</td>
                                            <td class="text-right">{{BL.TOTAL | number:2}}</td>
                                            <td class="text-right" ng-class="{'text-red text-bold':BL.REMAINING_AMOUNT<0}">
                                                {{(BL.REMAINING_AMOUNT=((BL.TOTAL*1)-((BL.BOOKED*1) +(BL.CURRENT_PO_CUSTOM*1)+(BL.CONSUMED*1)+(BL.MEMO*1)))) | number:2}}
                                                <span ng-show="false">
                                                    {{BD.IS_OVER_BUDGET=(BL.REMAINING_AMOUNT<0 && BD.BUDGET_DETAILS_LIST.length==BL.LINE_ID?true:BD.IS_OVER_BUDGET?true:false)}}
                                                </span>

                                            </td>
                                            <td class="text-right">{{BL.CONSUMED | number :2}}</td>
                                            <td class="text-right">{{BL.BOOKED  | number :2}}</td>
                                            <td class="text-right">
                                                <span ng-show="BL.MEMO==0">{{BL.MEMO*-1 | number :2}}</span><span ng-show="BL.MEMO!=0">({{BL.MEMO*-1 | number :2}})</span>
                                            </td>
                                            <td class="text-right">
                                                <span ng-show="false">
                                                    {{BL.ITEM_TAX_AMOUNT= (PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'TAX_AMOUNT')}}
                                                    {{BL.ITEM_AMOUNT= (PROCESS_REQUEST_ITEMS_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID} | total:'AMOUNT') }}
                                                    {{BL.TAX_AMT_TOTAL= ((NAN_Fn(BL.ITEM_TAX_AMOUNT)?0:BL.ITEM_TAX_AMOUNT) + BL.ITEM_AMOUNT*1)}}
                                                </span>
                                                {{(BL.CURRENT_PO_CUSTOM= ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1?(BL.TAX_AMT_TOTAL/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_PO_CONVERSION_RATE):(BL.ITEM_AMOUNT/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_PO_CONVERSION_RATE)) | number:2}}

                                                <!--{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.TAX_TYPE==1 ?(BL.TAX_AMT_TOTAL>0?((BL.CURRENT_PO_CUSTOM=((BL.TAX_AMT_TOTAL)/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_PO_CONVERSION_RATE)) | number :2) :0.00):BL.ITEM_AMOUNT>0 || BL.ITEM_AMOUNT<0?((BL.CURRENT_PO_CUSTOM=((BL.ITEM_AMOUNT)/ApprovalViewSearch.PROCESS_REQUEST_DETAILS.BASE_TO_PO_CONVERSION_RATE)) | number :2): 0.00}}-->
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alert alert-warning-red" ng-show="(P2P_PROCESS_BUDGET_MASTER_LIST | filter:{IS_OVER_BUDGET:true}).length">
                            <strong>Warning!</strong> This requisition is going over budget.
                        </div>
                    </div>
                    <div class="col-md-12" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHOW_REQ_BUDGET">
                        <div class="card-header w-100">
                            <h5 class="card-title mt-1">
                                Requisition Budget (This shows the budget when the requisition was posted) <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST.length>0">
                                </span>
                            </h5>
                            <div class="card-tools">
                                <button type="button" class="btn btn-transparent-wenodo border" ng-click="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHOW_REQ_BUDGET=!ApprovalViewSearch.PROCESS_REQUEST_DETAILS.SHOW_REQ_BUDGET">
                                    <i class="fa fa-close"
                                       data-toggle="tooltip" data-html="true"
                                       data-original-title="Hide"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-12 text-center mt-2" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST.length==0" empty-grid> </div>
                        <div class="card-body p-0 mt-2" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST.length>0">
                            <div class="table-responsive custom-scrollbar">
                                <table class="table table-head-fixed table-hover">
                                    <thead class="bg-wenodo-border">
                                        <tr>
                                            <th>GL Account </th>
                                            <th>Period</th>
                                            <th class="text-right">Total</th>
                                            <th class="text-right">Remaining</th>
                                            <th class="text-right">Consumed</th>
                                            <th class="text-right">Booked</th>
                                            <th class="text-right">Credit Notes</th>

                                            <th class="text-right">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="BD in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST | unique:'ACCOUNT_ID'">
                                        <tr><td rowspan="3">{{BD.ACCOUNT_DETAILS}}</td></tr>
                                        <tr ng-repeat="BL in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST | filter:{ACCOUNT_ID:BD.ACCOUNT_ID}">
                                            <td>{{BL.PERIOD}}</td>
                                            <td class="text-right">{{BL.TOTAL | number:2}}</td>
                                            <td class="text-right" ng-class="{'text-red text-bold':BL.REMAINING_AMOUNT<0}">
                                                {{(BL.REMAINING_AMOUNT=((BL.TOTAL*1)-((BL.BOOKED*1) +(BL.CURRENT*1)+(BL.CONSUMED*1)+(BL.MEMO*1)))) | number:2 }}
                                                <span ng-show="false">
                                                    {{BD.IS_OVER_BUDGET=(BL.REMAINING_AMOUNT<0 && BD.BUDGET_DETAILS_LIST.length==BL.LINE_ID?true:BD.IS_OVER_BUDGET?true:false)}}
                                                </span>

                                            </td>
                                            <td class="text-right">{{BL.CONSUMED | number :2}}</td>
                                            <td class="text-right">{{BL.BOOKED  | number :2}}</td>
                                            <td class="text-right">
                                                <span ng-show="BL.MEMO==0">{{BL.MEMO*-1 | number :2}}</span><span ng-show="BL.MEMO!=0">({{BL.MEMO*-1 | number :2}})</span>
                                            </td>
                                            <td class="text-right">
                                                {{BL.CURRENT | number:2}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="alert alert-warning-red" ng-show="(ApprovalViewSearch.PROCESS_REQUEST_DETAILS.P2P_SNAP_SHOT_MASTER_LIST | filter:{IS_OVER_BUDGET:true}).length>0">
                                <strong>Warning!</strong> This requisition is going over budget.
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3" ng-show="PROC_QUOTATION_LIST.length>0">
                        <div class="card-header">    <h5 class="card-title w-100">Quotation</h5></div>
                        <div class="table-responsive" style="overflow-x:visible">
                            <table class="table table-head-fixed table-hover table-bordered">
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th>Contact Name</th>
                                        <th width="15%">Amount</th>
                                        <th width="5%">Rank</th>
                                        <th width="25%">Comments</th>
                                        <th width="25%" class="text-center">Attachment</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="QL in PROC_QUOTATION_LIST" ng-init="InginitQuotation(QL)">
                                        <td> {{QL.CONTACT_NAME}} </td>
                                        <td> {{QL.TOTAL_AMOUNT}} </td>
                                        <td> {{QL.RANK==null?'-':QL.RANK}} </td>
                                        <td> {{QL.COMMENTS}} </td>
                                        <td>
                                            <div class="row">
                                                <div class="col-md-12 text-center" ng-show="QL.UploadedFiles.length==0">No Attachment </div>
                                                <div class="col-md-12" ng-repeat="file in QL.UploadedFiles">
                                                    <div class="file-block">
                                                        <div class="file-info">
                                                            <i class="far fa-file-alt file-icon"></i>
                                                            <a href="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}" download="/P2PFiles/{{file.FILE_PATH}}{{file.SERVER_FILE_NAME}}"> <span class="text-limit-1">{{file.ORIGINAL_FILE_NAME}} </span></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="col-md-12 mt-3">
                        <h5 class="card-title w-100">Delivery Details</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Address</label>
                                    <span class="d-block font-12">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_ADDRESS}}</span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Attention To</label>
                                        <span class="d-block font-12">
                                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ATTENTION == null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ATTENTION==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.ATTENTION}}
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Phone</label>
                                        <span class="d-block font-12">{{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.PHONE}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Delivery Instructions</label>
                                    <span class="d-block font-12">
                                        {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS == null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS | limitTo:REQ_PROC_Search.DELIVERY_INSTRUCTIONS_LIMIT_TO}}
                                    </span>
                                    <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS.length>REQ_PROC_Search.DELIVERY_INSTRUCTIONS_LIMIT_TO">...</span>
                                    <span class="btn btn-xs btn-wenodo d-inline-flex"
                                          ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS.length>REQ_PROC_Search.DELIVERY_INSTRUCTIONS_LIMIT_TO"
                                          ng-click="READ_MORE_FY(ApprovalViewSearch.PROCESS_REQUEST_DETAILS,1,'DELIVERY_INSTRUCTIONS')"
                                          data-toggle="tooltip" data-html="true"
                                          data-original-title="Read More"><i class="far fa-plus"></i></span>
                                    <span class="btn btn-xs btn-wenodo d-inline-flex"
                                          ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.DELIVERY_INSTRUCTIONS.length==REQ_PROC_Search.DELIVERY_INSTRUCTIONS_LIMIT_TO"
                                          ng-click="READ_MORE_FY(ApprovalViewSearch.PROCESS_REQUEST_DETAILS,2,'DELIVERY_INSTRUCTIONS')"
                                          data-toggle="tooltip" data-html="true"
                                          data-original-title="Hide"><i class="far fa-minus"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <h5 class="text-dark-blue text-bold font-13 mb-0">Note for Approvers</h5>
                        <span class="font-12">
                            {{ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS == null || ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS==''?'-':ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS | limitTo:ApprovalViewSearch.NOTE_FOR_APPROVERS_LIMIT_TO }}
                            <span ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS.length>ApprovalViewSearch.NOTE_FOR_APPROVERS_LIMIT_TO">...</span>


                            <span class="btn btn-xs btn-wenodo d-inline-flex"
                                  ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS.length>ApprovalViewSearch.NOTE_FOR_APPROVERS_LIMIT_TO"
                                  ng-click="READ_MORE_ACTION_FY(ApprovalViewSearch.PROCESS_REQUEST_DETAILS,1,'NOT_FOR_APPROVER','ACTION')"
                                  data-toggle="tooltip" data-html="true"
                                  data-original-title="Read More">
                                <i class="far fa-plus"></i>
                            </span>
                            <span class="btn btn-xs btn-wenodo d-inline-flex"
                                  ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.NOTE_FOR_APPROVERS.length==ApprovalViewSearch.NOTE_FOR_APPROVERS_LIMIT_TO"
                                  ng-click="READ_MORE_ACTION_FY(ApprovalViewSearch.PROCESS_REQUEST_DETAILS,2,'NOT_FOR_APPROVER','ACTION')"
                                  data-toggle="tooltip" data-html="true"
                                  data-original-title="Hide"><i class="far fa-minus"></i></span>
                        </span>
                    </div>
                    <div class="col-md-12 mt-3" ng-show="PROC_TERMS_AND_CONDITIONS_MASTER_LIST.length>0">
                        <h5 class="text-dark-blue text-bold font-13 mb-0">Terms & Conditions</h5>
                        <ul class="products-list product-list-in-card pl-2 pr-2">
                            <li class="item" ng-repeat="PRL in PROC_TERMS_AND_CONDITIONS_MASTER_LIST">
                                <span class="terms"><span class="text-bold">{{$index+1}}.</span> {{PRL.TEXT}}</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-12 mt-3">
                        <h5 class="card-title w-100">Attachments</h5>
                        <div ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length==0">No attachment</div>
                        <div class="row" ng-show="ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles!=null && ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles.length>0">
                            <div class="col-md-3">
                                <div class="file-block" ng-repeat="FILE in ApprovalViewSearch.PROCESS_REQUEST_DETAILS.UploadedFiles">
                                    <div class="file-info">
                                        <i class="far fa-paperclip file-icon"></i>
                                        <span class="text-limit-1"> <a href="../P2PFiles/{{FILE.FILE_PATH}}{{FILE.SERVER_FILE_NAME}}" download="{{FILE.ORIGINAL_FILE_NAME}}">  {{FILE.ORIGINAL_FILE_NAME}} </a></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3"></div>
                    <div class="card-header"><h5 class="card-title">Approval Workflow</h5></div>
                    <div class="row align-items-center mt-3">
                        <div class="col d-flex custom-scrollbar horizontal_scroll" style="min-height:350px">
                            <div class="col-md-2" ng-repeat-start="APL in PROCESSED_APPROVAL_HEADERS_CHAIN_LIST  | unique:'APPROVAL_CHAIN_GROUP_ID'" ng-init="InitiateApprover(APL)">
                                <div class="row pl-2">
                                    <span ng-show="false">{{APL.APL_INDEX=$index+1}}</span>
                                    <div class="col-md-12 pl-1">
                                        <button type="button" class="btn btn-w-default w-100" ng-class="{'active':APL.STEP_ACTIVE==1, 'active-approved':APL.SEQUENCE_APPROVED}">
                                            {{APL.GROUP_NAME}}
                                        </button>
                                    </div>
                                    <span class="w-100 z-index-997">
                                        Approval condition: {{APL.ANY_ALL_FLAG==0?'All':'Any'}} <span ng-show="APL.ANY_ALL_FLAG>0"> {{APL.ANY_ALL_FLAG}}</span>
                                    </span>
                                    <div class="col-auto pl-1 mt-2"
                                         ng-repeat="User in PROCESSED_APPROVAL_HEADERS_CHAIN_LIST | filter:{APPROVAL_CHAIN_GROUP_ID:APL.APPROVAL_CHAIN_GROUP_ID}"
                                         ng-init="InitiateNameApprover(User,APL)">
                                        <div class="sec-center mt-1">
                                            <input class="dropdown" type="checkbox" id="Prodropdown{{$index}}{{APL.APL_INDEX}}" name="dropdown{{$index}}" />
                                            <label class="name-badge-short cursor-pointer"
                                                   ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-action-required':User.ACTION_REQUIRED==1 &&  User.STATUS_ID==39,'name-badge-pending':User.ACTION_REQUIRED!=1 && User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}"
                                                   for="Prodropdown{{$index}}{{APL.APL_INDEX}}">{{User.SHORT_NAME}}</label>
                                            <div class="section-dropdown">
                                                <div class="card-header">
                                                    <div class="name-badge d-inline">{{User.SHORT_NAME}} </div>
                                                    <span class="mt-2 ml-2">{{User.APPROVER_NAME}}</span>
                                                    <span class="badge  text-white float-right"
                                                          ng-class="{'name-badge-approved':User.STATUS_ID==37,'name-badge-pending': User.STATUS_ID==39,'name-badge-rejected': User.STATUS_ID==38 || User.STATUS_ID==42,'name-badge-auto-approved': User.STATUS_ID==41,'name-badge-no-action-required': User.STATUS_ID==74}">{{User.STATUS_NAME}}</span>
                                                </div>
                                                <div class="card-body">
                                                    <ul class="products-list product-list-in-card">
                                                        <li class="item pt-0">
                                                            <div class="product-info ml-0">
                                                                <div class="product-title">
                                                                    {{User.APPROVER_EMAIL}}
                                                                    <span class="d-block" ng-if="User.LAST_ACTION_TAKEN_DATE!=null">{{User.LAST_ACTION_TAKEN_DATE | toDate | date}}, {{User.LAST_ACTION_TAKEN_DATE | toDate | date:'H:mm'}}</span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="item">
                                                            <div class="product-info ml-0 font-12 custom-scrollbar" style="max-height:100px">
                                                                {{User.COMMENTS==null?'-':User.COMMENTS}}
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-auto" ng-if="APL.showborder && !$last" ng-repeat-end><i class="far fa-angle-right text-grey mt-1"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
