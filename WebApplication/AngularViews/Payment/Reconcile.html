<div class="card" ng-show="RECONCILE">
    <div class="card-header">
        <h5 class="card-title font-18">Reconciliation</h5>
        <div class="card-tools">
            <ul class="nav nav-pills ml-auto">
                <li class="nav-item">
                    <a href="#!/Statement_View?STATEMENT_ID={{StatementReconcileSearch.STATEMENT_ID}}" class="btn btn-sm btn-wenodo">Back</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive custom-scrollbar height-auto">
            <table class="table table-striped v-align-top">
                <thead class="bg-wenodo-border">
                    <tr>
                        <th width="15%">
                            <span class="d-block mb-2">Supplier Name</span>
                            <span class="d-block mb-2">Statement Date</span>
                            <span class="d-block mb-2" ng-show="false">Contact Details</span>
                            <span class="d-block" ng-show="false">Contact Number</span>
                        </th>
                        <th width="30%" class="text-normal">
                            <span class="d-block mb-2 text-blue semibold">{{StatementReconcileSearch.RECONCILE_HEADER.SUPPLIER_NAME}}</span>
                            <span class="d-block semibold mb-2"><i class="fal fa-calendar-alt text-blue"></i> {{StatementReconcileSearch.RECONCILE_HEADER.STATEMENT_DATE | date}}</span>
                            <span class="d-block semibold mb-2" ng-show="false">ABC Limited, UK</span>
                            <span class="d-block semibold" ng-show="false">01234567</span>
                        </th>

                        <th class="p-0" width="15%" colspan="2">
                            &nbsp;
                        </th>
                        <th class="text-right text-normal">
                            <span class="d-block"><span class="badge badge-light-red w-70px">Invoice Not Found</span> </span>
                            <span class="d-block"><span class="badge badge-light-green w-70px">Matched</span> </span>
                            <span class="d-block"><span class="badge badge-success w-70px">Invoice Paid</span> </span>
                            <span class="d-block"><span class="badge badge-secondary w-70px">Mismatched</span> </span>
                        </th>
                        <th>
                            <span class="d-block text-normal font-13 mb-1 text-nowrap">Invoice not available for matching.</span>
                            <span class="d-block text-normal font-13 mb-1 text-nowrap">Matched to invoice on this statement.</span>
                            <span class="d-block text-normal font-13 mb-1 text-nowrap">Invoices whose payments have been processed.</span>
                            <span class="d-block text-normal font-13 mb-1 text-nowrap">Statements and invoice not matching.</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">
                            <table class="table table-font-10 table-hover compact_table">
                                <thead class="bg-light-blue">
                                    <tr>
                                        <th colspan="4">Statement Line Items</th>
                                        <th class="text-right">Currency: <span ng-bind-html="CURRENCY_SYMBOL"></span></th>
                                    </tr>
                                </thead>
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th class="text-nowrap">Invoice Date</th>
                                        <th>Number</th>
                                        <th>Due Date</th>
                                        <th class="text-right">Debit</th>
                                        <th class="text-right">Credit</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="RSL_FILE in RECONSILE_STATEMENT_LIST  | filter :{'STATUS':StatementReconcileSearch.STATUS_ID}">
                                    <tr>
                                        <td class="text-nowrap"><i ng-show="RSL_FILE.FILE_INVOICE_DATE!=null" class="fal fa-calendar-alt text-blue"></i> {{RSL_FILE.FILE_INVOICE_DATE | date }}</td>
                                        <td class="text-nowrap">{{RSL_FILE.FILE_INVOICE_NUMBER}}</td>
                                        <td class="text-nowrap"><i ng-show="RSL_FILE.FILE_DUE_DATE!=null" class="fal fa-calendar-alt text-blue"></i> {{RSL_FILE.FILE_DUE_DATE | date }}</td>
                                        <td class="text-nowrap text-right"> {{RSL_FILE.FILE_DEBIT_AMOUNT | number:2}}</td>
                                        <td class="text-nowrap text-right">{{RSL_FILE.FILE_CREDIT_AMOUNT | number:2}}</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td class="text-bold text-nowrap text-right">Total</td>
                                        <td class="text-bold text-nowrap text-right">
                                            <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                            {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID}  | total:'FILE_DEBIT_AMOUNT' | number:2}}
                                        </td>
                                        <td class="text-bold text-nowrap text-right">
                                            <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                            {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID} | total:'FILE_CREDIT_AMOUNT' | number:2}}
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </td>
                        <td>
                            <table class="table table-font-10 compact_table">
                                <thead class="bg-light-blue">
                                    <tr>
                                        <th>&nbsp;</th>
                                    </tr>
                                </thead>
                                <thead class="bg-light-blue">
                                    <tr>
                                        <th class="text-center pt-0 pb-2px">
                                            <select class="custom-select custom-select-sm" style="height:25px;" name="STATUS_TYPE"
                                                    data-placeholder="Show Records"
                                                    ng-model="StatementReconcileSearch.STATUS_ID"
                                                    ng-options="PA.STATUS_ID  as PA.STATUS_NAME for PA in (STATUS_LIST)">
                                                <option value="">All Status</option>
                                            </select>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="RSL_STS in RECONSILE_STATEMENT_LIST | filter :{'STATUS':StatementReconcileSearch.STATUS_ID}">
                                    <tr>
                                        <td class="text-center">
                                            <span class="badge badge-light-red"
                                                  ng-class="{'badge-secondary':RSL_STS.STATUS==47,'badge-danger':RSL_STS.STATUS==46,'badge-light-green':RSL_STS.STATUS==45,'badge-light-red':RSL_STS.STATUS==44,'badge-light-grey':RSL_STS.STATUS==43}">
                                                {{RSL_STS.STATUS_NAME}}
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                        <td colspan="3">
                            <table class="table table-font-10 table-hover compact_table ">
                                <thead class="bg-light-blue">
                                    <tr>
                                        <th colspan="4">Invoices</th>
                                        <th class="text-right">Currency: <span ng-bind-html="CURRENCY_SYMBOL"></span></th>
                                    </tr>
                                </thead>
                                <thead class="bg-wenodo-border">
                                    <tr>
                                        <th class="text-nowrap">Invoice Date</th>
                                        <th>Number</th>
                                        <th class="text-nowrap">Due Date</th>
                                        <th class="text-right">Debit</th>
                                        <th class="text-right">Credit</th>
                                        <!--<th class="text-right">Amount</th>-->
                                    </tr>
                                </thead>
                                <tbody ng-repeat="RSL_XERO in RECONSILE_STATEMENT_LIST  | filter :{'STATUS':StatementReconcileSearch.STATUS_ID}">
                                    <tr>
                                        <td class="text-nowrap"><i class="fal fa-calendar-alt text-blue" ng-show="RSL_XERO.XERO_INVOICE_DATE !==null"></i> {{RSL_XERO.XERO_INVOICE_DATE | date }}</td>
                                        <td class="text-nowrap">{{RSL_XERO.XERO_INVOICE_NUMBER}}</td>
                                        <td class="text-nowrap"><i class="fal fa-calendar-alt text-blue" ng-show="RSL_XERO.XERO_DUE_DATE !==null"></i> {{RSL_XERO.XERO_DUE_DATE | date }}</td>
                                        <td class="text-nowrap text-right">{{RSL_XERO.XERO_DEBIT_AMOUNT | number:2}}</td>
                                        <td class="text-nowrap text-right">{{RSL_XERO.XERO_CREDIT_AMOUNT | number:2}}</td>
                                        <!--<td class="text-nowrap text-right">{{RSL_XERO.XERO_BALANCE_AMOUNT | number:2}}</td>-->
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td class="text-bold text-nowrap text-right">Total</td>
                                        <td class="text-bold text-nowrap text-right">
                                            <span ng-bind-html="CURRENCY_SYMBOL"></span> 
                                            {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID} | total:'XERO_DEBIT_AMOUNT' | number:2}}
                                        </td>
                                        <td class="text-bold text-nowrap text-right">
                                            <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                            {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID} | total:'XERO_CREDIT_AMOUNT' | number:2}}
                                        </td>
                                        <!--<td class="text-bold text-nowrap text-right">{{RECONSILE_STATEMENT_LIST | filter:{STATUS:StatementReconcileSearch.STATUS_ID} | total:'XERO_BALANCE_AMOUNT' | number:2}}</td>-->
                                    </tr>
                                </tfoot>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-md-12 px-0">
            <div class="form-group">
                <a ng-click="RECONCILE=false" class="btn btn-sm btn-wenodo mt-2">Send to Supplier</a>
            </div>
        </div>
    </div>
</div>
<div class="card" ng-show="!RECONCILE">
    <div class="card-header">
        <h5 class="heading-text-2">Send to Supplier</h5>
        <div class="card-tools">
            <ul class="nav nav-pills ml-auto">
                <li class="nav-item">
                    <a ng-click="RECONCILE=true" class="btn btn-sm btn-wenodo">Back</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <form novalidate id="SendtosupplierForm" name="SendtosupplierForm">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-2 text-bold mb-3">Send to </div>
                    <div class="col-md-10 mb-3">
                        <input type="text"
                               class="form-control"
                               name="SEND_TO"
                               ng-model="StatementReconcileSearch.EMAILS"
                               placeholder="restratech@wenodo.com"
                               required
                               ng-class="{'error':SendtosupplierForm.submitted && SendtosupplierForm.SEND_TO.$error.required}" />
                        <!--Wenodo PVT. LTD. <a class="cursor-pointer"><i class="fa fa-times-circle text-danger font-12"></i></a>
                    <button type="button" class="btn btn-sm btn-wenodo ml-2" data-toggle="tooltip" data-html="true" data-original-title="Add Email"><i class="far fa-plus"></i></button>-->
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 text-bold mb-3">Subject</div>
                    <div class="col-md-10 mb-3">
                        <input type="text"
                               class="form-control"
                               ng-model="StatementReconcileSearch.SUBJECT"
                               placeholder="Enter Subject"
                               required
                               name="SUBJECT"
                               ng-class="{'error':SendtosupplierForm.submitted && SendtosupplierForm.SUBJECT.$error.required}" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 text-bold mb-3">Body</div>
                    <div class="col-md-10 mb-3">
                        <textarea class="form-control"
                                  rows="5"
                                  ng-model="StatementReconcileSearch.BODY"
                                  placeholder="Your Message"
                                  required
                                  name="BODY"
                                  ng-class="{'error':SendtosupplierForm.submitted && SendtosupplierForm.BODY.$error.required}"></textarea>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover compact_table">
                    <thead class="bg-wenodo-border">
                        <tr>
                            <th>Invoice Date</th>
                            <th>Number</th>
                            <th>Due Date</th>
                            <th>Currency</th>
                            <th class="text-right">Debit</th>
                            <th class="text-right">Credit</th>
                            <!--<th class="text-right">Balance Amt.</th>-->
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="RSL_FILE in RECONSILE_STATEMENT_LIST  | filter :{'STATUS':StatementReconcileSearch.STATUS_ID}">
                        <tr>
                            <td class="text-nowrap"><i ng-show="RSL_FILE.FILE_INVOICE_DATE!=null" class="fal fa-calendar-alt text-blue"></i> {{RSL_FILE.FILE_INVOICE_DATE | date }}</td>
                            <td class="text-nowrap">{{RSL_FILE.FILE_INVOICE_NUMBER}}</td>
                            <td class="text-nowrap"><i ng-show="RSL_FILE.FILE_DUE_DATE!=null" class="fal fa-calendar-alt text-blue"></i> {{RSL_FILE.FILE_DUE_DATE | date }}</td>
                            <td><span ng-bind-html="CURRENCY_SYMBOL"></span></td>
                            <td class="text-nowrap text-right">{{RSL_FILE.FILE_DEBIT_AMOUNT | number:2}}</td>
                            <td class="text-nowrap text-right">{{RSL_FILE.FILE_CREDIT_AMOUNT | number:2}}</td>
                            <!--<td class="text-nowrap text-right">{{RSL_FILE.FILE_BALANCE_AMOUNT | number:2}}</td>-->
                            <td>
                                <textarea ng-model="RSL_FILE.REMARK"
                                          class="form-control"
                                          rows="1"
                                          name="REMARKS{{$index}}"
                                          required
                                          ng-class="{'error':SendtosupplierForm.submitted && SendtosupplierForm.REMARKS{{$index}}.$error.required}"></textarea>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3"></td>
                            <td class="text-bold text-nowrap text-right">Total</td>
                            <td class="text-bold text-nowrap text-right">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span> 
                                {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID}  | total:'FILE_DEBIT_AMOUNT'  | number:2}}
                            </td>
                            <td class="text-bold text-nowrap text-right">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                {{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID}  | total:'FILE_CREDIT_AMOUNT'  | number:2}}
                            </td>
                            <!--<td class="text-bold text-nowrap text-right">{{RECONSILE_STATEMENT_LIST | filter :{STATUS:StatementReconcileSearch.STATUS_ID}  | total:'FILE_BALANCE_AMOUNT'  | number:2}}</td>-->
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
                <div class="col-md-12">
                    <div data-ng-show="SendtosupplierForm.submitted && SendtosupplierForm.$invalid" class="form-group has-error errormessage badge badge-light-red w-100 p-3">
                        <span class="help-block errormessageline"><i class="fa fa-exclamation-triangle"></i> - Please provide the mandatory details to submit(marked in red).</span>
                    </div>
                    <div id="divInvlidUser" class="hideshowdiv" data-ng-show="SendtosupplierForm.$valid">
                        <span class="help-block">{{InvalidUser}}</span>
                    </div>
                </div>
            </div>
        </form>
    </div>
  

    <div class="modal-footer">
        <button type="button" ng-click="UPD_PYMNT_RECONSILE_SEND_TO_SUPPLIER()" class="btn btn-sm btn-wenodo">Submit</button>
        <button type="button" ng-click="RESET_SEND_TO_SUPPLIER()" class="btn btn-sm btn-w-default">Reset</button>
        <button type="button" ng-click="RECONCILE=true" class="btn btn-sm btn-w-default">Cancel</button>
    </div>
</div>

