<form name="EposValidationForm">
    <div class="card">
        <div class="card-header">
            <h5 class="card-title">EPOS Validations</h5>
            <a class="float-right" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                <i class="fas fa-chevron-down" data-toggle="tooltip" data-original-title="Show/Hide Filters"></i>
            </a>
        </div>
        <div class="collapse card-body pb-0" id="collapseExample">
            <div class="row">
                <div class="col" ng-init="$parent.dateinputOpenDate()">
                    <div class="form-group">
                        <label class="d-block">Select Date:</label>
                        <input type="text"
                               class="form-control dateinputOpenDate"
                               autocomplete="off"
                               name="DATE"
                               readonly
                               placeholder="Select ..."
                               ng-model="VALIDATION_SEARCH.START_DATE"
                               ng-value="VALIDATION_SEARCH.START_DATE | date"
                               ng-class="{'error':EposValidationForm.submitted && EposValidationForm.DATE.$error.required}" />

                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-0">
                        <label class="d-block">Entity:</label>
                        <!-- ng-change="ADMIN_GET_BRANCH()" -->
                        <select class="custom-select custom-select-sm"
                                name="BRANCH_ID"
                                ng-model="VALIDATION_SEARCH.ENTITY_ID"
                                ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in ENTITY_LIST"
                                ng-change="ADMIN_GET_BRANCH()"
                                ng-class="{'error':EposValidationForm.submitted && EposValidationForm.BRANCH_ID.$error.required}">
                            <option value="">- Please Select Entity-</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-0">
                        <label class="d-block">Branch:</label>
                        <select class="custom-select custom-select-sm"
                                name="BRANCH_ID"
                                ng-model="VALIDATION_SEARCH.BRANCH_ID"
                                ng-options="BL.BRANCH_ID as BL.BRANCH_NAME for BL in BRANCH_LIST"
                                ng-change="GET_INTEGRATION_DETAILS_BY_CUST_ENT_BRNH()"
                                ng-class="{'error':EposValidationForm.submitted && EposValidationForm.BRANCH_ID.$error.required}">
                            <option value="">- Please Select Branch-</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-0">
                        <label class="d-block">EPOS System:</label>
                        <select class="custom-select custom-select-sm"
                                name="INTEGRATION_SYSTEM_ID"
                                ng-model="VALIDATION_SEARCH.INTEGRATION_SYSTEM_ID"
                                ng-options="EL.INTEGRATION_SYSTEM_ID as EL.INTEGRATION_SYSTEM_NAME for EL in INTEGRATIONSYSTEM_LIST | filter:{INTEGRATION_TYPE_ID: 1} "
                                ng-class="{'error':EposValidationForm.submitted && EposValidationForm.INTEGRATION_SYSTEM_ID.$error.required}">
                            <option value="">- Please Select EPOS-</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-0">
                        <label class="d-block">Status:</label>
                        <select class="custom-select custom-select-sm"
                                name="BRANCH_ID"
                                ng-model="VALIDATION_SEARCH.STATUS"
                                ng-options="SL.STATUS_ID as SL.STATUS_NAME for SL in STATUS_LIST"
                                ng-class="{'error':EposValidationForm.submitted && EposValidationForm.STATUS_ID.$error.required}">
                            <option value="">- Please Status-</option>
                        </select>
                    </div>
                </div>
                <div class="col-auto">
                    <label class="d-block">&nbsp;</label>
                    <button type="button" class="btn btn-wenodo" click-once ng-click="GET_EPOS_SALES_VALIDATION(1)">Search</button>
                </div>
                <div class="col-auto">
                    <label class="d-block">&nbsp;</label>
                    <button type="button" class="btn btn-w-default" click-once ng-click="RESET_SEARCH()">Reset</button>
                </div>
            </div>
        </div>
    </div>


    <div class="card">
        <div class="card-body pt-0">
            <div class="row" ng-show="EPOS_SALES_LIST.length==0">
                <div class="col-md-12">
                    <div class="text-center" empty-grid></div>
                </div>
            </div>
            <div class="table-responsive custom-scrollbar mx-height-validations" ng-show="EPOS_SALES_LIST.length>0">

                <table class="table table-striped table-header-fixed compact_table mb-0">
                    <thead class="bg-wenodo-dark-blue">
                        <tr>
                            <th width="10%">Entity | Branch</th>
                            <th width="10%" class="text-nowrap">EPOS System</th>
                            <th class="text-nowrap" width="7%">Net Sales</th>
                            <th width="7%">Tax</th>
                            <th class="text-nowrap" width="7%">Gross Exc. Disc</th>
                            <th width="7%">Discounts</th>
                            <th width="7%">Tips</th>
                            <th class="text-nowrap" width="7%">Service Charge</th>
                            <th width="7%" class="text-right">Gross+Tips+Srv.chg</th>
                            <th width="10%">Attachments</th>
                            <th width="20%">Comments</th>
                            <th width="7%">Status</th>
                            <th class="text-center" width="7%">Actions</th>

                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="EPOS in EPOS_SALES_LIST" ng-init="init_EPOS_Upload_List(EPOS)" on-finish-render="ngRepeatFinished">
                            <td class="text-nowrap">
                                <span class="font-12">{{EPOS.ENTITY_NAME}}</span>
                                <span class="d-block font-10 text-secondary">{{EPOS.BRANCH_NAME}}</span>
                            </td>
                            <td>{{EPOS.SYSTEM_NAME}} ({{EPOS.ID}})</td>
                            <td class="text-right">
                                <input type="text" class="form-control text-right epos_entry_input"
                                       name="NET{{$index}}"
                                       id="NET{{$index}}"
                                       ng-model="EPOS.VALIDATION_NET" only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,1)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.NET{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_NET!=null">{{EPOS.EPOS_NET |number:2}}</span>
                                <span ng-show="EPOS.EPOS_NET==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <input type="text" class="form-control text-right epos_entry_input"
                                       ng-model="EPOS.VALIDATION_TAX"
                                       name="TAX{{$index}}"
                                       id="TAX{{$index}}"
                                       only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,2)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.TAX{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_TAX!=null">{{EPOS.EPOS_TAX |number:2}}</span>
                                <span ng-show="EPOS.EPOS_TAX==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <input type="text" class="form-control text-right epos_entry_input"
                                       ng-model="EPOS.VALIDATION_GROSS"
                                       name="GROSS{{$index}}"
                                       id="GROSS{{$index}}"
                                       only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,3)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.GROSS{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_GROSS!=null">{{EPOS.EPOS_GROSS |number:2}}</span>
                                <span ng-show="EPOS.EPOS_GROSS==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <input type="text" class="form-control text-right epos_entry_input"
                                       ng-model="EPOS.VALIDATION_DISCOUNT"
                                       name="DISCOUNT{{$index}}"
                                       id="DISCOUNT{{$index}}"
                                       only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,4)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.DISCOUNT{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_DISCOUNT!=null">{{EPOS.EPOS_DISCOUNT |number:2}}</span>
                                <span ng-show="EPOS.EPOS_DISCOUNT==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <input type="text" class="form-control text-right epos_entry_input"
                                       ng-model="EPOS.VALIDATION_TIPS"
                                       name="TIPS{{$index}}"
                                       id="TIPS{{$index}}"
                                       only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,5)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.TIPS{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_TIPS!=null">{{EPOS.EPOS_TIPS |number:2}}</span>
                                <span ng-show="EPOS.EPOS_TIPS==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <input type="text" class="form-control text-right  "
                                       ng-model="EPOS.VALIDATION_SERVICE_CHARGE"
                                       name="SERVICE_CHARGE{{$index}}"
                                       id="SERVICE_CHARGE{{$index}}"
                                       only-digits ng-blur="MATCH_VALIDATION_STATUS(EPOS,6)"
                                       ng-class="{'error':EposValidationForm.submitted && EposValidationForm.SERVICE_CHARGE{{$index}}.$error.required}" />
                                <span ng-show="EPOS.EPOS_SERVICE_CHARGE!=null">{{EPOS.EPOS_SERVICE_CHARGE |number:2}}</span>
                                <span ng-show="EPOS.EPOS_SERVICE_CHARGE==null">No data</span>

                            </td>
                            <td class="text-right text-nowrap">
                                <div class="form-control-view">{{EPOS.TOTAL_VALIDATION=(EPOS.VALIDATION_GROSS*1 + EPOS.VALIDATION_TIPS*1 + EPOS.VALIDATION_SERVICE_CHARGE*1)|number:2}}</div>
                                <span ng-show="EPOS.TOTAL_EPOS!=null">{{EPOS.TOTAL_EPOS=(EPOS.EPOS_GROSS*1 + EPOS.EPOS_TIPS*1 + EPOS.EPOS_SERVICE_CHARGE*1)|number:2}}</span>
                                <span ng-show="EPOS.TOTAL_EPOS==null || EPOS.TOTAL_EPOS==undefined"></span>

                            </td>

                            <td>
                                <div class="form-group mb-0 mt-2">
                                    <label for="certificate" class="btn btn-w-default text-blue">
                                        <input type="file"
                                               id="EPOSFILE{{$index}}"
                                               ng-files="getTheFilesToUploadEPOS($files, 'EPOSFILE', 5,EPOS,53,$index)"
                                               class="filepreviewprofile">
                                    </label>
                                    <div class="col-xxl-12 col-xl-12 col-md-12" ng-repeat="File in EPOS.UploadedFiles">
                                        <a class="truncate" href="../Uploads/{{File.FILE_PATH}}{{File.SERVER_FILE_NAME}}"
                                           download="{{_upls.SERVER_FILE_NAME}}"><i class="fa fa-download"></i> {{File.ORIGINAL_FILE_NAME| limitTo: 10}}</a>
                                        <span class="txt-danger c-pointer ms-auto"
                                              ng-click="DELETE_UPLOAD_VALIDATE_ALL(EPOS,File,$index)"><i class="fa fa-times text-danger fa-sm mt-2 float-right cursor-pointer"></i></span>
                                    </div>
                                    <!--<div class="col-xxl-12 col-xl-12 col-md-12" ng-repeat="_upls in EPOS.UploadedFiles">
                        <span class="form-control py-2 d-flex align-items-center">
                            <i class="fad fa-download text-blue"></i>
                            <a class="truncate" download="{{_upls.SERVER_FILE_NAME}}" href="../Uploads/{{_upls.FILE_PATH}}{{_upls.SERVER_FILE_NAME}}"> {{_upls.ORIGINAL_FILE_NAME| limitTo: 10}}</a>
                            <span class="txt-danger c-pointer ms-auto"
                                  ng-click="DELETE_UPLOAD_VALIDATE_ALL(EPOS,_upls,$index)"><i class="fa fa-times text-danger fa-sm mt-2 float-right cursor-pointer"></i></span>
                        </span>

                    </div>-->
                                </div>
                            </td>
                            <td>
                                <textarea class="form-control" rows="3"
                                          ng-model="EPOS.COMMENTS"
                                          id="COMMENTS{{$index}}"
                                          name="COMMENTS{{$index}}"></textarea>
                            </td>
                            <td>
                                <span class="badge badge-light-orange" ng-show="EPOS.STATUS==null || EPOS.STATUS==1">Pending</span>
                                <span class="badge badge-light-red" ng-show="EPOS.STATUS==2">MisMatch</span>
                                <span class="badge badge-light-green" ng-show="EPOS.STATUS==3">Match</span>
                                <!--<span class="badge badge-light-blue">{{EPOS.STATUS  ?'Match':'MisMatch'}}</span>-->

                            </td>
                            <td class="text-center">
                                <div class="btn-group">
                                    <button type="button" class="btn" click-once ng-click="INS_UPD_EPOS_SALES_VALIDATION(EPOS,1)" ng-disabled="EPOS.EPOS_SALES_VALIDATION_ID==null"><i class="fal fa-edit text-success"></i></button>
                                    <!--<button type="button" class="btn" click-once ng-click="RESET_EPOS(EPOS)" ng-disabled="EPOS.EPOS_SALES_VALIDATION_ID==null"><i class="fal fa-trash-alt text-danger" ></i></button>-->
                                    <button type="button" class="btn btn-tool" click-once>
                                        <!--&& (CASHUP.CashUp_Main_STATUS_ID==3 || CASHUP.CashUp_Main_STATUS_ID==4)-->
                                        <i class="fas fa-sync-alt " data-toggle="tooltip" data-html="true" data-original-title="Sync EPOS Data" ng-click="EPOS_REFRESH(EPOS,7)"></i>
                                    </button>
                                </div>
                            </td>

                        </tr>
                        <!--<tr>
            <td class="text-nowrap">Noble Rot</td>
            <td>LCS</td>
            <td>K Series</td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td><input type="text" value="50" class="form-control" disabled /></td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td><input type="text" value="10" class="form-control" disabled /></td>
            <td>
                <div class="form-group mb-0 mt-2">
                    <label for="certificate" class="btn btn-w-default text-blue">
                        Upload
                    </label>
                    <span class="hidden-input">
                        <input id="certificate" name="file" type="file" />
                    </span>

                </div>
            </td>
            <td>
                <textarea class="form-control" rows="3" disabled></textarea>
            </td>
            <td><span class="badge badge-success">Submitted</span></td>
            <td class="text-center">
                <div class="btn-group">
                    <button type="button" class="btn"><i class="fal fa-edit text-success"></i></button>
                    <button type="button" class="btn"><i class="fal fa-trash-alt text-danger"></i></button>
                </div>
            </td>
        </tr>-->
                    </tbody>

                    <tfoot>
                        <tr>
                            <td colspan="13" align="center" ng-show="GetData">
                                <a class="btn btn-secondary text-white" ng-click="LAZY_GET_EPOS_SALES_VALIDATION();">{{VIEWMORERECORD}}</a>
                            </td>
                        </tr>
                    </tfoot>
                </table>

            </div>

        </div>

        <div class="card-footer pt-0 bg-white" ng-show="EPOS_SALES_LIST.length>0">
            <button type="button" class="btn btn-wenodo" click-once ng-click="INS_UPD_EPOS_SALES_VALIDATION()">Save</button>
        </div>

    </div>
</form>