<form id="EmailFalloutForm" name="EmailFalloutForm" novalidate >
    <div class="card-header">
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label>Customer:</label>
                    <select class="custom-select"
                            name="CUSTOMER_ID"
                            ng-model="EmailFalloutSearch.CUSTOMER_ID"
                            ng-options="CL.CUSTOMER_ID as CL.CUSTOMER_NAME for CL in CUSTOMER_LIST "
                            ng-change="GET_ENTITY_LIST()">
                        <option value="">- Please Select Customer-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Entity:</label>
                    <select class="custom-select"
                            name="ENTITY_ID"
                            ng-model="EmailFalloutSearch.ENTITY_ID"
                            ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in ENTITY_LIST"
                            >
                        <option value="">- Please Select Entity-</option>
                    </select>
                </div>
            </div>
            <!--<div class="col-md-4">
                <div class="form-group">
                    <label>Entity:</label>
                    <select class="custom-select"
                            name="ENTITY_ID"
                            ng-model="EmailFalloutSearch.ENTITY_ID"
                            ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in ENTITY_LIST"
                            required>
                        <option value="">- Please Select Entity-</option>
                    </select>
                </div>
            </div>-->
            <div class="col-md-4">
                <div class="form-group">
                    <label>Notification:</label>
                    <select class="select2" id="mySelect2" multiple="multiple" data-placeholder="Select Notification"
                            name="NOTIFICATION_MASTER_IDS"
                            ng-model="EmailFalloutSearch.NOTIFICATION_MASTER_IDS"
                            ng-options="NL.TABLE_ID as NL.NOTIFICATION_NAME for NL in NOTIFICATION_LIST" style="width:100%;">
                        <option></option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>User Name/E-mail:</label>
                    <input type="text"
                           class="form-control"
                           autocomplete="off"
                           name="USER_NAME_EMAIL"
                           placeholder="Enter ..."
                           ng-model="EmailFalloutSearch.USER_NAME_EMAIL" />
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="form-group">
                    <label class="d-block">Status:</label>
                    <select class="select2 w-100" multiple="multiple" data-placeholder="Select Status"
                            name="STATUS_IDS"
                            ng-model="EmailFalloutSearch.STATUS_IDS"
                            ng-options="SL.STATUS_ID as SL.STATUS_NAME for SL in STATUS_ID_LIST">
                        <option></option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label class="d-block">&nbsp;</label>
                    <button ng-click="GET_NOTIFICATIONS_LOG(1);" class="btn btn-wenodo">Search</button>
                    <button ng-click="EMAIL_RESET_FALLOUT();" class="btn btn-w-default">Reset</button>
                </div>
            </div>

        </div>
    </div>

    <div class="card-body">
        <div class="text-center" ng-show="EMAIL_NOTIFICATION_LOG_LIST.length==0" empty-grid>
        </div>
        <div class="table-responsive custom-scrollbar height-auto" ng-show="EMAIL_NOTIFICATION_LOG_LIST.length>0">
            <table class="table table-striped">
                <thead class="bg-wenodo-dark-blue">
                    <tr>
                        <th></th>
                        <th class="text-nowrap">Customer</th>
                        <th class="text-nowrap">Entity</th>
                        <th class="text-nowrap">Module</th>
                        <th class="text-nowrap">Notification</th>
                        <th class="text-nowrap">Status</th>
                        <th class="text-nowrap">User Name</th>
                        <th class="text-nowrap">User Email</th>
                        <th class="text-nowrap">Created Date</th>
                        <th></th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <td colspan="10" align="center" ng-show="GetData">
                            <a class="btn btn-secondary text-white" ng-click="LAZY_GET_NOTIFICATIONS_LOG()">{{VIEWMORERECORD}}</a>
                        </td>
                    </tr>
                </tfoot>
                <tbody ng-repeat="EL in EMAIL_NOTIFICATION_LOG_LIST">
                    <tr>
                        <td>{{$index+1}}. </td>
                        <td>{{EL.CUSTOMER_NAME}}</td>
                        <td>{{EL.ENTITY_NAME}}</td>
                        <td>{{EL.MODULE_NAME}}</td>
                        <td>{{EL.NOTIFICATION_NAME}}</td>
                        <td>{{EL.STATUS}}</td>
                        <td>{{EL.USER_NAME}}</td>
                        <td>{{EL.USER_EMAIL}}</td>
                        <td>{{EL.CREATED_DATE | date}}</td>
                        <td><button ng-click="RESEND_NOTIFICATION(EL,$index+1);" class="btn btn-wenodo btn-sm" id={{$index+1}}>Send</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</form>
<script type="text/javascript">
    //Initialize Select2 Elements
    $(".select2").select2({
        containerCssClass: function (e) {
            return $(e).attr('required') ? 'required' : '';
        }
    });
</script>