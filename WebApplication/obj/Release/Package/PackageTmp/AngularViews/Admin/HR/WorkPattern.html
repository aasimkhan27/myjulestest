<form id="WrkForm" name="WrkForm" novalidate>
    <div class="card-header">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <label>Customer:*</label>
                    <select class="custom-select"
                            name="CUSTOMER_ID"
                            ng-model="WrkPtnSearch.CUSTOMER_ID"
                            ng-options="CL.CUSTOMER_ID as CL.CUSTOMER_NAME for CL in CUSTOMER_LIST "
                            required
                            ng-change="GET_ENTITY_LIST()"
                            ng-class="{'error':WrkForm.submitted && WrkForm.CUSTOMER_ID.$error.required}">
                        <option value="">- Select Customer-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label>Entity:*</label>
                    <select class="custom-select"
                            name="ENTITY_ID"
                            ng-model="WrkPtnSearch.ENTITY_ID"
                            ng-options="EL.ENTITY_ID as EL.ENTITY_NAME for EL in ENTITY_LIST"
                            required
                            ng-change="ADMIN_GET_ENTITY_SETTINGS();"
                            ng-class="{'error':WrkForm.submitted && WrkForm.ENTITY_ID.$error.required}">
                        <option value="">- Select Entity-</option>
                    </select>
                </div>
            </div>

            <div class="col-md-3">
                <div class="form-group">
                    <label>Work Patterns Type:*</label>
                    <select class="custom-select"
                            name="WORK_PATTERN_TYPE_ID"
                            ng-options="WPT.WORK_PATTERN_TYPE_ID as WPT.WORK_PATTERN_TYPE for WPT in (WORK_PATTERN_TYPES)"
                            ng-model="WrkPtnSearch.WORK_PATTERN_TYPE_ID"
                            required
                            ng-change="SELECT_SHIFT_TYPES()"
                            ng-class="{'error':WrkForm.submitted && WrkForm.WORK_PATTERN_TYPE_ID.$error.required}">
                        <option value="">-Select Work Patterns Type-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label> Code:*</label>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.WORK_PATTERN_CODE"
                           name="WORK_CODE"
                           required
                           ng-class="{'error':WrkForm.submitted && WrkForm.WORK_CODE.$error.required}">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label> Name:*</label>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.WORK_PATTERN_NAME"
                           name="WORK_NAME"
                           required
                           ng-class="{'error':WrkForm.submitted && WrkForm.WORK_NAME.$error.required}">
                </div>
            </div>

            <div class="col-md-9">
                <div class="form-group">
                    <label> Description:</label>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.WORK_PATTERN_DESC"
                           name="WORK_DESC"
                           ng-class="{'error':WrkForm.submitted && WrkForm.WORK_DESC.$error.required}">
                </div>
            </div>

            <div class="col-md-2">
                
                <div class="form-group">
                    <label class="d-block mb-0">Average Daily <span class="font-11">(Hrs)</span>:*</label>
                    <span class="font-11 ml-1">{{WrkPtnSearch.AVG_DAILY_HOURS=((((SHIFT_LIST | filter:FILTERBYSHIFT) | total:'WORKING_HOURS')/((SHIFT_LIST | filter:FILTERBYSHIFT).length))/60 | number:2)==0?'0.00':((((SHIFT_LIST | filter:FILTERBYSHIFT) | total:'WORKING_HOURS')/((SHIFT_LIST | filter:FILTERBYSHIFT).length))/60 | number:2)}}</span>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.AVG_DAILY_HOURS_TEXT"
                           name="AVG_DAILY_HOURS"
                           required
                           only-digits
                           maxlength="6"
                           ng-class="{'error':WrkForm.submitted && WrkForm.AVG_DAILY_HOURS.$error.required}">

                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="d-block mb-0">Average Weekly <span class="font-11">(Hrs)</span>:*</label>
                    <span class="font-11 ml-1">{{WrkPtnSearch.AVG_WEEKLY_HOURS=(((WrkPtnSearch.AVG_DAILY_HOURS*((SHIFT_LIST | filter:FILTERBYSHIFT).length))) | number:2)==0?'0.00':(((WrkPtnSearch.AVG_DAILY_HOURS*((SHIFT_LIST | filter:FILTERBYSHIFT).length))) | number:2)}}</span>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           required
                           only-digits
                           maxlength="6"
                           ng-model="WrkPtnSearch.AVG_WEEKLY_HOURS_TEXT"
                           name="AVG_WEEKLY_HOURS"
                           ng-class="{'error':WrkForm.submitted && WrkForm.AVG_WEEKLY_HOURS.$error.required}">
                    <!--ng-value="WrkPtnSearch.AVG_WEEKLY_HOURS=(((WrkPtnSearch.AVG_DAILY_HOURS*((SHIFT_LIST | filter:FILTERBYSHIFT).length)))/WORKING_DAY_SETTING | number:2)"-->

                </div>
            </div>

            <div class="col-md-2">
                <div class="form-group">
                    <label class="d-block mb-0">Average Monthly <span class="font-11">(Hrs)</span>:*</label>
                    <span class="font-11 ml-1">{{WrkPtnSearch.AVG_MONTHLY_HOURS=(WrkPtnSearch.AVG_WEEKLY_HOURS*52/12 | number:2)}}</span>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.AVG_MONTHLY_HOURS_TEXT"
                           required
                           only-digits
                           maxlength="6"
                           name="AVG_MONTHLY_HOURS"
                           ng-class="{'error':WrkForm.submitted && WrkForm.AVG_MONTHLY_HOURS.$error.required}">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="d-block mb-0">Average Yearly <span class="font-11">(Hrs)</span>:*</label>
                    <span class="font-11 ml-1">{{WrkPtnSearch.AVG_YEARLY_HOURS=(WrkPtnSearch.AVG_WEEKLY_HOURS*52 | number:2)}}</span>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.AVG_YEARLY_HOURS_TEXT"
                           required
                           only-digits
                           maxlength="6"
                           name="AVG_YEARLY_HOURS"
                           ng-class="{'error':WrkForm.submitted && WrkForm.AVG_YEARLY_HOURS.$error.required}">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label  class="text-nowrap d-block mb-0">Average Shifts <span class="font-11">(Weekly)</span>:*</label>
                    <span class="font-11 ml-1">{{WrkPtnSearch.SHIFT_COUNT=(((SHIFT_LIST | limitTo:7) | filter:FILTERBYSHIFT).length)}}</span>
                    <input type="text"
                           class="form-control"
                           placeholder="Enter ..."
                           ng-model="WrkPtnSearch.SHIFT_COUNT_TEXT"
                           name="SHIFT_COUNT"
                           required
                           only-digits
                           maxlength="2"
                           ng-class="{'error':WrkForm.submitted && WrkForm.SHIFT_COUNT.$error.required}">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="d-block">&nbsp;</label>
                    <span class="font-11 ml-1">&nbsp;</span>
                    <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="Work_Pattern_Active"
                               ng-model="WrkPtnSearch.ACTIVE">
                        <label for="Work_Pattern_Active" class="custom-control-label">Active</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div data-ng-show="WrkForm.submitted && WrkForm.$invalid" class="form-group has-error errormessage form-group has-error errormessage badge badge-light-red w-100 p-3">
            <span class="help-block errormessageline" style="padding-left:0px;"><i class="fa fa-exclamation-triangle"></i> - Please provide the mandatory details to submit(marked in red).</span>
        </div>
        <div id="divInvlidUser" class="hideshowdiv" data-ng-show="WrkForm.$valid">
            <span class="help-block">{{InvalidUser}}</span>
        </div>
    </div>
    <div class="card-body" ng-show="SHIFT_LIST.length>0">
        <div class="table-responsive custom-scrollbar height-auto">
            <table class="table table-striped">
                <thead class="bg-wenodo-dark-blue">
                    <tr>
                        <th class="day-name">Day No</th>
                        <th class="day-name">Shift</th>
                        <th class="day-name">Start Time</th>
                        <th class="day-name">End Time</th>
                        <th class="day-name">Paid Break<small>(Min)</small></th>
                        <th class="day-name">UnPaid Break<small>(Min)</small></th>
                        <th class="day-name">Working<small>(Min)</small> </th>
                    </tr>
                </thead>
                <tbody ng-repeat="CL in SHIFT_LIST">
                    <tr>
                        <td>
                            {{CL.DAY_NO}}
                        </td>
                        <td>
                            <span ng-show="false">{{CL.SHIFT=(SHIFTS | filter:{SHIFT_ID:CL.SHIFT_ID})[0]}}</span>
                            <select class="custom-select"
                                    name="SHIFT_TITLE{{$index}}"
                                    ng-options="Sht as Sht.SHIFT_TITLE for Sht in (SHIFTS)"
                                    ng-model="CL.SHIFT"
                                    ng-change="NG_SHIFT_CHANGES(CL,CL.SHIFT)">
                                <option value="">- OFF -</option>
                            </select>
                        </td>
                        <td>{{CL.START_TIME}}</td>
                        <td>{{CL.END_TIME}}</td>
                        <td>
                            <input type="text"
                                   maxlength="3"
                                   only-digits
                                   name="PAID_BREAK{{$index}}"
                                   class="form-control"
                                   ng-model="CL.PAID_BREAK"/>
                        </td>
                        <td>
                            <input type="text"
                                   maxlength="3"
                                   only-digits
                                   class="form-control"
                                   ng-model="CL.UN_PAID_BREAK"
                                   name="UN_PAID_BREAK{{$index}}"/>
                        </td>
                        <td>{{CL.WORKING_HOURS=(CL.DURATION-CL.UN_PAID_BREAK | number:2)}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="col-md-12">
            <div class="form-group">
                <button class="btn btn-wenodo" ng-click="HR_INS_UPD_WORK_PATTERNS()"> Save Work Patterns</button>
                <!--<button class="btn btn-w-default" ng-click="RESET_WORK_PATTERNS()">Reset</button>-->
                <a href="#!/WorkPatternList" class="btn btn-w-default"> Back</a>
            </div>
        </div>
    </div>
</form>