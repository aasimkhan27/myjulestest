<div class="card-header">
    <h5 class="card-title">Cash Banking</h5>
    <div class="card-tools">
        <!--<ul class="nav nav-pills ml-auto">
            <li class="nav-item"><button type="button" class="btn btn-wenodo" data-toggle="modal" ng-show="CASH_BANKING_LIST[0].UPLOADER_FLAG==1" ng-click="CREATE_ENTRY();" >Create Entry</button></li>
        </ul>-->

    </div>
</div>
<div class="card-body">
    <div class="row">
        <div class="col">
            <div class="form-group">
                <select name="BRANCH" class="custom-select"
                        ng-options="BRL.BRANCH_ID as BRL.BRANCH_NAME for BRL in BRANCH_LIST"
                        ng-model="CashBankingSearch.BRANCH_ID">
                    <option value="">- All Branches-</option>
                </select>
            </div>
        </div>
        <div class="col" ng-init="$parent.dateinputOpenDate()">
            <div class="form-group input-group">
                <input type="text"
                       class="form-control dateinputOpenDate bg-white"
                       autocomplete="off"
                       readonly
                       name="END_DATE_FORM"
                       ng-model="CashBankingSearch.FROM_DATE"
                       placeholder="From Date" ng-value="CashBankingSearch.FROM_DATE |date" />
                <input type="text"
                       class="form-control dateinputOpenDate bg-white"
                       autocomplete="off"
                       readonly
                       name="END_DATE_FORM"
                       ng-model="CashBankingSearch.TO_DATE"
                       placeholder="To Date"
                       ng-value="CashBankingSearch.TO_DATE |date" />
            </div>
        </div>
        <div class="col">
            <div class="form-group">
                <select class="custom-select" ng-model="CashBankingSearch.STATUS_IDS">
                    <option value="">-Select Status-</option>

                    <option value="7">Draft</option>
                    <option value="6">Submitted</option>
                    <option value="8">In Approval</option>
                    <option value="9">Approved</option>
                    <option value="10">Rejected</option>
                </select>
            </div>
        </div>
        <div class="col-auto">
            <div class="form-group">
                <button ng-click="GET_CASH_BANKING_LIST(1, 4, false);" class="btn btn-wenodo" data-toggle="tooltip" data-html="true" data-original-title="Search">Search</button>
                <button class="btn btn-w-default" ng-click="BANKING_CASHUP_RESET();">Reset</button>
               
                <!-- CASH_BANKING_LIST[0].UPLOADER_FLAG==1 -->
            </div>
        </div>
    </div>
    <div class="table-responsive">
        <div class="text-center" ng-show="CASH_BANKING_LIST.length==0" empty-grid></div>
        <table class="table table-striped table-hover" ng-show="CASH_BANKING_LIST.length>0">
            <thead class="bg-wenodo-dark-blue">
                <tr>
                    <th>Branch Name</th>
                    <th>From Date</th>
                    <th>To Date</th>
                    <!--<th>Approved By</th>-->
                    <th>Status</th>
                    <th width="2%">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="CBL in CASH_BANKING_LIST">
                    <td> {{CBL.BRANCH_NAME}}</td>
                    <td><i class="far fa-calendar-alt"></i> {{CBL.FROM_DATE|date}} </td>
                    <td><i class="far fa-calendar-alt"></i> {{CBL.TO_DATE|date}} </td>
                    <td>
                        <!--<span class="badge badge-light-orange" ng-show="CBL.CASH_BANKING_STATUS_ID==6">Submitted</span>-->
                        <span class="badge badge-light-green" ng-show="CBL.CASH_BANKING_STATUS_ID==6">Submitted</span>
                        <span class="badge badge-light-green" ng-show="CBL.CASH_BANKING_STATUS_ID==8">In Approval</span>
                        <span class="badge badge-light-green bg-green" ng-show="CBL.CASH_BANKING_STATUS_ID==9">Approved</span>
                        <span class="badge badge-light-blue" ng-show="CBL.CASH_BANKING_STATUS_ID==7">Draft</span>
                        <span class="badge badge-light-red" ng-show="CBL.CASH_BANKING_STATUS_ID==10">Rejected</span>
                    </td>
                    <!--<td>{{CBL.FROM_DATE|date}} </td>-->
                    <!--<td><a href="#!Cash_Banking_Edit?v={{CBL.CASH_BANKING_HEADER_ID}}&B={{CBL.BRANCH_ID}}&A={{CBL.APPROVER_FLAG}}" ng-click="EDIT_BANKING_REDIRECT(CBL)"><i class="fad fa-edit text-success"></i></a></td>-->

                    <td><button type="button" class="btn btn-sm" data-toggle="tooltip" data-html="true" data-original-title="View" ng-click="CASHBANKING_EDIT(CBL);"><i class="fad fa-eye fa-lg app-text cursor-pointer"></i></button></td>

                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="text-center table-footer-fixed" colspan="5">
                        <a class="btn btn-sm btn-secondary text-white" ng-show="GetData" click-once ng-click="CASH_BANKING_LIST_LAZY_LOAD()">{{VIEWMORERECORD}}</a>
                        <div class="form-inline float-right">
                            <label class="mr-2">Show Records</label>
                            <select class="custom-select custom-select-sm w-50px" name="STATUS_TYPE"
                                    data-placeholder="Show Records"
                                    ng-model="CashBankingSearch.PAGE_SIZE"
                                    ng-change="GET_CASH_BANKING_LIST(1,SORT_COLUMN_NO, SORT_ORDER_NO_ASCDESC)"
                                    ng-options="PA.ID  as PA.NAME for PA in (PAGE_ARRAY_LIST)"></select>
                        </div>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<div class="modal fade" id="Create_Entry" aria-modal="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">
                    Create Entry
                </h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="BANKING_CASHUP_RESET();">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body custom-scrollbar mx-height-400 pt-0 mt-2 pb-3">
                <div class="row align-items-center sticky-top bg-white shadow-sm mr-0 pr-0">
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12">Branch Name </label>
                            <select name="BRANCH" class="custom-select" style="height: unset;" ng-change="GET_ENTITY_STAFF();"
                                    ng-options="BRL.BRANCH_ID as BRL.BRANCH_NAME for BRL in BRANCH_LIST" ng-disabled="true"
                                    ng-model="CashBankingSearch.BRANCH_ID" ng-class="{'error':CashBankingSearch.BRANCH_ID_VALID==false}">
                                <option value="">- All Branches-</option>
                            </select>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12">
                                From Date 
                            </label>
                         
                            <div class="input-group date" id="reservationdate" data-target-input="nearest" ng-init="DateInputLoadEndDate();">
                                <input name="datecontrol" type="text" readonly="readonly" ng-change="SET_DATEVALUE();" ng-model="CashBankingSearch.FROM_DATE" ng-value="CashBankingSearch.FROM_DATE |date"
                                       class="form-control form-control-sm date_hover DateInputLoadEndDate" ng-class="{'error':CashBankingSearch.FROM_DATE_VALID==false}" ng-disabled="true" />
                            </div>
                        </div>
                    </div>
                    <!--class="form-control date_hover dateinputOpenDate" ng-class="{'error':CashBankingSearch.FROM_DATE_VALID==false}"
                    ng-class="'form-control date_hover dateinputOpenDate': (!CashBankingSearch.FROM_DATE_VALID || CashBankingSearch.FROM_DATE_VALID),'error':!CashBankingSearch.FROM_DATE_VALID"
                    -->
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12">
                                To Date 
                            </label>
                            <div class="input-group date" id="reservationdate" data-target-input="nearest">
                                <input class="form-control form-control-sm date_hover DateInputLoadEndDate" name="datecontrol" type="text" ng-change="SetEndCompleteDate();"
                                       readonly="readonly" ng-model="CashBankingSearch.TO_DATE" ng-class="{'error':!CashBankingSearch.TO_DATE_VALID}" ng-value="CashBankingSearch.TO_DATE |date" ng-disabled="true" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="font-12 mb-11">EPOS Cash (<span class="ng-binding" ng-bind-html="CURRENCY_SYMBOL"></span>)</label>
                            <!-- <span style="color:red;" ng-show="CashBankingSearch.OVERLAPPING.length>0">Data submit and not overlapping.</span> -->
                            <!--<span class="semibold" ng-bind-html="CURRENCY_SYMBOL">{{CashBankingSearch.EPOS_CASH}}</span>-->
                            <!--<input type="text" class="form-control form-control-sm" only-digits ng-model="CashBankingSearch.EPOS_CASH"  />-->
                            <span class="font-13">{{CashBankingSearch.EPOS_CASH|number : TO_NUMBER_DECIMAL_TWO}} </span>

                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12">Bankable Cash  (<span class="ng-binding" ng-bind-html="CURRENCY_SYMBOL"></span>)</label>
                            <!--<input type="text" class="form-control form-control-sm" only-digits ng-model="CashBankingSearch.BANKABLE_CASH" ng-blur="SET_VARINCE();" ng-class="{'error':!CashBankingSearch.BANKABLE_CASH_VALID}" ng-disabled="CASH_BANKING_LIST[0].UPLOADER_FLAG==0" />-->
                            <input type="text" class="form-control form-control-sm" only-digits ng-model="CashBankingSearch.BANKABLE_CASH" ng-disabled="true"  />

                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12 mb-11">Total Banked  (<span class="ng-binding" ng-bind-html="CURRENCY_SYMBOL"></span>)</label>
                            <span class="font-13">{{(BANKINGLIST | total:'BANKED_AMOUNT')| number:2 }}</span>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label class="font-12 mb-11">Variance (<span class="ng-binding" ng-bind-html="CURRENCY_SYMBOL"></span>)</label>
                            <!--<span class="font-13" ng-show="CashBankingSearch.VARIANCE!=null"> {{CashBankingSearch.VARIANCE| number : TO_NUMBER_DECIMAL_TWO}}</span>
                            <span class="font-13" ng-show="CashBankingSearch.VARIANCE==null">0.00</span>-->
                            <span class="font-13" ng-show="CashBankingSearch.VARIANCE!=null">{{(CashBankingSearch.VARIANCE=CashBankingSearch.BANKABLE_CASH-(BANKINGLIST | total:'BANKED_AMOUNT'))|number:2}} </span>
                            <span class="font-13" ng-show="false" ng-class="{'text-danger':CashBankingSearch.EPOS_VARIANCE<0}">{{CashBankingSearch.EPOS_VARIANCE|number:2}}</span>

                        </div>
                    </div>
                </div>
                <form action="" class="input_cards_value mt-3">
                    <div class="row align-items-center">

                        <div class="col-lg-1">
                            <label class="font-12" for="amex">Banked Amount</label>
                        </div>
                        <div class="col-lg-2">
                            <label class="font-12" for="visa">Deposited By </label>
                        </div>
                        <div class="col-lg-2">
                            <label class="font-12" for="mastercard">Deposit Date</label>
                        </div>

                        <div class="col-lg-2">
                            <label class="font-12" for="dinner">Bank Slip Ref </label>
                        </div>
                        <div class="col-lg-2">
                            <label class="font-12" for="dinner">Notes</label>
                        </div>
                        <div class="col-lg-2">
                            <label class="font-12" for="dinner">Uploads</label>
                        </div>
                        <!--<div class="col-lg-1" ng-hide="CASH_BANKING_LIST[0].UPLOADER_FLAG==0">
                            <label class="font-12" for="note">Actions</label>
                        </div>-->
                    </div>
                    <div class="row" ng-repeat="BNK in BANKINGLIST" ng-init="ValidControls(BNK);initcashList(BNK);">

                        <div class="col-lg-1">
                            <div class="form-group">
                                <input type="text" class="form-control form-control-sm" only-digits ng-model="BNK.BANKED_AMOUNT" ng-class="{'error':!BNK.BANKED_AMOUNT_VALID}" ng-disabled="true">
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <!-- <input type="text" class="form-control form-control-sm" ng-model="BNK.DEPOSITED_BY" ng-class="{'error':!BNK.DEPOSITED_BY_VALID}"> ng-blur="SET_VARIENCELIST(BNK)" ||  ng-disabled="BNK.ISVALID==false"-->
                                <select class="custom-select" style="height: unset;" ng-class="{'error':!BNK.DEPOSITED_BY_VALID}"
                                        ng-options="CL.ID as CL.NAME for CL in StaffList"
                                        ng-model="BNK.DEPOSITED_BY" ng-disabled="true">
                                    <option value="">- Please Select-</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <div class="input-group input-group-sm date" data-target-input="nearest" ng-init="DateInputLoadEndDate();">
                                    <input class="form-control date_hover DateInputLoadEndDate" name="datecontrol{{$index}}" type="text" style="padding: 0rem 0.25rem;" 
                                           readonly="readonly" ng-model="BNK.DEPOSIT_DATE" ng-change="SetEndCompleteDate_Deposite(BNK);" ng-class="{'error':!BNK.DEPOSIT_DATE_VALID}" ng-value="BNK.DEPOSIT_DATE|date" ng-disabled="true" />
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2">
                            <div class="form-group">
                                <input type="text" class="form-control form-control-sm" ng-model="BNK.BANK_SLIP" ng-class="{'error':!BNK.BANK_SLIP_VALID}" ng-disabled="true">
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <input type="text" class="form-control form-control-sm" ng-model="BNK.NOTES" ng-disabled="true">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <!--<span ng-hide="(CashBankingSearch.CASH_BANKING_STATUS==8||CASH_BANKING_LIST[0].UPLOADER_FLAG==0)?true:false">-->
                                <span ng-show="CashBankingSearch.CASH_BANKING_STATUS==6 || CashBankingSearch.CASH_BANKING_STATUS==7||(CashBankingSearch.CASH_BANKING_STATUS==10 && CASH_BANKING_LIST[0].UPLOADER_FLAG==1)||SHOWBUTTON == true;">
                                    <label for="CashBankingFile{{$index}}" class="btn btn-sm btn-upload text-nowrap" ng-show="BNK.UploadedFiles==null || BNK.UploadedFiles.length==0">
                                        <i class="fal fa-upload text-white"></i>
                                    </label>
                                </span>
                                <span class="hidden-input" ng-hide="true">
                                    <input id="CashBankingFile{{$index}}" ng-files="getTheFilesToUploadCashBanking($files, 'CashBankingFile', 5,BNK,27,$index)" name="file" type="file" />
                                </span>
                                <span class="d-block" ng-repeat="upls in BNK.UploadedFiles">
                                    <!--<br ng-if="$index!=0" />
                                    <span ng-if="$index!=0" />-->
                                    <!--<a download="{{upls.SERVER_FILE_NAME}}" href="/uploads/{{upls.FILE_PATH}}{{upls.ORIGINAL_FILE_NAME}}">  <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME}}</a>-->

                                    <a download="{{upls.SERVER_FILE_NAME}}" class="text-xs file_name_Limit" href="/Uploads/{{upls.FILE_PATH}}{{upls.SERVER_FILE_NAME}}">  <i class="fad fa-download text-blue"></i> {{upls.ORIGINAL_FILE_NAME}}</a>
                                    <!--<i ng-click="DELETE_UPLOAD_CASH_ALL(BNK,upls,$index)" class="fa fa-times text-danger fa-sm mt-1 float-right cursor-pointer" ng-hide="(CashBankingSearch.CASH_BANKING_STATUS==8||CashBankingSearch.CASH_BANKING_STATUS==9||CASH_BANKING_LIST[0].UPLOADER_FLAG==0)?true:false"></i>-->
                                </span>
                            </div>
                        </div>
                        <!--<div class="col-lg-1">
                            <div class="d-flex">
                                <a class="add_dreceived_button cursor-pointer" ng-click="AddBankLine(BNK)" ng-show="$last"><i class="fas fa-plus-circle ml-2" ng-hide="CASH_BANKING_LIST[0].UPLOADER_FLAG==0"></i></a>
                                <a class="add_dreceived_button cursor-pointer" ng-click="DeleteLine(BNK,$index);" ng-hide="BNK.ISVALID==true||CASH_BANKING_LIST[0].UPLOADER_FLAG==0"><i class="fas fa-minus-circle ml-2"></i></a>

                            </div>
                        </div>-->
                    </div>
                    <div class="card-blue text-left" ng-show="false">
                        <div class="row">
                            <div class="col-lg-4">
                                <b> Actual:</b> <span ng-show="CashBankingSearch.BANKABLE_CASH!=null"> {{CashBankingSearch.BANKABLE_CASH| number:2 }}</span>
                                <span ng-show="CashBankingSearch.BANKABLE_CASH==null">0.00</span>
                            </div>
                            <div class="col-lg-4">
                                <b>Variance:</b> <span ng-show="CashBankingSearch.VARIANCE!=null"> {{CashBankingSearch.VARIANCE| number : TO_NUMBER_DECIMAL_TWO}}</span>
                                <span ng-show="CashBankingSearch.VARIANCE==null">0.00</span>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="form-group">
                        <label for="noteLayout" class="m-0">Comments</label>
                        {{CashBankingSearch.COMMENTS}}
                        <!--<textarea class="form-control" rows="4" id="noteLayout" name="text" ng-model="CashBankingSearch.COMMENTS" ng-class="{'error':!CashBankingSearch.COMMENTS_VALID}" ng-disabled="true"></textarea>-->
                    </div>
                    <!--<hr ng-show="!ACTUALVALID" />
                    <div class="form-group text-red p-3" ng-show="!ACTUALVALID">
                        Please fill the mandatory fields marked in red (*) symbol.
                    </div>-->
                </form>

            </div>
            <div class="modal-footer">
              
                <button type="button" data-dismiss="modal" class="btn btn-sm btn-w-default" ng-click="BANKING_CASHUP_RESET();">Cancel</button>
            </div>
        </div>
    </div>
</div>
