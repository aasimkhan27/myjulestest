<div class="row">
    <templateurl class="w-100" template-url="../AngularViews/HR/ViewEmployee/HeaderDtls.html?v=2136564{{AppVersion}}">
</div>
<div class="card">
    <div class="col-md-12">
        <form id="EmpNoteForm" name="EmpNoteForm" novalidate>
            <div class="form-group mt-2">
                <div for="noteLayout" class="heading-text">
                    Notes:
                    <div class="float-right ml-auto"
                         data-toggle="tooltip"
                         data-html="true"
                         data-original-title="Print PDF">
                        <a class="btn btn-sm btn-wenodo"
                           ng-click="PRINT_NOTE()"><i class="far fa-print"></i></a>
                    </div>
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text"
                           name="TITLE"
                           ng-model="EmpNoteSearch.TITLE"
                           placeholder="Write a Title"
                           class="form-control"
                           maxlength="2000"
                           required
                           ng-class="{'error':EmpNoteForm.submitted && EmpNoteForm.TITLE.$error.required}" />
                </div>
                <textarea class="form-control d-block" rows="4"
                          id="noteLayout"
                          ng-model="EmpNoteSearch.NOTE"
                          placeholder="{{WRITE_A_COMMENT}}"
                          name="NOTE"
                          maxlength="2000"
                          required
                          ng-class="{'error':EmpNoteForm.submitted && EmpNoteForm.NOTE.$error.required}"></textarea>
            </div>
            <div class="col-md-12">
                <div data-ng-show="EmpNoteForm.submitted && EmpNoteForm.$invalid" class="form-group has-error errormessage badge badge-light-red w-100 p-3">
                    <span class="help-block errormessageline" style="padding-left:0px;"><i class="fa fa-exclamation-triangle"></i> - Please provide the mandatory details to submit(marked in red).</span>
                </div>
                <div id="divInvlidUser" class="hideshowdiv" data-ng-show="EmpNoteForm.$valid">
                    <span class="help-block">{{InvalidUser}}</span>
                </div>
            </div>
            <div class="col-md-12 pl-0">
                <button type="button"
                        ng-click="INS_UPD_EMPLOYEE_NOTES();"
                        class="btn btn-sm btn-wenodo">
                    Save
                </button>
                <button type="button"
                        ng-click="RESET_EMPLOYEE_NOTES();"
                        class="btn btn-sm btn-w-default">
                    Reset
                </button>
            </div>
        </form>
    </div>
    <div class="border-bottom"></div>
    <div class="col-md-12" id="NOTE_PDF">
        <div class="mercue" hidden>
            <h6>{{SELECTED_ENTITY_NAME}}</h6>
            <h6 class="heading-text mt-2">{{EMP_SEARCH_NAME_DTL.FIRST_NAME}} {{EMP_SEARCH_NAME_DTL.MIDDLE_NAME}} {{EMP_SEARCH_NAME_DTL.LAST_NAME}}</h6>
        </div>
        <div class="text-center ng-isolate-scope" ng-show="EMPLOYEE_NOTES_LIST.length==0">
            <div class="alert bg-custom-blue">{{NO_COMMENTS}}</div>
        </div>
        <label>Notes History</label>
        <blockquote class="blockquote text-success" ng-repeat="FNL in EMPLOYEE_NOTES_LIST" ng-init="NOTE_INIT(FNL)">
            <span class="float-right mb-2" >
                <!--<a class="btn btn-sm btn-wenodo" ng-show="!FNL.IS_EDIT && FNL.IS_TIME_EDIT_FLAG" ng-click="EDIT_NOTE_COMMENTS(FNL)">Edit</a>-->
                <a class="btn btn-sm btn-wenodo"  ng-show="FNL.EMP_PRS_ID==EmpID" ng-click="DELETE_INS_UPD_EMPLOYEE_NOTES(FNL)">Delete</a>
                <a class="btn btn-sm btn-w-default" ng-show="FNL.IS_EDIT" ng-click="EDIT_NOTE_CANCEL(FNL)"> Cancel</a>
            </span>
            <label ng-show="!FNL.IS_EDIT">Title:-</label>
            <label ng-show="!FNL.IS_EDIT">{{FNL.TITLE}}</label>
            <input type="text"
                   ng-show="FNL.IS_EDIT"
                   name="TITLE{{$index}}"
                   ng-model="FNL.EDIT_TITLE"
                   placeholder="Write a Title"
                   class="form-control"
                   maxlength="2000"
                   ng-class="{'error':EmpNoteForm.submitted && EmpNoteForm.TITLE.$error.required}" />


            <p class="text-success text-sm" ng-show="!FNL.IS_EDIT">
                <label ng-show="!FNL.IS_EDIT">Note:-</label> {{FNL.NOTE}}
            </p>
            <textarea class="form-control d-block mt-2"
                      ng-show="FNL.IS_EDIT"
                      rows="2"
                      id="noteLayout"
                      placeholder="{{WRITE_A_COMMENT}}"
                      name="text"
                      ng-keyup="CHECK_EVENTS($event,FNL)"
                      ng-model="FNL.EDIT_NOTE"></textarea>
            <!--<div ng-show="FNL.IS_EDIT">
                <span>Press Esc to Cancel</span>
                <a ng-click="EDIT_NOTE_CANCEL(FNL)" class="text-blue cursor-pointer">Cancel</a>
            </div>-->
            <footer class="blockquote-footer text-sm" ng-show="!FNL.IS_EDIT">
                {{FNL.CREATED_BY_NAME}},
                <cite title="">{{FNL.CREATED_BY_PRIMARY_EMAIL}}</cite>
                <br />
                <cite class="ml-3">{{FNL.CREATED_DATE | date:'dd-MMM-yyyy HH:mm' }}</cite>
                <div class="border-bottom"></div>
            </footer>
        </blockquote>
    </div>
</div>
