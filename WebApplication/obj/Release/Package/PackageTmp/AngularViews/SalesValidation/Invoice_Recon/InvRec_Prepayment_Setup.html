<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="process-wrapper">
                <div class="row">
                    <templateurl class="w-100" template-url="../AngularViews/SalesValidation/Invoice_Recon/InvRec_Header.html?v=2{{AppVersion}}">
                </div>
                <div id="progress-content-section">
                    <div class="section-content AccrualSetup border-top pt-3 active">
                        <div class="row">
                            <div class="col border border-radius-5 p-2" ng-show="HIDE_SHOW_HEADER_FILTER">
                                <div class="col border-bottom" ng-show="HIDE_SHOW_HEADER_FILTER">
                                    <span class="d-block semibold mb-2"><i class="fal fa-calendar-alt text-blue"></i> {{Inv_recon_Search.FROM_DATE | date}} - {{Inv_recon_Search.TO_DATE | date}}</span>
                                </div>
                                <div class="row">
                                    <div class="col-md-1 text-center">
                                        <label>({{Inv_recon_Search.UPLOADED_CAT_COUNT=(CATEGORY_MASTER_LIST | filter:{'UPLOATED_CATE':true}).length}}) Upload category</label>
                                        <div class="custom-scrollbar">
                                            <div class="d-block mb-2 badge badge-light-green p-2" ng-repeat="CT in CATEGORY_MASTER_LIST">
                                                <span class="bigcheck">
                                                    <label class="bigcheck float-left" for="UPLOAD_CT{{$index}}">
                                                        <input type="checkbox" class="bigcheck" ng-change="SET_CHECKBOX_LINE(XIL)" ng-model="CT.UPLOATED_CATE" id="UPLOAD_CT{{$index}}" />
                                                        <span class="bigcheck-target"></span>
                                                    </label>
                                                </span>
                                                {{CT.CATEGORY_NAME}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-1 text-center">
                                        <label>({{Inv_recon_Search.XERO_CAT_COUNT=(CATEGORY_MASTER_LIST | filter:{'XERO_CATE':true}).length}}) Xero category</label>
                                        <div class="custom-scrollbar">
                                            <div class="d-block mb-2 badge badge-light-blue p-2" ng-repeat="CT in CATEGORY_MASTER_LIST">
                                                <span class="bigcheck">
                                                    <label class="bigcheck float-left" for="XERO_CT{{$index}}">
                                                        <input type="checkbox" class="bigcheck" ng-change="SET_CHECKBOX_LINE(XIL)" ng-model="CT.XERO_CATE" id="XERO_CT{{$index}}" />
                                                        <span class="bigcheck-target"></span>
                                                    </label>
                                                </span>
                                                {{CT.CATEGORY_NAME}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col text-center custom-scrollbar" style="max-height:215px;" ng-show="HIDE_SHOW_HEADER_FILTER">
                                        <label class="sticky-top">({{Inv_recon_Search.XERO_CONTACT_COUNT=(INV_RECO_INVOICE_FOR_ACCRUAL | unique : 'XERO_CONTACT_NAME' | filter:{'IS_CONTACT_FIL':true}).length}}) Xero Contact</label>
                                        <div class="row">
                                            <div class="col-md-3" ng-repeat="CT in INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | unique : 'XERO_CONTACT_NAME'">
                                                <div class="d-block my-1 badge badge-light-purple p-2">
                                                    <span class="bigcheck">
                                                        <label class="bigcheck mb-0 float-left mr-2" for="CONTACT_FL{{$index}}">
                                                            <input type="checkbox" class="bigcheck" ng-change="SET_CHECKBOX_LINE(XIL)" ng-model="CT.IS_CONTACT_FIL" id="CONTACT_FL{{$index}}" />
                                                            <span class="bigcheck-target"></span>
                                                        </label>
                                                        <span class="text-limit-70">
                                                            ({{(INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST |  filter:{'XERO_CONTACT_NAME':CT.XERO_CONTACT_NAME}).length }})
                                                            {{CT.XERO_CONTACT_NAME==null?'-':CT.XERO_CONTACT_NAME}}
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-auto ml-auto">
                                <div class="col-auto">
                                    <a class="c-button cursor-pointer" id="iButton" value="Impressum" ng-click="HIDE_SHOW_FILTER_FY()" data-toggle="tooltip" data-html="true" data-original-title="Show Data">
                                        <i ng-class="{'fas fa-minus-square text-blue':HIDE_SHOW_HEADER_FILTER,'fas fa-plus-square text-blue' :!HIDE_SHOW_HEADER_FILTER}" class=""></i>
                                    </a>
                                </div>
                            </div>
                           
                            <div class="col-md-12 animated fadeInUp my-3 mb-2 border-top">
                                <div class="row">
                                    <div class="col-md-2 mt-3">
                                        <i class="fal fa-lightbulb-on text-warning"></i>
                                        <span class="text-bold">Note: </span>
                                        <i class="fas fa-circle text-orange"></i> Already posted in JV
                                    </div>
                                    <div class="col-auto mt-3">
                                        <i class="fas fa-circle text-danger"></i> Unmatched values
                                    </div>
                                    <div class="col-auto ml-auto mt-4 text-sm text-bold text-blue">
                                        Showing
                                        {{(XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST | filter: FilterInvRecListByUCategory | filter :FilterInvRecListByXCategory | filter :FilterInvRecListByXContact  | filter :{'INVOICE_NUMBER':Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER':Inv_recon_Search.FILTER_XERO_INVOICE}).length + (INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter: FilterInvRecListByUCategory | filter :FilterInvRecListByXCategory | filter :FilterInvRecListByXContact  | filter :{'INVOICE_NUMBER':Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER':Inv_recon_Search.FILTER_XERO_INVOICE}).length  }} of  {{XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST.length + INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST.length}}

                                    </div>
                                </div>

                                <div class="table-responsive custom-scrollbar height-70vh">
                                    <table class="table thead-fixed table-striped table-hover v-align-top compact_table">
                                        <thead class="bg-wenodo-border">
                                            <tr>
                                                <th width="4%"></th>
                                                <th width="10%">Account</th>
                                                <th>Contact</th>
                                                <th width="6%">Date</th>
                                                <th width="8%">
                                                    <input type="text"
                                                           class="form-control"
                                                           name="FILTER_INVOICE"
                                                           placeholder="Invoice#"
                                                           ng-change="Inv_recon_Search.FILTER_INVOICE==''?Inv_recon_Search.FILTER_INVOICE=undefined:''"
                                                           ng-model="Inv_recon_Search.FILTER_INVOICE" />
                                                </th>
                                                <th class="text-right" width="6%">Amount</th>
                                                <!--<th width="3%">Status</th>-->
                                                <th width="5%" class="text-right">Variance</th>
                                                <th width="10%">Account</th>
                                                <th>Contact</th>
                                                <th width="6%">Date</th>
                                                <th width="8%">

                                                    <input type="text"
                                                           class="form-control"
                                                           name="FILTER_INVOICE"
                                                           placeholder="Xero Invoice#"
                                                           ng-change="Inv_recon_Search.FILTER_XERO_INVOICE==''?Inv_recon_Search.FILTER_XERO_INVOICE=undefined:''"
                                                           ng-model="Inv_recon_Search.FILTER_XERO_INVOICE" />

                                                </th>
                                                <th class="text-right" width="6%">Amount</th>
                                                <th>Action</th>
                                                <!--<th width="4%"></th>-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <span class="bigcheck" ng-show="((Inv_recon_Search.FILTER_INVOICE ==''  || Inv_recon_Search.FILTER_INVOICE ==null)  && (Inv_recon_Search.FILTER_XERO_INVOICE=='' || Inv_recon_Search.FILTER_XERO_INVOICE==null))">
                                                        <label class="bigcheck mb-0" for="MISSING_IS_XERO">
                                                            <input type="checkbox"
                                                                   class="bigcheck"
                                                                   ng-change="SET_CHECKBOX_MISSING_IS_XERO_HEADER(0)"
                                                                   name="MISSING_IS_XERO"
                                                                   ng-model="Inv_recon_Search.IS_MISSING_IS_XERO"
                                                                   id="MISSING_IS_XERO" />
                                                            <span class="bigcheck-target"></span>
                                                        </label>
                                                        <span class="mt-1 ml-2 font-18 text-bold text-blue">All</span>
                                                    </span>
                                                </td>
                                                <td colspan="12" class="text-bold text-center font-18 text-blue">({{ XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST.length}}) Missing in FNB </td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-repeat="INVC in XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST | filter: FilterInvRecListByUCategory | filter :FilterInvRecListByXCategory | filter :FilterInvRecListByXContact  | filter :{'INVOICE_NUMBER':Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER':Inv_recon_Search.FILTER_XERO_INVOICE} | orderBy:'SORT_ORDER' "
                                               ng-init="INVC.FILTER_STATUS_ID=(INVC.MATCH_TYPE==-1 || INVC.MATCH_TYPE==0 || INVC.MATCH_TYPE==1 || INVC.MATCH_TYPE==2 || INVC.MATCH_TYPE==8)?INVC.MATCH_TYPE:7"
                                               on-finish-render="ngRepeatFinished">
                                            <tr class=" bg  "
                                                ng-class="{'error-code':INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0 && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID}" ng-init="INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==1 ?INVC.IS_SELECTED=true:'';INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0  && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID?INVC.SORT_ORDER=1:INVC.SORT_ORDER=0">
                                                <td>
                                                    <span class="bigcheck d-flex">
                                                        <label class="bigcheck mb-0" for="XeroIndex{{$index}}">
                                                            <input type="checkbox"
                                                                   class="bigcheck"
                                                                   name="XeroIndex{{$index}}"
                                                                   ng-model="INVC.IS_SELECTED"
                                                                   ng-change="SET_CHECKBOX_MISSING_IS_XERO_LINE(0)"
                                                                   id="XeroIndex{{$index}}" />
                                                            <span class="bigcheck-target"></span>
                                                        </label>
                                                        <span class="mt-1 ml-2"> {{$index+1}}</span>
                                                    </span>
                                                </td>
                                                <td>{{INVC.ACCOUNT}}</td>
                                                <td class="font-11">{{INVC.CONTACT}}</td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==5  || INVC.MATCH_TYPE==6 || INVC.MATCH_TYPE==9}"><span class="text-nowrap">{{INVC.DATE | date}}</span></td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==3 || INVC.MATCH_TYPE==4}">{{INVC.INVOICE_NUMBER}}</td>
                                                <td class="text-right font-14" ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==2 ||INVC.MATCH_TYPE==4 || INVC.MATCH_TYPE==6  || INVC.MATCH_TYPE==7 || INVC.MATCH_TYPE==9}">
                                                    <span class="text-nowrap">
                                                        <span ng-show="INVC.NET_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>  {{INVC.NET_AMOUNT  | number:2}}
                                                        <span ng-show="INVC.NET_AMOUNT==null">-</span>
                                                    </span>
                                                </td>
                                                <td class="text-right text-bold">
                                                    {{(INVC.VARIANCE=(INVC.XERO_NET-INVC.NET_AMOUNT)) | number:2}}
                                                </td>
                                                <td>
                                                    <span ng-show="INVC.XERO_ACCOUNT_NAME==null">-</span>
                                                    <span ng-show="INVC.XERO_ACCOUNT_NAME!=null">{{INVC.XERO_ACCOUNT_NAME | limitTo :30}}</span>
                                                </td>
                                                <td class="font-11 text-capitalize">
                                                    {{INVC.XERO_CONTACT_NAME}}
                                                </td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==5  || INVC.MATCH_TYPE==6 ||  INVC.MATCH_TYPE==9}">
                                                    <span ng-show="INVC.XERO_INVOICE_DATE==null">-</span>
                                                    <span ng-show="INVC.XERO_INVOICE_DATE!=null"> {{INVC.XERO_INVOICE_DATE | date}}</span>
                                                </td>
                                                <td class="font-14 text-nowrap" ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==3 || INVC.MATCH_TYPE==4}">
                                                    <span ng-show="INVC.XERO_INVOICE_NUMBER==null">-</span>{{INVC.XERO_INVOICE_NUMBER}}
                                                    <a ng-show="INVC.XERO_INVOICE_NUMBER!=null">
                                                        <i ng-click="GET_XERO_INVOICES_DETAILS(INVC,2)" data-toggle="tooltip"
                                                           data-html="true" data-original-title="View Invoice" class="fa fa-eye "></i>
                                                    </a>
                                                </td>
                                                <td class="text-right font-14"
                                                    ng-class="{'text-bold text-danger':INVC.MATCH_TYPE==2 ||INVC.MATCH_TYPE==4 || INVC.MATCH_TYPE==6  || INVC.MATCH_TYPE==7 ||  INVC.MATCH_TYPE==9}">
                                                    <span class="text-nowrap">
                                                        <span ng-show="INVC.XERO_NET!=null" ng-bind-html="CURRENCY_SYMBOL"></span>
                                                        <span ng-show="INVC.XERO_NET==null">-</span>
                                                        {{INVC.XERO_NET | number:2}}
                                                    </span>
                                                </td>
                                                <td>
                                                    <i data-toggle="tooltip"
                                                       data-html="true"
                                                       ng-show="INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0  && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID"
                                                       ng-click="GET_INV_RECO_JOURNALS_BY_ID(INVC)"
                                                       data-original-title="Already posted in JV"
                                                       class="fa fa-eye cursor-pointer"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody class="text-orange">
                                            <tr class="text-orange">
                                                <td>
                                                    <span class="bigcheck" ng-show="((Inv_recon_Search.FILTER_INVOICE ==''  || Inv_recon_Search.FILTER_INVOICE ==null)  && (Inv_recon_Search.FILTER_XERO_INVOICE=='' || Inv_recon_Search.FILTER_XERO_INVOICE==null))">
                                                        <label class="bigcheck mb-0" for="VALUE_VARIANCE">
                                                            <input ng-show="false" type="checkbox"
                                                                   class="bigcheck"
                                                                   ng-change="SET_CHECKBOX_MISSING_IS_XERO_HEADER(1)"
                                                                   name="VALUE_VARIANCE"
                                                                   ng-model="Inv_recon_Search.IS_VALUE_VARIANCE"
                                                                   id="VALUE_VARIANCE" />
                                                            <span class="bigcheck-target"></span>
                                                        </label>
                                                        <span class="mt-1 ml-2 font-18 text-blue text-bold">All</span>
                                                    </span>
                                                </td>
                                                <td colspan="12" class="text-bold text-center font-18 text-blue">({{(INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter :{'MATCH_TYPE':'!0'}).length}}) Value Variance</td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-repeat="INVC in INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter :{'MATCH_TYPE':'!0'} | filter: FilterInvRecListByUCategory | filter :FilterInvRecListByXCategory | filter :FilterInvRecListByXContact  | filter :{'INVOICE_NUMBER':Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER':Inv_recon_Search.FILTER_XERO_INVOICE} | orderBy:'SORT_ORDER'"
                                               ng-init="INVC.FILTER_STATUS_ID=(INVC.MATCH_TYPE==-1 || INVC.MATCH_TYPE==0 || INVC.MATCH_TYPE==1 || INVC.MATCH_TYPE==2 || INVC.MATCH_TYPE==8)?INVC.MATCH_TYPE:7;INVC.VARIANCE=0"
                                               on-finish-render="ngRepeatFinished">
                                            <tr class="bg "
                                                ng-class="{'error-code':INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0 && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID}" ng-init="INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==1 ?INVC.IS_SELECTED=true:'';INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0  && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID?INVC.SORT_ORDER=1:INVC.SORT_ORDER=0">
                                                <td>
                                                    <span class="bigcheck d-flex">
                                                        <label class="bigcheck mb-0" for="ValueIndex{{$index}}">
                                                            <input type="checkbox"
                                                                   class="bigcheck"
                                                                   ng-change="SET_CHECKBOX_MISSING_IS_XERO_LINE(1)"
                                                                   name="ValueIndex{{$index}}"
                                                                   ng-model="INVC.IS_SELECTED"
                                                                   id="ValueIndex{{$index}}" />
                                                            <span class="bigcheck-target"></span>
                                                        </label>
                                                        <span class="mt-1 ml-2"> {{$index+1}}</span>
                                                    </span>

                                                </td>
                                                <td>{{INVC.ACCOUNT}}</td>
                                                <td class="font-11">{{INVC.CONTACT}}</td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==5  || INVC.ORIGINAL_MATCH_TYPE==6 || INVC.ORIGINAL_MATCH_TYPE==9}"><span class="text-nowrap">{{INVC.DATE | date}}</span></td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==3 || INVC.ORIGINAL_MATCH_TYPE==4}">{{INVC.INVOICE_NUMBER}}</td>
                                                <td class="text-right font-14" ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==2 ||INVC.ORIGINAL_MATCH_TYPE==4 || INVC.ORIGINAL_MATCH_TYPE==6  || INVC.ORIGINAL_MATCH_TYPE==7 || INVC.ORIGINAL_MATCH_TYPE==9}">
                                                    <span class="text-nowrap">
                                                        <span ng-show="INVC.NET_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>  {{INVC.NET_AMOUNT  | number:2}}
                                                        <span ng-show="INVC.NET_AMOUNT==null">-</span>
                                                    </span>
                                                </td>
                                                <td class="text-right text-bold">
                                                    {{(INVC.VARIANCE=(INVC.XERO_NET-INVC.NET_AMOUNT)) | number:2}}
                                                </td>
                                                <td>
                                                    <span ng-show="INVC.XERO_ACCOUNT_NAME==null">-</span>
                                                    <span ng-show="INVC.XERO_ACCOUNT_NAME!=null">{{INVC.XERO_ACCOUNT_NAME | limitTo :30}}</span>
                                                </td>
                                                <td class="font-11 text-capitalize">{{INVC.XERO_CONTACT_NAME}}</td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==5  || INVC.ORIGINAL_MATCH_TYPE==6 ||  INVC.ORIGINAL_MATCH_TYPE==9}">
                                                    <span ng-show="INVC.XERO_INVOICE_DATE==null">-</span>
                                                    <span ng-show="INVC.XERO_INVOICE_DATE!=null"> {{INVC.XERO_INVOICE_DATE | date}}</span>
                                                </td>
                                                <td class="font-14" ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==3 || INVC.ORIGINAL_MATCH_TYPE==4}">
                                                    <span ng-show="INVC.XERO_INVOICE_NUMBER==null">-</span>{{INVC.XERO_INVOICE_NUMBER}}
                                                    <a ng-show="INVC.XERO_INVOICE_NUMBER!=null"><i ng-click="GET_XERO_INVOICES_DETAILS(INVC,2)" class="fa fa-eye"></i></a>
                                                </td>
                                                <td class="text-right font-14"
                                                    ng-class="{'text-bold text-danger':INVC.ORIGINAL_MATCH_TYPE==2 ||INVC.ORIGINAL_MATCH_TYPE==4 || INVC.ORIGINAL_MATCH_TYPE==6  || INVC.ORIGINAL_MATCH_TYPE==7 ||  INVC.ORIGINAL_MATCH_TYPE==9}">
                                                    <span class="text-nowrap">
                                                        <span ng-show="INVC.XERO_NET!=null" ng-bind-html="CURRENCY_SYMBOL"></span>
                                                        <span ng-show="INVC.XERO_NET==null">-</span>
                                                        {{INVC.XERO_NET | number:2}}
                                                    </span>
                                                </td>
                                                <td>
                                                    <i data-toggle="tooltip"
                                                       data-html="true"
                                                       ng-show="INVC.JV_HEADER_ID>0 && INVC.IS_JV_FLAG==0 && INVC.JV_HEADER_ID!=Inv_recon_Search.Table1.JV_HEADER_ID"
                                                       ng-click="GET_INV_RECO_JOURNALS_BY_ID(INVC)"
                                                       data-original-title="Already posted in JV"
                                                       class="fa fa-eye text-success cursor-pointer"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr class="table-footer-fixed">
                                                <td colspan="5" class="text-bold font-14">Total</td>
                                                <td class="text-right text-bold font-14 text-nowrap">
                                                    <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                                    {{(INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter :FilterInvoiceList  | filter :{'INVOICE_NUMBER': Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER': Inv_recon_Search.FILTER_XERO_INVOICE}) | total:'NET_AMOUNT' | number:2}}
                                                </td>
                                                <td class="text-right text-bold font-14 text-nowrap">
                                                    <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                                    <span ng-show="false">
                                                        {{PREPAY_VAR=((INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter :FilterInvoiceList  | filter :{'INVOICE_NUMBER': Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER': Inv_recon_Search.FILTER_XERO_INVOICE}) | total:'VARIANCE')}}
                                                        {{INV_REOC_VAR=((XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST | filter :FilterInvoiceList  | filter :{'INVOICE_NUMBER': Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER': Inv_recon_Search.FILTER_XERO_INVOICE}) | total:'VARIANCE')}}
                                                    </span>
                                                    {{(PREPAY_VAR + INV_REOC_VAR) | number:2}}
                                                </td>
                                                <td colspan="4"></td>
                                                <td class="text-right text-bold font-14 text-nowrap">

                                                    <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                                    <span ng-show="false">
                                                        {{XERO_AMT_REC=((INV_RECO_INVOICE_FOR_PRE_PAYMENT_LIST | filter :FilterInvoiceList  | filter :{'INVOICE_NUMBER': Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER': Inv_recon_Search.FILTER_XERO_INVOICE}) | total:'XERO_NET')}}
                                                        {{XERO_AMT_PRE=((XERO_INVOICES_FOR_INV_RECO_PAGE_LOAD_LIST | filter :FilterInvoiceList  | filter :{'INVOICE_NUMBER': Inv_recon_Search.FILTER_INVOICE} | filter :{'XERO_INVOICE_NUMBER': Inv_recon_Search.FILTER_XERO_INVOICE}) | total:'XERO_NET')}}
                                                    </span>
                                                    {{(XERO_AMT_REC + XERO_AMT_PRE) | number:2}}
                                                </td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="w-100 form-group mt-4 text-right">
                                <button type="button" ng-click="INV_REC_PAGE_LOAD(Inv_recon_Search,5)" class="btn btn-w-default">Previous</button>
                                <button type="button" ng-click="CREATE_INV_RECO_PREPAYMENT_STP()" class="btn btn-wenodo">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade show" id="RECO_JOURNALS">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Match JV</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row border-bottom">
                    <div class="col-auto">
                        <h5 class="w-100 card-title">Narration</h5>
                        <p class="font-14">{{INV_RECO_BY_ID_HEADER_DTLS.NARRATION}}</p>
                    </div>
                    <div class="col">
                        <h5 class="w-100 card-title">Date</h5>
                        <p class="font-14">{{INV_RECO_BY_ID_HEADER_DTLS.JOURNAL_DATE | date }}</p>
                    </div>
                </div>
                <table class="table thead-fixed table-striped table-hover v-align-top compact_table">
                    <thead class="bg-wenodo-border">
                        <tr class="bg-wenodo-border">
                            <th width="5%"></th>
                            <th>Description</th>
                            <th width="10%">Account</th>
                            <th width="10%">Tax Rate</th>
                            <th ng-show="false">Sites</th>
                            <th class="text-right" ng-show="false">Sales</th>
                            <th class="text-right  text-nowrap" ng-show="false">Debit GBP</th>
                            <th class="text-right text-nowrap" ng-show="false">Credit GBP</th>
                            <th width="6%">Date</th>

                            <th class="text-right" width="6%">Amount</th>
                            <th width="10%">Tracking Name 1</th>
                            <th width="10%">Tracking Name 2</th>
                            <th width="10%">Tracking Option 1</th>
                            <th width="6%">Tracking Option 2</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="INVC in RECO_JOURNALS_BY_ID_LIST" on-finish-render="ngRepeatFinished">
                        <tr class="" ng-class="{'text-bold bg-warning':INVC.JOURNAL_LINE_ID==SELECTED_LINE.JV_LINE_ID}">
                            <td>
                                <span class="bigcheck d-flex" ng-show="false">
                                    <label class="bigcheck mb-0" for="XeroIndex{{$index}}">
                                        <input type="checkbox"
                                               class="bigcheck"
                                               name="XeroIndex{{$index}}"
                                               ng-model="INVC.IS_SELECTED"
                                               id="XeroIndex{{$index}}" />
                                        <span class="bigcheck-target"></span>
                                    </label>

                                </span>
                                <span class="mt-1 ml-2"> {{$index+1}}</span>

                            </td>
                            <td>{{INVC.DESCRIPTION}}</td>
                            <td>{{INVC.XERO_ACCOUNT_CODE}}</td>
                            <td>{{INVC.XERO_TAX_TYPE}}</td>
                            <td ng-show="false"></td>
                            <td class="text-right" ng-show="false">
                                <span class="text-nowrap">
                                    <span ng-show="INVC.LINE_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>
                                    <span ng-show="INVC.LINE_AMOUNT==null">-</span>
                                </span>
                            </td>
                            <td class="text-right" ng-show="false">
                                <span class="text-nowrap">
                                    <span ng-show="INVC.LINE_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>
                                    <span ng-show="INVC.LINE_AMOUNT==null">-</span>
                                </span>
                            </td>
                            <td class="text-right" ng-show="false">
                                <span class="text-nowrap">
                                    <span ng-show="INVC.LINE_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>
                                    <span ng-show="INVC.LINE_AMOUNT==null">-</span>
                                </span>
                            </td>
                            <td><span class="text-nowrap">{{INVC.CREATED_DATE | date}}</span></td>


                            <td class="text-right">
                                <span class="text-nowrap">
                                    <span ng-show="INVC.LINE_AMOUNT!=null" ng-bind-html="CURRENCY_SYMBOL"></span>  {{INVC.LINE_AMOUNT}}
                                    <span ng-show="INVC.LINE_AMOUNT==null">-</span>
                                </span>
                            </td>

                            <td class="text-right">
                                <span class="text-nowrap">
                                    <span ng-show="INVC.TRACKING_NAME_1!=null"></span>  {{INVC.TRACKING_NAME_1}}
                                    <span ng-show="INVC.TRACKING_NAME_1==null">-</span>
                                </span>
                            </td>
                            <td class="text-right text-bold">
                                <span ng-show="INVC.TRACKING_NAME_2==null">-</span>
                                <span ng-show="INVC.TRACKING_NAME_2!=null">{{INVC.TRACKING_NAME_2}}</span>
                            </td>
                            <td>
                                <span ng-show="INVC.TRACKING_OPTION_1==null">-</span>
                                <span ng-show="INVC.TRACKING_OPTION_1!=null">{{INVC.TRACKING_OPTION_1}}</span>
                            </td>
                            <td>
                                <span ng-show="INVC.TRACKING_OPTION_2==null">-</span>
                                <span ng-show="INVC.TRACKING_OPTION_2!=null">{{INVC.TRACKING_OPTION_2}}</span>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="table-footer-fixed">
                            <td colspan="4"></td>
                            <td class="text-bold">Total</td>
                            <td class="text-right text-bold text-nowrap">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                {{(INV_RECO_PREPAYMENT_JOURNALS_LIST | total:'LINE_AMOUNT') | number:2}}
                            </td>
                            <td class="text-right text-bold text-nowrap" ng-show="false">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                {{(INV_RECO_JOURNALS_LIST | total:'LINE_AMOUNT') | number:2}}
                            </td>
                            <td class="text-right text-bold text-nowrap" ng-show="false">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                {{(INV_RECO_JOURNALS_LIST | total:'LINE_AMOUNT') | number:2}}
                            </td>
                            <td></td>
                            <td class="text-right text-bold text-nowrap" ng-show="false">
                                <span ng-bind-html="CURRENCY_SYMBOL"></span>
                                {{(INV_RECO_JOURNALS_LIST | total:'LINE_AMOUNT') | number:2}}
                            </td>
                            <td colspan="4"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>

        </div>
    </div>
</div>